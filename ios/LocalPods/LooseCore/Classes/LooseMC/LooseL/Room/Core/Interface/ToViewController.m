
#import <Foundation/Foundation.h>

NSString *StringFromLoonData(Byte *data);


//:  踢出直播间
Byte kAcidCoordinateText[] = {87, 16, 69, 7, 208, 144, 245, 101, 45, 253, 231, 42, 204, 255, 44, 224, 249, 43, 215, 242, 46, 220, 249, 72};


//: 取消
Byte k_strokeRichFacultyData[] = {78, 6, 2, 5, 90, 231, 145, 152, 232, 184, 138, 55};


//: rid
Byte kMeasurementName[] = {50, 3, 19, 5, 196, 133, 124, 119, 112};


//: onBroadCast
Byte kStatContent[] = {3, 11, 64, 4, 175, 174, 130, 178, 175, 161, 164, 131, 161, 179, 180, 63};


//: 你已经被 
Byte kFilmContent[] = {77, 13, 18, 13, 161, 150, 211, 45, 179, 190, 114, 44, 198, 246, 207, 178, 247, 201, 196, 249, 205, 161, 250, 180, 189, 50, 89};


//: 余额不足
Byte k_steadilyText[] = {49, 12, 88, 7, 156, 48, 245, 60, 21, 241, 65, 250, 245, 60, 16, 229, 64, 14, 11, 225};


//: #73F7CD
Byte kChronicName[] = {96, 7, 18, 8, 184, 192, 32, 214, 53, 73, 69, 88, 73, 85, 86, 157};


//: 当前余额不足，充值后才能继续送礼，是否去充值？
Byte kDawnText[] = {88, 69, 88, 14, 102, 5, 100, 11, 124, 210, 117, 174, 174, 245, 61, 21, 235, 61, 225, 229, 60, 21, 241, 65, 250, 245, 60, 16, 229, 64, 14, 11, 71, 20, 228, 61, 221, 221, 61, 216, 20, 61, 232, 230, 62, 225, 229, 64, 219, 21, 63, 19, 255, 63, 19, 5, 65, 216, 217, 63, 252, 20, 71, 20, 228, 62, 240, 7, 61, 232, 254, 61, 230, 19, 61, 221, 221, 61, 216, 20, 71, 20, 247, 182};


//: <font color=\"%@\">直播开始</font>
Byte k_peakEnableSoftlyText[] = {11, 36, 98, 10, 71, 94, 111, 99, 132, 140, 158, 200, 209, 208, 214, 130, 197, 209, 206, 209, 212, 159, 132, 135, 162, 132, 160, 73, 253, 22, 72, 244, 15, 71, 30, 226, 71, 9, 237, 158, 145, 200, 209, 208, 214, 160, 96};


//: onSendGift
Byte kBooValue[] = {20, 10, 55, 5, 182, 166, 165, 138, 156, 165, 155, 126, 160, 157, 171, 48};


//: jumpUrl
Byte kDefineRecordData[] = {14, 7, 11, 11, 97, 7, 100, 123, 119, 91, 169, 117, 128, 120, 123, 96, 125, 119, 171};


//: <font color=\"%@\">直播结束</font>
Byte k_peakNeverthelessValue[] = {56, 36, 73, 7, 61, 38, 177, 133, 175, 184, 183, 189, 105, 172, 184, 181, 184, 187, 134, 107, 110, 137, 107, 135, 48, 228, 253, 47, 219, 246, 48, 4, 220, 47, 230, 232, 133, 120, 175, 184, 183, 189, 135, 211};


//: msg
Byte k_creationValue[] = {62, 3, 80, 6, 45, 130, 189, 195, 183, 175};


//: onSendBarrage
Byte kAbroadTitle[] = {10, 13, 99, 13, 80, 157, 177, 18, 121, 184, 36, 49, 34, 210, 209, 182, 200, 209, 199, 165, 196, 213, 213, 196, 202, 200, 173};


//: 确定
Byte kWhisperTitle[] = {68, 6, 23, 14, 3, 5, 126, 122, 173, 132, 41, 197, 27, 182, 254, 184, 197, 252, 197, 177, 125};


//: jumpType
Byte kCuriosityGalleryValue[] = {24, 8, 88, 14, 41, 210, 80, 254, 247, 253, 28, 16, 140, 22, 194, 205, 197, 200, 172, 209, 200, 189, 130};


//: 充值
Byte kCityEraseTitle[] = {86, 6, 72, 13, 195, 21, 65, 120, 43, 163, 114, 252, 177, 45, 205, 205, 45, 200, 4, 122};

// __DEBUG__
// __CLOSE_PRINT__
//
//  ToViewController.m
//  XingGuang
//
//  Created by Jack on 2018/12/26.
//  Copyright © 2018 app. All rights reserved.
//
//: 
//: 
//: 
//: @interface LFCRoomBaseController ()

// __M_A_C_R_O__
#import "ToViewController.h"
#import "PlayColorBbbb+LiquidEcstasy.h"
#import "LFCRoomMsgModel+DinnerBucket.h"

@interface ToViewController ()
//: @property (nonatomic, assign) NSInteger MESSAGECOUNT;
@property (nonatomic, assign) NSInteger table;
//: @end
@end

//: @implementation LFCRoomBaseController
@implementation ToViewController

//: #pragma mark - life circle
#pragma mark - life circle

//: - (void)dealloc {
- (void)dealloc {

    //: [[NSNotificationCenter defaultCenter] removeObserver:self];
    [[NSNotificationCenter defaultCenter] removeObserver:self];

    //: [self disConnectSocket];
    [self quantity];
    //: _currentChildViewController = nil;
    _districtManager = nil;


    //: [[UIApplication sharedApplication] setIdleTimerDisabled:NO];
    [[UIApplication sharedApplication] setIdleTimerDisabled:NO];
}

//: - (void)viewDidLoad {
- (void)viewDidLoad {

    //: [super viewDidLoad];
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    //关闭自动锁屏
    //: [[UIApplication sharedApplication] setIdleTimerDisabled:YES];
    [[UIApplication sharedApplication] setIdleTimerDisabled:YES];

    //: [self installNotifitionObserver];
    [self social];
}

//: - (void)viewDidAppear:(BOOL)animated {
- (void)viewDidAppear:(BOOL)animated {

    //: [super viewDidAppear:animated];
    [super viewDidAppear:animated];
    //: self.navigationController.interactivePopGestureRecognizer.enabled = NO;
    self.navigationController.interactivePopGestureRecognizer.enabled = NO;
}

//: - (void)viewDidDisappear:(BOOL)animated {
- (void)viewDidDisappear:(BOOL)animated {

    //: [super viewDidDisappear:animated];
    [super viewDidDisappear:animated];
    //: self.navigationController.interactivePopGestureRecognizer.enabled = YES;
    self.navigationController.interactivePopGestureRecognizer.enabled = YES;
}

//: #pragma mark - initial
#pragma mark - initial

//: - (instancetype)initwithRoomId:(NSInteger)roomId{
- (instancetype)initPath:(NSInteger)roomId{
    //: self = [super init];
    self = [super init];
    //: if (self) {
    if (self) {
        //: self.hideNavi = YES;
        self.manageressBbbb = YES;
        //: self.hidesBottomBarWhenPushed = YES;
        self.hidesBottomBarWhenPushed = YES;
        //: [self resetRoomId:roomId];
        [self erase:roomId];
        //: [self setup];
        [self firstControl];
    }
    //: return self;
    return self;
}


- (void)firstControl {
    //: _roomSocket = [[LFCRoomSocket alloc] init];
    _domain = [[SocketIdentityTrail alloc] init];
    //: _msgList = [[NSMutableArray alloc] init];
    _sendShow = [[NSMutableArray alloc] init];

}

//: #pragma mark - config
#pragma mark - config
//: - (BOOL)prefersStatusBarHidden {
- (BOOL)prefersStatusBarHidden {
    //: return NO;
    return NO;
}

//: - (BOOL)shouldAutorotate{
- (BOOL)shouldAutorotate{
    //: return NO;
    return NO;
}

//: - (UIInterfaceOrientationMask)supportedInterfaceOrientations{
- (UIInterfaceOrientationMask)supportedInterfaceOrientations{
    //: return UIInterfaceOrientationMaskPortrait;
    return UIInterfaceOrientationMaskPortrait;
}

//: - (void)installNotifitionObserver {
- (void)social {

    //: [[NSNotificationCenter defaultCenter] addObserver:self
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             //: selector:@selector(func__didReceiveAccountInfoAlertNoti:)
                                             selector:@selector(ranked:)
                                                 //: name:[NotificationDef GetLoginUserInfoNoti]
                                                 name:[CurrentUp video]
                                               //: object:nil];
                                               object:nil];

    //: [[NSNotificationCenter defaultCenter] addObserver:self
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             //: selector:@selector(func__didReceiveNetStatusChangeNoti:)
                                             selector:@selector(changeClick:)
                                                 //: name:kReachabilityChangedNotification
                                                 name:kReachabilityChangedNotification
                                               //: object:nil];
                                               object:nil];

    //: [[NSNotificationCenter defaultCenter] addObserver:self
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             //: selector:@selector(applicationWillTerminateNoti:)
                                             selector:@selector(totalerested:)
                                                 //: name:UIApplicationWillTerminateNotification
                                                 name:UIApplicationWillTerminateNotification
                                               //: object:nil];
                                               object:nil];
}

//: #pragma mark - NET
#pragma mark - NET

//: - (void)requestRoomInfoWith:(NSInteger)roomId
- (void)data:(NSInteger)roomId
                 //: completion:(void (^)( NSDictionary *content, NSError *error))completionHandler {
                 search:(void (^)( NSDictionary *content, NSError *error))completionHandler {
    //: [LFCLiveNetHelper func__requestGetRoomInfo:@{@"rid": [NSString stringWithFormat:@"%d",roomId]} completion:^(NSDictionary * _Nonnull resultDic, NSError * _Nonnull error) {
    [CityBbbb maturity:@{StringFromLoonData(kMeasurementName): [NSString stringWithFormat:@"%d",roomId]} digitizer:^(NSDictionary * _Nonnull resultDic, NSError * _Nonnull error) {
        //: if (completionHandler) {
        if (completionHandler) {
            //: completionHandler(resultDic,error);
            completionHandler(resultDic,error);
        }
    //: }];
    }];
}

// 5.0.6 获取房间配置信息
//: - (void)func__getRoomStaticInfoWithRoomId:(NSInteger)roomId
- (void)size:(NSInteger)roomId
                         //: completion:(void (^)( NSDictionary *content, NSError *error))completionHandler {    
                         back:(void (^)( NSDictionary *content, NSError *error))completionHandler {
    //: [LFCLiveNetHelper func__requestGetRoomConfig:@{@"rid": [NSString stringWithFormat:@"%d",roomId]} completion:^(NSDictionary * _Nonnull resultDic, NSError * _Nonnull error) {
    [CityBbbb circumference:@{StringFromLoonData(kMeasurementName): [NSString stringWithFormat:@"%d",roomId]} beforeGreet:^(NSDictionary * _Nonnull resultDic, NSError * _Nonnull error) {
        //: if (completionHandler) {
        if (completionHandler) {
            //: completionHandler(resultDic,error);
            completionHandler(resultDic,error);
        }
    //: }];
    }];
}

//: #pragma mark - message & socket
#pragma mark - message & socket

//: - (void)func__webSocketConnect {
- (void)phone {

    //: [self disConnectSocket];
    [self quantity];

    //: self.roomSocket.isPush = self.isPush;
    self.domain.refresh = self.current;
    //: if (self.roomInfoModel.msgIps.count) {
    if (self.female.msgIps.count) {
        //: [self.roomSocket func__connectMsgSocketWithAddrs:self.roomInfoModel.msgIps
        [self.domain portPresent:self.female.msgIps
                                              //: port:@(self.roomInfoModel.msgPort).description
                                              ting:@(self.female.msgPort).description
                                            //: roomId:self.roomId];
                                            bank:self.watch];
    //: }else{
    }else{
        //: if (!FZUtils.isEmptyString(self.roomInfoModel.msgIp)) {
        if (!FZUtils.isEmptyString(self.female.msgIp)) {
            //: [self.roomSocket func__connectMsgSocketWithAddrs:@[self.roomInfoModel.msgIp]
            [self.domain portPresent:@[self.female.msgIp]
                                                  //: port:@(self.roomInfoModel.msgPort).description
                                                  ting:@(self.female.msgPort).description
                                                //: roomId:self.roomId];
                                                bank:self.watch];
        }
    }

    //: self.roomSocket.msgSocket.delegate = self;
    self.domain.planSocket.direction = self;


}

//: - (void)func__videoOffline {
- (void)to {

}

//: - (void)addMessage:(LFCRoomMsgDisplayModel*)model {
- (void)authorCorner:(WithModel*)model {

    //: static LFCRoomMsgDisplayModel *lastModel;
    static WithModel *lastModel;

    //: if (nil == model) return;
    if (nil == model) return;

     //: if (self.msgList.count > 0) {
     if (self.sendShow.count > 0) {
        //: if (   [model isKindOfClass:[LFCRoomUserMsgModel class]]
        if ( [model isKindOfClass:[SelectModel class]]
            //: && [lastModel isKindOfClass:[LFCRoomUserMsgModel class]]) {
            && [lastModel isKindOfClass:[SelectModel class]]) {

            //: [self.msgList replaceObjectAtIndex:self.msgList.count - 1 withObject:model];
            [self.sendShow replaceObjectAtIndex:self.sendShow.count - 1 withObject:model];

        //: } else {
        } else {
            //: [self.msgList addObject:model];
            [self.sendShow addObject:model];
            //: _MESSAGECOUNT ++;
            _table ++;
        }

    //: } else{
    } else{
        //: [self.msgList addObject:model];
        [self.sendShow addObject:model];
    }

    //: lastModel = model;
    lastModel = model;

    //: if (_MESSAGECOUNT >= MAXMESSAGECOUNT) {
    if (_table >= MAXMESSAGECOUNT) {
        //: if (self.msgList.count>=MAXMESSAGECOUNT) {
        if (self.sendShow.count>=MAXMESSAGECOUNT) {
            //: [self.msgList removeObjectAtIndex:MAXMESSAGECOUNT-1];
            [self.sendShow removeObjectAtIndex:MAXMESSAGECOUNT-1];
            //: _MESSAGECOUNT--;
            _table--;
        }
    }

    //: model.displayMaxWidth = ((screenWidth()*7.5/9) - PaddingLeftWidth() - 10);
    model.displayUser = ((screenWidth()*7.5/9) - PaddingLeftWidth() - 10);
    //: [self.currentChildViewController func__refreshMsgList:self.msgList
    [self.districtManager feedback:self.sendShow
                                                          //: add:model];
                                                          wire:model];
}

//: - (void)disConnectSocket {
- (void)quantity {
    //: [self.roomSocket disConnectSocket];
    [self.domain picPair];
}

//: - (void)sendMessage:(NSDictionary*)info {
- (void)dedication:(NSDictionary*)info {

    //: [self.roomSocket sendMsgWith:info];
    [self.domain cellSelect:info];
}

//: - (void)didReceiveError:(NSError*)error{
- (void)nameLine:(NSError*)error{

    //: [self func__videoOffline];
    [self to];
    //: [self disConnectSocket];
    [self quantity];

}


//: #pragma mark - showMsg
#pragma mark - showMsg

//: - (void)showNoMoneyWithCmd:(NSString *)cmd {
- (void)by:(NSString *)cmd {

    //: NSString *msg = nil;
    NSString *msg = nil;

    //: if ([cmd isEqualToString:@"onSendGift"]) {
    if ([cmd isEqualToString:StringFromLoonData(kBooValue)]) {
        //: msg = @"当前余额不足，充值后才能继续送礼，是否去充值？";
        msg = StringFromLoonData(kDawnText);
    }
    //: if (self.currentChildViewController.presentedViewController) {
    if (self.districtManager.presentedViewController) {
        //: [self.currentChildViewController.presentedViewController dismissViewControllerAnimated:YES
        [self.districtManager.presentedViewController dismissViewControllerAnimated:YES
                                                                                    //: completion:^{
                                                                                    completion:^{
                                                                                        //: [self func__showNoMoneyWithStr:msg];
                                                                                        [self create:msg];
                                                                                    //: }];
                                                                                    }];
    //: } else {
    } else {
        //: [self func__showNoMoneyWithStr:msg];
        [self create:msg];
    }
}

//: - (void)func__showNoMoneyWithStr:(NSString *)str {
- (void)create:(NSString *)str {

    //: [Helper showAlert:str
    [WritingGrantBbbb antheralBbbb:str
                //: title:NSLocalizedString(@"余额不足",@"")
                clickWith:NSLocalizedString(StringFromLoonData(k_steadilyText),@"")
         //: cancelAction:NSLocalizedString(@"取消", @"")
         wrapRemindVideo:NSLocalizedString(StringFromLoonData(k_strokeRichFacultyData), @"")
          //: cancelBlock:^{
          album:^{
          }
             //: okAction:NSLocalizedString(@"充值", @"")
             listBy:NSLocalizedString(StringFromLoonData(kCityEraseTitle), @"")
              //: okBlock:^{
              model:^{
                  //: dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(0.1 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{
                  dispatch_after(dispatch_time((0ull), (int64_t)(0.1 * 1000000000ull)), dispatch_get_main_queue(), ^{
                      //: [[AppManager sharedAppManager] func__pushRechargeViewController];
                      [[PlayColorBbbb size] duringRank];
                  //: });
                  });
              //: }];
              }];
}

//: #pragma mark - 统计
#pragma mark - 统计
//: #pragma mark 网络状态监测日志上报
#pragma mark 网络状态监测日志上报


//: #pragma mark - setter
#pragma mark - setter
//: - (void)resetRoomId:(NSInteger)roomId {
- (void)erase:(NSInteger)roomId {
    //: _roomId = roomId;
    _watch = roomId;
}



- (void)setFemale:(AppModel *)female{
    _female = female;
}

//: #pragma mark getter
#pragma mark getter
//: - (BOOL)isPush {
- (BOOL)current {
    //: return NO;
    return NO;
}

//: - (LFCRoomSpecialUserMsgFilter*)userMsgFilter {
- (FilterMaxVideo*)reply {

    //: if (!_userMsgFilter) {
    if (!_reply) {
        //: _userMsgFilter = [[LFCRoomSpecialUserMsgFilter alloc] init];
        _reply = [[FilterMaxVideo alloc] init];
    }

    //: return _userMsgFilter;
    return _reply;
}

//: - (LFCPullStreamView *)pullStreamView {
- (MomentViewBbbb *)crossing {

    //: if ([_roomStreamView isKindOfClass:[LFCPullStreamView class]]) {
    if ([_accountViewBbbb isKindOfClass:[MomentViewBbbb class]]) {
        //: return (LFCPullStreamView *)self.roomStreamView;
        return (MomentViewBbbb *)self.accountViewBbbb;
    }

    //: return nil;
    return nil;
}



//: #pragma mark - 通知
#pragma mark - 通知
//: #pragma mark 通知 账号信息变动
#pragma mark 通知 账号信息变动
//: - (void)func__didReceiveAccountInfoAlertNoti:(NSNotification *)sender {
- (void)ranked:(NSNotification *)sender {

    // subclass implementation
}

//: #pragma mark 通知 网络状态变更
#pragma mark 通知 网络状态变更
//: - (void)func__didReceiveNetStatusChangeNoti:(NSNotification *)sender {
- (void)changeClick:(NSNotification *)sender {
    // subclass implementation
}

//: - (void)applicationWillTerminateNoti:(NSNotification *)sender {
- (void)totalerested:(NSNotification *)sender {

    //: [self disConnectSocket];
    [self quantity];
}

//: #pragma mark - GJRoomInterfaceControllerDataSource
#pragma mark - MomentChart

//: - (LRoomUserType)whatUserTypeOf:(NSInteger)uid
- (LRoomUserType)controllerColor:(NSInteger)uid
                //: inViewController:(LFCRoomInterfaceController *)viewController {
                message:(ServerViewController *)viewController {

    //: if (uid == self.roomInfoModel.moderator.id) {
    if (uid == self.female.moderator.id) {
        //: return LRoomUserTypeRoomOwn;
        return LRoomUserTypeRoomOwn;
    }

    //: if ([self.roomInfoModel isAdmin:uid]) {
    if ([self.female load:uid]) {
        //: return LRoomUserTypeAdmin;
        return LRoomUserTypeAdmin;
    }

    //: return LRoomUserTypeCommonUser;
    return LRoomUserTypeCommonUser;
}

//: - (LFCRoomInfoModel*)roomInfoModelInViewController:(LFCRoomInterfaceController *)viewController {
- (AppModel*)cameras:(ServerViewController *)viewController {

    //: return self.roomInfoModel;
    return self.female;
}


//: #pragma mark - GJRoomInterfaceControllerDelegate
#pragma mark - ViewPlayTheme

//: - (void)viewController:(LFCRoomInterfaceController *)viewController
- (void)tumble:(ServerViewController *)viewController
           //: sendMessage:(NSDictionary *)message{
           key:(NSDictionary *)message{
    //: [self sendMessage:message];
    [self dedication:message];
}

- (void)setGetWeaving:(BOOL)isPause
{

}


//: - (void)func__requestToExitInViewController:(nonnull LFCRoomInterfaceController*)viewController {
- (void)drafted:(nonnull ServerViewController*)viewController {

}

//: - (void)willChangeCameraPositionInViewController:(LFCRoomInterfaceController *)viewController{
- (void)toolled:(ServerViewController *)viewController{

    //: [self.roomStreamView switchCamera];
    [self.accountViewBbbb familyVideo];
}



//: #pragma mark - socket msg handler
#pragma mark - socket msg handler
//: - (void)handleMsgReceiveWarning:(NSError*)error {
- (void)page:(NSError*)error {

    //: if (error.code == -100) {
    if (error.code == -100) {
        //: [[AppManager sharedAppManager] showLoginActionSheel];
        [[PlayColorBbbb size] buttonBbbb];
    //: }else if (error.code == -300) {
    }else if (error.code == -300) {
        //: [[AppManager sharedAppManager] showGeetestView];
        [[PlayColorBbbb size] orientationBbbb];
    //: }else{
    }else{
        //: [self showStatusBarError:error];
        [self user:error];
    }
}

//: - (void)handleMsgTiUser:(LFCTiUserMsgModel*)model error:(NSError*)error {
- (void)cellRid:(PicModelBbbb*)model request:(NSError*)error {

    //: if (error) {
    if (error) {
        //: return;
        return;
    }

    //: if (model.tiUid== -1) {
    if (model.tiUid== -1) {
        //: return;
        return;
    }

    //: if (model.tiUid==[AppManager sharedAppManager].loginUser.id) {
    if (model.tiUid==[PlayColorBbbb size].file.id) {

        //: [self func__videoOffline];
        [self to];

        //: [self disConnectSocket];
        [self quantity];

        //: NSString *reason = model.msg;
        NSString *reason = model.msg;
        //: if (FZUtils.isEmptyString(reason)) {
        if (FZUtils.isEmptyString(reason)) {
            //: reason =[NSString stringWithFormat:@"%@%@%@",NSLocalizedString(@"你已经被 ",@""),model.operatorNickname,NSLocalizedString(@" 踢出直播间",@"")];
            reason =[NSString stringWithFormat:@"%@%@%@",NSLocalizedString(StringFromLoonData(kFilmContent),@""),model.operatorNickname,NSLocalizedString(StringFromLoonData(kAcidCoordinateText),@"")];
        }

        //: @weakify(self);
        @autoreleasepool {} __weak __typeof__(self) self_weak_ = (self);;
        //: LFCAlertButton *b = [[LFCAlertButton alloc]initWithTitle:@"确定" type:AlertButtonType1 action:^{
        ImageButton *b = [[ImageButton alloc]initWithTimeCurrent:StringFromLoonData(kWhisperTitle) merge:AlertButtonType1 like:^{
            //: @strongify(self);
            @autoreleasepool {}
             __strong __typeof__(self) self = self_weak_;
                            ;
            //: [self func__requestToExitInViewController:self.currentChildViewController];
            [self drafted:self.districtManager];
        //: }];
        }];

        //: LFCAlertView *alertView = [[LFCAlertView alloc]initWithTitle:nil content:reason btnArray:@[b]];
        MutualView *alertView = [[MutualView alloc]initWithPlanSquare:nil phone:reason age:@[b]];
        //: [alertView show];
        [alertView of];

    //: }else{
    }else{
        //: [self addMessage:model];
        [self authorCorner:model];
    }
}


//: #pragma mark  钻石不足进行付费操作的处理
#pragma mark  钻石不足进行付费操作的处理
//: - (void)handleLackCoinOperation {
- (void)anoint {

    //: [Helper showAlert:NSLocalizedString(@"当前余额不足，充值后才能继续送礼，是否去充值？", @"")
    [WritingGrantBbbb antheralBbbb:NSLocalizedString(StringFromLoonData(kDawnText), @"")
                //: title:NSLocalizedString(@"余额不足",@"")
                clickWith:NSLocalizedString(StringFromLoonData(k_steadilyText),@"")
         //: cancelAction:NSLocalizedString(@"取消", @"")
         wrapRemindVideo:NSLocalizedString(StringFromLoonData(k_strokeRichFacultyData), @"")
          //: cancelBlock:^{
          album:^{
          }
             //: okAction:NSLocalizedString(@"充值", @"")
             listBy:NSLocalizedString(StringFromLoonData(kCityEraseTitle), @"")
              //: okBlock:^{
              model:^{

                  //: dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(0.1 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{
                  dispatch_after(dispatch_time((0ull), (int64_t)(0.1 * 1000000000ull)), dispatch_get_main_queue(), ^{
                      //: [[AppManager sharedAppManager] func__pushRechargeViewController];
                      [[PlayColorBbbb size] duringRank];
                  //: });
                  });
              //: }];
              }];
}

//: #pragma mark - GJMessageWebSocketDelegate
#pragma mark - ClickTargetBbbb
//: #pragma mark 通用消息回调方法
#pragma mark 通用消息回调方法
//: - (void)func__messageWebSocket:(LFCMessageWebSocket *)messageWebSocket
- (void)hypothesis:(SightMoment *)messageWebSocket
            //: didReceiveWebSocketMsg:(LFCSockMsgBaseWrap *)msgWrap {
            start:(PicWith *)msgWrap {

    //: NSError *error = msgWrap.relatedError;
    NSError *error = msgWrap.albumBbbb;

    //: switch (msgWrap.typeTag) {
    switch (msgWrap.server) {
        //: case GJSockMessage_onSendMsg:
        case GJSockMessage_onSendMsg:
        //: case GJSockMessage_onUserAttention:
        case GJSockMessage_onUserAttention:
        //: case GJSockMessage_onUserShare:
        case GJSockMessage_onUserShare:
            //: if (error == nil) {
            if (error == nil) {
                //: [self addMessage:(LFCRoomMsgDisplayModel*)msgWrap.relatedObj];
                [self authorCorner:(WithModel*)msgWrap.beautyDay];
            }
            //: break;
            break;


        //: case GJSockMessage_onSendBarrage:
        case GJSockMessage_onSendBarrage:

            //: if (error) {
            if (error) {
                //: [[NSNotificationCenter defaultCenter] postNotificationName:[NotificationDef NeedUpdateUserInfoNoti]
                [[NSNotificationCenter defaultCenter] postNotificationName:[CurrentUp head]
                                                                    //: object:nil
                                                                    object:nil
                                                                  //: userInfo:nil];
                                                                  userInfo:nil];
                //: if (error.code == SocketError_Forbidden) {
                if (error.code == SocketError_Forbidden) {
                    //: [self.currentChildViewController func__didRecieveLeftCoinNotEnough];
                    [self.districtManager gift];
                    //: [self handleLackCoinOperation];
                    [self anoint];

                //: } else if (error.code == SocketError_NonPermission) {
                } else if (error.code == SocketError_NonPermission) {
                }
            }

            //: break;
            break;

        //: case GJSockMessage_onLogin:
        case GJSockMessage_onLogin:
        //: case GJSockMessage_onLogout:
        case GJSockMessage_onLogout:
        {
            //: LFCRoomUserMsgModel *model = (LFCRoomUserMsgModel *)msgWrap.relatedObj;
            SelectModel *model = (SelectModel *)msgWrap.beautyDay;
            //: [self.userMsgFilter func__onUserLogin:model];
            [self.reply receive:model];
            //: [self.currentChildViewController func__onUserLogin:model];   
            [self.districtManager pageCountBbbb:model];
            //进场效果
            //: if (   model.isLogin
            if ( model.isLogin
                //: && model.uid != -1) {
                && model.uid != -1) {
                //: [self addMessage:model];
                [self authorCorner:model];
            }
        }
            //: break;
            break;

        //: case GJSockMessage_onSendGift:
        case GJSockMessage_onSendGift:
        {
            //: if (error) {
            if (error) {

                //: [[NSNotificationCenter defaultCenter] postNotificationName:[NotificationDef NeedUpdateUserInfoNoti]
                [[NSNotificationCenter defaultCenter] postNotificationName:[CurrentUp head]
                                                                    //: object:nil
                                                                    object:nil
                                                                  //: userInfo:nil];
                                                                  userInfo:nil];
                //: if (error.code == SocketError_Forbidden) {
                if (error.code == SocketError_Forbidden) {

                    //: if (self.currentChildViewController.presentedViewController) {
                    if (self.districtManager.presentedViewController) {

                        //: [self.currentChildViewController.presentedViewController dismissViewControllerAnimated:YES completion:^{
                        [self.districtManager.presentedViewController dismissViewControllerAnimated:YES completion:^{
                            //: [self handleLackCoinOperation];
                            [self anoint];
                        //: }];
                        }];
                    //: } else {
                    } else {
                        //: [self handleLackCoinOperation];
                        [self anoint];
                    }
                }
            //: } else {
            } else {
                //: LFCRoomGiftMsgModel *model = (LFCRoomGiftMsgModel *)msgWrap.relatedObj;
                InfoModelBbbb *model = (InfoModelBbbb *)msgWrap.beautyDay;
                //: self.roomInfoModel.moderator.earnCoin += model.cost;
                self.female.moderator.earnCoin += model.cost;
                //: [self addMessage:model];
                [self authorCorner:model];
            }
            //: [self.currentChildViewController func__didReceiveGiftMsgModel:msgWrap.relatedObj
            [self.districtManager aboveName:msgWrap.beautyDay
                                                                        //: error:nil];
                                                                        m:nil];
        }

            //: break;
            break;

        //: case GJSockMessage_onBan:
        case GJSockMessage_onBan:
        //: case GJSockMessage_onUnBan:
        case GJSockMessage_onUnBan:
            //: [self addMessage:(LFCRoomMsgDisplayModel*)msgWrap.relatedObj];
            [self authorCorner:(WithModel*)msgWrap.beautyDay];
            //: break;
            break;

        //: case GJSockMessage_onSetAdmin: 
        case GJSockMessage_onSetAdmin: //被提升为管理员
        {
            //: if (error) {
            if (error) {
                //: return;
                return;
            }

            //: LFCRoomSetAdminMsgModel *model = (LFCRoomSetAdminMsgModel *)msgWrap.relatedObj;
            ParadigmModel *model = (ParadigmModel *)msgWrap.beautyDay;
            //: if (model.setAdminUid == [AppManager sharedAppManager].loginUser.id) { 
            if (model.setAdminUid == [PlayColorBbbb size].file.id) { // 消息的目标用户

                //: LRoomUserType oldType = self.roomInfoModel.userType;
                LRoomUserType oldType = self.female.userType;
                //: if (oldType==LRoomUserTypeRoomOwn || oldType==LRoomUserTypeModerator) {
                if (oldType==LRoomUserTypeRoomOwn || oldType==LRoomUserTypeModerator) {
                    //: return;
                    return;
                }

                // 官方账号类型 提升为 官方管理员
                // 其他账号类型 提升为 普通管理员
                //: self.roomInfoModel.userType = (   oldType==LRoomUserTypeOfficialUser
                self.female.userType = ( oldType==LRoomUserTypeOfficialUser
                                               //: || oldType==LRoomUserTypeOfficialAdmin
                                               || oldType==LRoomUserTypeOfficialAdmin
                                               //: ? LRoomUserTypeOfficialAdmin
                                               ? LRoomUserTypeOfficialAdmin
                                               //: : LRoomUserTypeAdmin);
                                               : LRoomUserTypeAdmin);
            }

            //: [self.roomInfoModel addAdminUid:model.setAdminUid];
            [self.female by:model.setAdminUid];
            //: [self addMessage:model];
            [self authorCorner:model];
        }
            //: break;
            break;

        //: case GJSockMessage_onUnsetAdmin:
        case GJSockMessage_onUnsetAdmin:
        {
            //: if (error) {
            if (error) {
                //: return;
                return;
            }
            //: LFCRoomUnsetAdminMsgModel *model = (LFCRoomUnsetAdminMsgModel *)msgWrap.relatedObj;
            WriteModel *model = (WriteModel *)msgWrap.beautyDay;
            //: if (model.unsetAdminUid == [AppManager sharedAppManager].loginUser.id) {
            if (model.unsetAdminUid == [PlayColorBbbb size].file.id) {

                //: LRoomUserType oldType = self.roomInfoModel.userType;
                LRoomUserType oldType = self.female.userType;
                //: if (oldType==LRoomUserTypeRoomOwn || oldType==LRoomUserTypeModerator) {
                if (oldType==LRoomUserTypeRoomOwn || oldType==LRoomUserTypeModerator) {
                    //: return;
                    return;
                }

                // 官方账号类型 降级为 官方用户
                // 其他账号类型 降级为 普通用户
                //: self.roomInfoModel.userType = (   oldType==LRoomUserTypeOfficialUser
                self.female.userType = ( oldType==LRoomUserTypeOfficialUser
                                               //: || oldType==LRoomUserTypeOfficialAdmin
                                               || oldType==LRoomUserTypeOfficialAdmin
                                               //: ? LRoomUserTypeOfficialUser
                                               ? LRoomUserTypeOfficialUser
                                               //: : LRoomUserTypeCommonUser);                
                                               : LRoomUserTypeCommonUser);
            }

            //: [self.roomInfoModel removeAdminUid:model.unsetAdminUid];
            [self.female dismiss:model.unsetAdminUid];
            //: [self addMessage:model];
            [self authorCorner:model];
        }
            //: break;
            break;

        //: case GJSockMessage_onTi:
        case GJSockMessage_onTi:
            //: [self handleMsgTiUser:msgWrap.relatedObj
            [self cellRid:msgWrap.beautyDay
                            //: error:msgWrap.relatedError];
                            request:msgWrap.albumBbbb];
            //: break;
            break;

         //: case GJSockMessage_onTiModerator: 
         case GJSockMessage_onTiModerator: //
        {
            // 普通直播间，主播被踢，下麦处理
            //: [self func__videoOffline];
            [self to];
            //: [self disConnectSocket];
            [self quantity];
        }
            //: break;
            break;

        //: case GJSockMessage_onVideoPublish:
        case GJSockMessage_onVideoPublish:
        {
            //: NSString *text = [NSString stringWithFormat:@"<font color=\"%@\">直播开始</font>",@"#73F7CD"];
            NSString *text = [NSString stringWithFormat:StringFromLoonData(k_peakEnableSoftlyText),StringFromLoonData(kChronicName)];
            //: LFCRoomSystemMsgModel *model = [LFCRoomSystemMsgModel modelWithDic:@{@"msg":text}];
            AtDisplayModel *model = [AtDisplayModel notice:@{StringFromLoonData(k_creationValue):text}];
            //: [self addMessage:model];
            [self authorCorner:model];

            //: [self.currentChildViewController func__didVideoPublish:YES];
            [self.districtManager task:YES];
        }
            //: break;
            break;

        //: case GJSockMessage_onVideoUnpublish:
        case GJSockMessage_onVideoUnpublish:
        {
            //: NSString *text = [NSString stringWithFormat:@"<font color=\"%@\">直播结束</font>",@"#73F7CD"];
            NSString *text = [NSString stringWithFormat:StringFromLoonData(k_peakNeverthelessValue),StringFromLoonData(kChronicName)];
            //: LFCRoomSystemMsgModel *model = [LFCRoomSystemMsgModel modelWithDic:@{@"msg":text}];
            AtDisplayModel *model = [AtDisplayModel notice:@{StringFromLoonData(k_creationValue):text}];
            //: [self addMessage:model];
            [self authorCorner:model];
            //: [self.currentChildViewController func__didVideoPublish:NO];
            [self.districtManager task:NO];
        }
            //: break;
            break;




        //: case GJSockMessage_onSystemMsg:
        case GJSockMessage_onSystemMsg:
        {
            //: LFCRoomSystemMsgModel *model = (LFCRoomSystemMsgModel *)msgWrap.relatedObj;
            AtDisplayModel *model = (AtDisplayModel *)msgWrap.beautyDay;

            //: if (model.type == GJRoomSystemMsgTypeScreen) {
            if (model.type == GJRoomSystemMsgTypeScreen) {
                //: [self addMessage:model];
                [self authorCorner:model];
            }

            //: if (model.type == GJRoomSystemMsgTypeAlert) {
            if (model.type == GJRoomSystemMsgTypeAlert) {
                //: [LFCRoomMsgDisplayModel buildAttrbutedArrayFromModel:model];
                [WithModel rentalIncome:model];
                //: [Helper showAlert:model.pure_msg block:nil];
                [WritingGrantBbbb whoDoing:model.pure_msg halfName:nil];
            }
        }
            //: break;
            break;






        //: case GJSockMessage_onSysMessage:
        case GJSockMessage_onSysMessage:
        {
            //: LFCOnSysMessageMsgModel * model = (LFCOnSysMessageMsgModel *)msgWrap.relatedObj;
            PlayModelBbbb * model = (PlayModelBbbb *)msgWrap.beautyDay;
            //: NSInteger jumpType = model.jumpType;
            NSInteger jumpType = model.jumpType;
            //: if (jumpType == 0) {
            if (jumpType == 0) {
                //: [self addMessage:[LFCRoomSystemMsgModel modelWithDic:@{@"msg":model.msg}]];
                [self authorCorner:[AtDisplayModel notice:@{StringFromLoonData(k_creationValue):model.msg}]];
            //: }else{
            }else{
                //: [self addMessage:[LFCRoomSystemMsgModel modelWithDic:@{@"msg"     : model.msg,
                [self authorCorner:[AtDisplayModel notice:@{StringFromLoonData(k_creationValue) : model.msg,
                                                                      //: @"jumpType": @(model.jumpType),
                                                                      StringFromLoonData(kCuriosityGalleryValue): @(model.jumpType),
                                                                      //: @"jumpUrl" : model.jumpUrl}]];
                                                                      StringFromLoonData(kDefineRecordData) : model.jumpUrl}]];
            }
        }
            //: break;
            break;



        //: case GJSockMessage_Error:
        case GJSockMessage_Error:
        {
            //: NSString *msg = msgWrap.dataObj[@"msg"];
            NSString *msg = msgWrap.indexPackage[StringFromLoonData(k_creationValue)];
            //: if (msg.length > 0) {
            if (msg.length > 0) {
                //: [self showStatusBarErrorStr:msg];
                [self push:msg];
            }
            //: [self didReceiveError:error];
            [self nameLine:error];
        }
            //: break;
            break;

        //: case GJSockMessage_Warning:
        case GJSockMessage_Warning:
            //: if (   (   [msgWrap.cmdStr isEqualToString:@"onSendGift"]
            if ( ( [msgWrap.selected isEqualToString:StringFromLoonData(kBooValue)]
                    //: || [msgWrap.cmdStr isEqualToString:@"onSendBarrage"]
                    || [msgWrap.selected isEqualToString:StringFromLoonData(kAbroadTitle)]
                    //: || [msgWrap.cmdStr isEqualToString:@"onBroadCast"] )
                    || [msgWrap.selected isEqualToString:StringFromLoonData(kStatContent)] )
                //: && msgWrap.errorCode == ServerCode_LackMoney) {
                && msgWrap.cell == ServerCode_LackMoney) {

                //: if ([AppManager sharedAppManager].skinStyle == skinStyle_Normal) {
                if ([PlayColorBbbb size].itemImage == skinStyle_Normal) {
                    //: [[AppManager sharedAppManager] func__showHalfChargeViewWithTitle:[Package halfTipStr:YES]];
                    [[PlayColorBbbb size] natalDayName:[ExamineColorBbbb package:YES]];
                //: }else{
                }else{
                    //: [self showNoMoneyWithCmd:msgWrap.cmdStr];
                    [self by:msgWrap.selected];
                }

                //: [self.currentChildViewController keyboardDismiss];
                [self.districtManager age];
                //: return;
                return;
            }
            //: [self handleMsgReceiveWarning:error];
            [self page:error];
            //: break;
            break;

        //: default:
        default:
            //: break;
            break;
    }

}

//: #pragma mark - StreamRenderProtocol
#pragma mark - FrameRecMax
//: #pragma mark 5.0.6
#pragma mark 5.0.6
//: - (void)renderView:(UIView *)renderView onTestSpeed:(NSString *)speedInfo {
- (void)start:(UIView *)renderView key:(NSString *)speedInfo {

    //: [self addMessage:[LFCRoomSocket func__systemMsgWith:speedInfo]];
    [self authorCorner:[SocketIdentityTrail modelBbbb:speedInfo]];
}


//: @end
@end


Byte * LoonDataToCache(Byte *data) {
    int taTot = data[0];
    int buyerBucket = data[1];
    Byte viewLip = data[2];
    int exactness = data[3];
    if (!taTot) return data + exactness;
    for (int i = exactness; i < exactness + buyerBucket; i++) {
        int value = data[i] - viewLip;
        if (value < 0) {
            value += 256;
        }
        data[i] = value;
    }
    data[0] = 0;
    data[exactness + buyerBucket] = 0;
    return data + exactness;
}

NSString *StringFromLoonData(Byte *data) {
    return [NSString stringWithUTF8String:(char *)LoonDataToCache(data)];
}
