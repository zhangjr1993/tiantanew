
#import <Foundation/Foundation.h>
typedef struct {
    Byte raftRate;
    Byte *restHighway;
    unsigned int cephalometry;
    bool valueOnd;
	int bill;
	int effortBacteria;
	int characterSetPeat;
} CollectionUserData;

NSString *StringFromLaceSettingData(CollectionUserData *data);



CollectionUserData k_valueIndexCooperativeTitle = (CollectionUserData){174, (Byte []){199, 193, 205, 192, 203, 218, 198, 228, 153, 156, 241, 192, 203, 222, 193, 241, 201, 219, 207, 220, 202, 144}, 21, false, 246, 177, 226};



CollectionUserData k_cosContent = (CollectionUserData){95, (Byte []){186, 218, 218, 186, 223, 227, 175}, 6, false, 11, 89, 184};



CollectionUserData kExplorationText = (CollectionUserData){105, (Byte []){143, 225, 248, 142, 225, 216, 141, 212, 201, 141}, 9, false, 128, 194, 238};



CollectionUserData k_teeText = (CollectionUserData){160, (Byte []){71, 4, 28, 71, 41, 9, 70, 53, 16, 73, 39, 47, 68, 24, 45, 72, 35, 29, 69, 16, 49, 68, 26, 46, 145, 238}, 25, false, 248, 195, 85};



CollectionUserData k_maximDepartureTitle = (CollectionUserData){108, (Byte []){42, 54, 33, 9, 2, 25, 63, 9, 0, 9, 15, 24, 43, 5, 10, 24, 34, 25, 1, 14, 9, 30, 58, 5, 9, 27, 131}, 26, false, 187, 75, 249};



CollectionUserData k_modelFlagTestifyData = (CollectionUserData){71, (Byte []){162, 202, 198, 162, 194, 239, 162, 202, 198, 160, 249, 201, 34}, 12, false, 61, 45, 101};



CollectionUserData k_hamValue = (CollectionUserData){181, (Byte []){93, 54, 57, 80, 57, 48, 95}, 6, false, 133, 93, 187};



CollectionUserData k_boomGalleryText = (CollectionUserData){203, (Byte []){47, 115, 75, 46, 67, 76, 34, 106, 113, 46, 67, 98, 9}, 12, false, 182, 105, 213};



CollectionUserData k_agentGeniusValue = (CollectionUserData){149, (Byte []){125, 18, 63, 112, 59, 15, 113, 44, 28, 143}, 9, false, 144, 179, 71};



CollectionUserData k_niteText = (CollectionUserData){74, (Byte []){162, 255, 234, 163, 202, 203, 163}, 6, false, 221, 176, 238};



CollectionUserData kStateGearUnemploymentName = (CollectionUserData){31, (Byte []){120, 118, 121, 107, 118, 123, 82}, 6, false, 212, 26, 53};



CollectionUserData kAccordData = (CollectionUserData){81, (Byte []){181, 233, 209, 182, 197, 206, 181, 233, 209, 181, 233, 199, 234}, 12, false, 102, 156, 6};



CollectionUserData k_insertNiteValue = (CollectionUserData){158, (Byte []){240, 235, 243, 252, 251, 236, 221}, 6, false, 1, 71, 77};



CollectionUserData kCommonlyValue = (CollectionUserData){56, (Byte []){208, 158, 185, 222, 178, 137, 222, 178, 137, 25}, 9, false, 117, 15, 26};



CollectionUserData kMountGrantValue = (CollectionUserData){3, (Byte []){106, 96, 108, 109, 77, 66, 107, 91, 53, 72, 92, 97, 98, 96, 104, 96}, 15, false, 239, 144, 149};



CollectionUserData k_highwayVehicleText = (CollectionUserData){104, (Byte []){41, 41, 41, 41, 55, 15, 1, 14, 28, 59, 11, 26, 7, 4, 4, 62, 1, 13, 31, 55, 42, 42, 42, 42, 125}, 24, false, 175, 242, 58};



CollectionUserData k_niteTitle = (CollectionUserData){200, (Byte []){46, 122, 105, 46, 84, 65, 33, 72, 65, 44, 112, 101, 47, 108, 116, 47, 65, 97, 43}, 18, false, 144, 215, 73};



CollectionUserData k_miteSlavName = (CollectionUserData){229, (Byte []){135, 145, 139, 132, 174, 161, 214, 181, 140, 186, 145, 131, 140, 130, 186, 136, 138, 151, 128, 113}, 19, false, 189, 132, 198};



CollectionUserData kSlopePreventionTitle = (CollectionUserData){242, (Byte []){21, 113, 95, 27, 101, 90, 227}, 6, false, 47, 116, 229};



CollectionUserData kOnlyData = (CollectionUserData){217, (Byte []){190, 176, 191, 173, 148, 182, 189, 188, 181, 27}, 9, false, 166, 215, 152};



CollectionUserData k_leapGrayText = (CollectionUserData){20, (Byte []){242, 151, 167, 240, 169, 180, 224}, 6, false, 252, 12, 35};



CollectionUserData kMuseumDisappointedValue = (CollectionUserData){82, (Byte []){182, 234, 210, 183, 237, 209, 182, 234, 210, 180, 214, 221, 175}, 12, false, 207, 214, 123};



CollectionUserData k_mentionText = (CollectionUserData){75, (Byte []){104, 45, 45, 115, 121, 121, 120, 215}, 7, false, 78, 122, 4};












#import "RankView.h"

#import "SearchView.h"

#import "ReceiveView.h"

#import "AppModel.h"

#import "PlayColorBbbb+LiquidEcstasy.h"

#import "BbbbAt.h"

#import "FZCoreTextEngine.h"


#import "MBProgressHUD.h"

#import "PicReplacement.h"

#import "ShowReusableView.h"

#import "ModelNameView.h"

#import <JXCategoryView/JXCategoryView.h>

#import "RoomMsgModel.h"




typedef NS_ENUM(NSUInteger, LiveRoomGiftChannel) {
    
    LiveRoomGiftChannelHot,
    
    LiveRoomGiftChannelPackage,
    
    LiveRoomGiftChannelFans

};



@interface TaskFlowLayout : UICollectionViewFlowLayout


@property(nonatomic,strong,readwrite) NSArray* taskArr;

@property(nonatomic,strong,readwrite) NSMutableArray<UICollectionViewLayoutAttributes*>* stopArray;

@property(nonatomic,assign,readwrite) CGSize show ;

@end


@implementation TaskFlowLayout


- (void)prepareLayout{
    
    [super prepareLayout];
    
    [self.stopArray removeAllObjects];
    
    
    for (int i = 0; i < self.taskArr.count; ++i) {
        
        UICollectionViewLayoutAttributes* itemAttr = [self layoutAttributesForItemAtIndexPath:[NSIndexPath indexPathForItem:i inSection:0]];
        
        [self.stopArray addObject:itemAttr];
    }
    
    
    NSInteger page = self.taskArr.count / (2 * 4);
    
    page = (self.taskArr.count % (4 * 2) == 0) ? page : (page + 1);
    
    page = MAX(page, 1);
    
    self.show = CGSizeMake(screenWidth() * page, 2 * 100);
}


- (UICollectionViewLayoutAttributes *)layoutAttributesForItemAtIndexPath:(NSIndexPath *)indexPath{
    
    NSInteger page = indexPath.item / (4 * 2);
    
    NSInteger pageIndex = indexPath.item % (2 * 4);
    
    NSInteger pageRow = pageIndex / 4;
    
    NSInteger pageCol = pageIndex % 4;
    
    CGFloat itemWidth = screenWidth() / 4;
    
    CGFloat x = page * screenWidth() + pageCol * itemWidth;
    
    CGFloat y = pageRow * 100;
    
    UICollectionViewLayoutAttributes* layoutAttr = [UICollectionViewLayoutAttributes layoutAttributesForCellWithIndexPath:indexPath];
    
    layoutAttr.frame = CGRectMake(x, y, itemWidth, 100);
    
    return layoutAttr;
}


- (CGSize)collectionViewContentSize{
    
    return self.show;
}


- (NSArray<UICollectionViewLayoutAttributes *> *)layoutAttributesForElementsInRect:(CGRect)rect{
    
    return self.stopArray.copy;
}


- (NSMutableArray<UICollectionViewLayoutAttributes *> *)stopArray{
    
    if (!_stopArray) {
        
        _stopArray = [NSMutableArray array];
    }
    
    return _stopArray;
}


@end


@interface RankView ()

<ShowList,

ReachingShowReplacementLabel,

CurrentDisplay,

UICollectionViewDelegate,

UICollectionViewDataSource,JXCategoryViewDelegate>


#pragma mark - 头部

@property (nonatomic,strong) UIView *hide;

@property (nonatomic,strong) ModelNameView *gallery;

@property (nonatomic,strong) UILabel *userOld;

@property (nonatomic,strong) UIImageView *dot;

@property (nonatomic,strong) UIButton *black;


#pragma mark - 礼物列表视图


@property (nonatomic,strong) UICollectionView *style;



@property (nonatomic,strong) UIPageControl *album;



@property (nonatomic,strong) UIView *existingBbbb;


@property (nonatomic,strong) YYLabel *instance;


#pragma mark - 底部

@property (nonatomic,strong) UIView *add;

@property (nonatomic,strong) UIView *areaList;


@property (nonatomic,strong) AtControl *cardBbbb;


@property (nonatomic,strong) AtControl *arcanum;


#pragma mark - 礼物数量输入视图


@property (nonatomic,strong) UIView *tip;


@property (nonatomic,strong) UILabel *info;


@property (nonatomic,strong) UILabel *agendaItemBbbb;


@property (nonatomic,strong) SearchView *action;



@property(nonatomic,assign,readwrite) LiveRoomGiftChannel number ;

@property(nonatomic,strong,readwrite) NSArray* unitedNationsAgency;


@property(nonatomic,assign,readwrite) NSInteger with ;

@property(nonatomic,strong,readwrite) NSMutableDictionary* hullInfo;

@end


@implementation RankView


- (instancetype)init{
    
    if (self = [super init]) {
        
        self.with = 1;
        
        [self page];
        
        [self corner];
    }
    
    return self;
}

//: - (void)dealloc{
- (void)dealloc{
    //: NSLog(@"LFCRoomGiftSelectView dealloc");
    
    [[NSNotificationCenter defaultCenter] removeObserver:self];
}


- (void)page{
    
    
    
    
    [self.hide mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.left.and.right.and.top.equalTo(self);
        
        make.height.mas_equalTo(36);
    
    }];
    
    
    [self.gallery mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.left.and.top.equalTo(self.hide);
        
        make.right.equalTo(self.black.mas_left).offset(-5);
        
        make.height.mas_equalTo(36);
    
    }];
    
    
    [self.black mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.top.and.right.and.bottom.equalTo(self.hide);
        
        make.left.equalTo(self.userOld.mas_left);
    
    }];
    
    
    [self.dot mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.centerY.equalTo(self.hide.mas_centerY);
        
        make.trailing.equalTo(self.hide.mas_trailing).mas_offset(-7);
    
    }];
    
    
    [self.userOld mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.centerY.equalTo(self.hide);
        
        make.right.equalTo(self.dot.mas_left).offset(-7);
        
        make.width.mas_greaterThanOrEqualTo(90);
    
    }];
    
    
    
    [self.add mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.bottom.offset(-safeAreaBottomHeight());
        
        make.height.mas_equalTo(44);
        
        (void)make.left.right;
    
    }];
    
    
    [self.areaList mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.right.equalTo(self.add).offset(-10);
        
        make.centerY.equalTo(self.add);
        
        make.height.mas_equalTo(29);
        
        make.width.mas_equalTo(120);
    
    }];
    
    
    [self.arcanum mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.top.and.right.and.bottom.equalTo(self.areaList);
        
        make.width.equalTo(self.areaList).multipliedBy(1.0/2);
    
    }];
    
    
    [self.cardBbbb mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.top.and.left.and.bottom.equalTo(self.areaList);
        
        make.width.equalTo(self.areaList).multipliedBy(1.0/2);
    
    }];
    
    
    
    [self.style mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.edges.equalTo(self).insets(UIEdgeInsetsMake(36, 0, 44+safeAreaBottomHeight(), 0));
    
    }];
    
    
    CGFloat offsetY = 0;
    
    [self.album mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.centerX.equalTo(self);
        
        make.height.mas_offset(8);
        
        make.bottom.mas_equalTo(self.add.mas_top).mas_offset(offsetY);
    
    }];
    
    
    self.number = -1;
    
    [self categoryView:self.gallery didSelectedItemAtIndex:self.gallery.defaultSelectedIndex];
}


- (void)corner{
    
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(sizeWithGift)
                                                 
                                                 name:[CurrentUp data]
                                               
                                               object:nil];
    
   
    
    
    
    @weakify(self);
    
    [RACObserve([PlayColorBbbb size], file) subscribeNext:^(MeanSunWriteModel* x) {
        
        @strongify(self);
        
        [self third:x];
    
    }];
}

#pragma mark - 数据源

- (void)setTheoryGroup:(AppModel *)roomInfoModel{
    
    
    if (_theoryGroup != nil && _theoryGroup == roomInfoModel) {
        
        return;
    }
    
    
    _theoryGroup = roomInfoModel;
    
    
    if (roomInfoModel) {
        
        
        [self modifyThroughHeadVid:(LiveRoomGiftChannelHot) receive:roomInfoModel.gifts];
    }
}


+ (CGFloat)name {
    
    
    return 96 + (100 * 2) + safeAreaBottomHeight();
}


- (void)modifyThroughHeadVid:(LiveRoomGiftChannel)channel receive:(NSArray*)sourceArr{
    
    id previousChannelSelectItem = [self.hullInfo objectForKey:@(channel)];
    
    __block NSInteger index = -1;
    
    if (previousChannelSelectItem) {
        
        if ([previousChannelSelectItem isKindOfClass:[HeadModel class]] ) {
            
            HeadModel* currentSelGiftModel = (HeadModel*)previousChannelSelectItem;
            
            [sourceArr enumerateObjectsUsingBlock:^(HeadModel* obj, NSUInteger idx, BOOL * _Nonnull stop) {
                
                if (obj.gid == currentSelGiftModel.gid) {
                    
                    obj.select = YES;
                    
                    obj.giftNum = currentSelGiftModel.giftNum;
                    
                    index = idx;
                    
                    *stop = YES;
                }
            
            }];
        
        }else if([previousChannelSelectItem isKindOfClass:[IdentityMaxModel class]] ){
            
            IdentityMaxModel* currentSelPkgModel = (IdentityMaxModel*)previousChannelSelectItem;
            
            [sourceArr enumerateObjectsUsingBlock:^(IdentityMaxModel* obj, NSUInteger idx, BOOL * _Nonnull stop) {
                
                if (obj.pkgItemsetId == currentSelPkgModel.pkgItemsetId) {
                    
                    obj.select = YES;
                    
                    obj.giftNum = currentSelPkgModel.giftNum;
                    
                    index = idx;
                    
                    *stop = YES;
                }
            
            }];
        }
    }
    
    
    if (previousChannelSelectItem) {
        
        [self.hullInfo removeObjectForKey:@(channel)];
    }
    
    NSInteger page = -1;
    
    if (index >= 0) {
        
        [self.hullInfo setObject:sourceArr[index] forKey:@(channel)];
        
        page = index / (4 * 2);
    }
    
    
    id currentRecordItem = [self.hullInfo objectForKey:@(channel)];
    
    if (!currentRecordItem && sourceArr.count && channel != LiveRoomGiftChannelPackage) {
        
        self.with = 1;
        
        [self.cardBbbb setTitle:[NSString stringWithFormat:@"%zd", self.with]
                            
                            forState:UIControlStateNormal];
        
        
        id itemModel = nil;
        
        HeadModel* giftModel = sourceArr.firstObject;
        
        giftModel.select = YES;
        
        giftModel.giftNum = self.with;
        
        itemModel = giftModel;
        
        
        if (itemModel) {
            
            [self.hullInfo setObject:itemModel forKey:@(channel)];
        }
    }
    
    
    UICollectionView* collectionView = [self jurisprudenceVideoTask:channel];
    
    TaskFlowLayout* layout = (TaskFlowLayout*)collectionView.collectionViewLayout;
    
    layout.taskArr = sourceArr;
    
    [collectionView reloadData];
    
    if (page >= 0) {
        
        [collectionView setContentOffset:CGPointMake(screenWidth() * page, 0)];
    }
    
    if (channel == self.number) {
        
        self.unitedNationsAgency = sourceArr;
        
        [self fingertip:collectionView];
    }
}


#pragma mark - 通知

- (void)sizeWithGift{
    
    [self third:[PlayColorBbbb size].file];
}


- (void)third:(MeanSunWriteModel*)x{
    
    
    NSString *moneyStr   = x.mfCoin;
    
    NSString *text       = [NSString stringWithFormat:@"%@：%@",NSLocalizedString(StringFromLaceSettingData(&k_cosContent),@""),moneyStr];
    
    self.userOld.text = text;
}


#pragma mark - helper

- (LiveRoomGiftChannel)attention:(NSString*)title{
    
    LiveRoomGiftChannel channel = LiveRoomGiftChannelHot;
    
    if ([title isEqualToString:StringFromLaceSettingData(&k_hamValue)]){
        
        channel = LiveRoomGiftChannelPackage;
    }
    
    return channel;
}


- (void)sex{
    
    UICollectionView* collectionView = nil;
    
    switch (self.number) {
        
        case LiveRoomGiftChannelHot:
            
            collectionView = self.style;
            
            break;
                    
        
        default:
            
            break;
    }
    
    [collectionView reloadData];
}


- (UICollectionView*)jurisprudenceVideoTask:(LiveRoomGiftChannel)channel{
    
    UICollectionView* collectionView = nil;
    
    switch (channel) {
        
        case LiveRoomGiftChannelHot:
            
            collectionView = self.style;
            
            break;
        
        default:
            
            break;
    }
    
    return collectionView;
}


- (NSArray*)channelProvinceQuery:(LiveRoomGiftChannel)channel{
    
    NSArray* dataSource = nil;
    
    switch (channel) {
        
        case LiveRoomGiftChannelHot:
            
            dataSource = self.theoryGroup.gifts;
            
            break;
        
        default:break;
    }
    
    return dataSource;
}


- (NSInteger)send:(NSInteger)index{
    
    
    if (   self.theoryGroup.giftSendItem.count > 0
        
        && index < self.theoryGroup.giftSendItem.count) {
        
        OnModel *giftNumArrModel = self.theoryGroup.giftSendItem[index];
        
        return giftNumArrModel.num;
        
    
    }else{
        
        
        switch (index) {
            
            case 0: return 1; break;
            
            case 1: return 10; break;
            
            case 2: return 30; break;
            
            case 3: return 66; break;
            
            case 4: return 188; break;
            
            case 5: return 520; break;
            
            case 6: return 1314; break;
            
            default: return 0;break;
        }
    }
}

- (NSString*)treat:(NSInteger)index{
    
    if (self.theoryGroup.giftSendItem.count > 0) {
        
        
        OnModel *giftNumArrModel = self.theoryGroup.giftSendItem[index];
        
        return giftNumArrModel.tag;
    
    }else{
        
        switch (index) {
            
            case 0:return NSLocalizedString(StringFromLaceSettingData(&kMuseumDisappointedValue), @"");
            
            case 1:return NSLocalizedString(StringFromLaceSettingData(&k_modelFlagTestifyData), @"");
            
            case 2:return NSLocalizedString(StringFromLaceSettingData(&k_leapGrayText), @"");
            
            case 3:return NSLocalizedString(StringFromLaceSettingData(&k_boomGalleryText), @"");
            
            case 4:return NSLocalizedString(StringFromLaceSettingData(&kCommonlyValue), @"");
            
            case 5:return NSLocalizedString(StringFromLaceSettingData(&kExplorationText), @"");
            
            case 6:return NSLocalizedString(StringFromLaceSettingData(&kAccordData), @"");
            
            default:return @"";
        }
    }
}


- (void)view:(BOOL)isSet dataShow:(NSString*)title image:(UIColor*)color{
    
    if (isSet) {
        
        [self.gallery search:title];
    
    }else{
        
        [self.gallery unitedNationsAgency:title];
    }
}


- (void)change{
   
    
    id selectItem = [self.hullInfo objectForKey:@(self.number)];
    
    NSInteger index = -1;
    
    if ([selectItem isKindOfClass:[HeadModel class]]) {
        
        HeadModel* giftModel = (HeadModel*)selectItem;
        
        giftModel.giftNum = self.with;
    
    }else{
        
        IdentityMaxModel* pkgModel = (IdentityMaxModel*)selectItem;
        
        pkgModel.giftNum = self.with;
    }
    
    
    if (selectItem) {
        
        NSArray* sourceArr = [self channelProvinceQuery:self.number];
        
        index = [sourceArr indexOfObject:selectItem];
    }
    
    if (index >= 0) {
        
        UICollectionView* collectionView = [self jurisprudenceVideoTask:self.number];
        
        NSIndexPath* indexPath = [NSIndexPath indexPathForItem:index inSection:0];
        
        UICollectionViewCell* cell = [collectionView cellForItemAtIndexPath:indexPath];
        
        if (self.number == LiveRoomGiftChannelPackage) {

        
        }else{
            
            ShowReusableView* giftCell = (ShowReusableView*)cell;
            
            giftCell.level = selectItem;
        }

    }
}


- (void)fingertip:(UICollectionView*)collectionView{
    
    NSInteger page = self.unitedNationsAgency.count / (2 * 4);
    
    page = (self.unitedNationsAgency.count % (4 * 2) == 0) ? page : (page + 1);
    
    page = MAX(page, 1);
    
    self.album.numberOfPages = page;
    
    CGFloat index = collectionView.contentOffset.x / screenWidth();
    
    self.album.currentPage = (NSInteger)index;
}


- (void)save{
    
    
    id selectItem = [self.hullInfo objectForKey:@(self.number)];
    
    if (self.unitedNationsAgency.count && !selectItem) {
        
        id firstItem = self.unitedNationsAgency.firstObject;
        
        [self content:firstItem];
    }
}


#pragma mark - tab change

- (void)categoryView:(JXCategoryBaseView *)categoryView didSelectedItemAtIndex:(NSInteger)index{
    
    NSString* title = self.gallery.titles[self.gallery.selectedIndex];
    
    LiveRoomGiftChannel channel = [self attention:title];
    
    
    [self view:NO dataShow:title image:nil];
    
    
    
    if (channel == self.number) {
        
        
        return;
    }
    
    self.number = channel;
    
    
    if (!self.existingBbbb.hidden) {
        
        [self fill];
    }
    
    
    
    self.with = 1;
    
    [self.cardBbbb setTitle:[NSString stringWithFormat:@"%zd", self.with]
                        
                        forState:UIControlStateNormal];
    
    [self change];
    
    
    UICollectionView* collectionView;
    
    switch (channel) {
        
        case LiveRoomGiftChannelHot:
            
            self.unitedNationsAgency = self.theoryGroup.gifts;
            
            collectionView = self.style;
            
            break;
        
        default:  break;
    }
    
    self.style.hidden    = channel != LiveRoomGiftChannelHot;
    
    [self fingertip:collectionView];
    
    [self save];
}


#pragma mark - actions

- (void)doingAngel{
    
    if (NO == self.stat) {
        
        [self loadGiftHorse];
    }
    
    self.arcanum.enabled = NO;
    
    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(0.25 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{
        
        self.arcanum.enabled = YES;
    
    });
}


#pragma mark - send gift

- (void)loadGiftHorse{
    
    if (!self.with) {
        
        [self push:StringFromLaceSettingData(&k_teeText)];
        
        return;
    }
    
    
    HeadModel* giftModel = [self.hullInfo objectForKey:@(self.number)];
    
    if (giftModel == nil) {
        
        [self push:StringFromLaceSettingData(&k_niteTitle)];
        
        return;
    }
    
    if (self.donation) {
        
        self.donation(@{StringFromLaceSettingData(&kStateGearUnemploymentName):[NSNumber numberWithInteger:giftModel.gid],
                             
                             StringFromLaceSettingData(&k_insertNiteValue):[NSNumber numberWithInteger:self.with ],
                             
                             StringFromLaceSettingData(&kOnlyData):giftModel});
    }
}



#pragma mark - gift count select


- (void)bbbb{
    
    
    NSInteger rows;
    
    if (self.theoryGroup.giftSendItem.count > 0) {
        
        rows = self.theoryGroup.giftSendItem.count + 1;
    
    }else{
        
        rows = 8;
    }
    
    
    [[BbbbAt benchItem] setEvent:self];
    
    [[BbbbAt benchItem] setAgeIdentify:StringFromLaceSettingData(&k_maximDepartureTitle)];
    
    [[BbbbAt benchItem] setFeedback:RGBA(255, 255, 255, 1)];
    
    [[BbbbAt benchItem] setOutline:RGBA(255, 255, 255, 1)];
    
    [[BbbbAt benchItem] setRid:RGBA(230, 230, 230, 1)];
    
    [[BbbbAt benchItem] setFamilyUser:YES];
    
    [[BbbbAt benchItem] admin:self.viewController.view
                               
                               demonstrateImageRows:CGRectMake(self.viewController.view.width-90, self.viewController.view.height-44, 10, 10)
                                   
                                   isRequest:rows];
}


- (void)beauty:(NSInteger)index{
    
    
    NSInteger numberOfGift = [self send:index];
    
    if (numberOfGift>0) {
        
        self.with = numberOfGift;
        
        [self.cardBbbb setTitle:[NSString stringWithFormat:@"%zd", self.with]
                            
                            forState:UIControlStateNormal];
        
        [self view];
    
    }else{
        
        NSString* name = nil;
        
        if (self.number == LiveRoomGiftChannelPackage) {
            
            HeadModel* giftModel = [self.hullInfo objectForKey:@(self.number)];
            
            name = giftModel.name;
        
        }else{
            
            IdentityMaxModel* pkgModel = [self.hullInfo objectForKey:@(self.number)];
            
            name = pkgModel.name;
        }
        
        self.info.text= name;
        
        self.agendaItemBbbb.text=[NSString stringWithFormat:@"%ld%@",(long)self.with,NSLocalizedString(@"个", @"")];
        
        
        self.action= [[SearchView alloc] initWithShow:self.tip putUpFloat:260 guide:UIInterfaceOrientationPortrait];
        
        self.action.withTargetPush=self;
        
        [self.action comment:self.viewController.view];
    }
}


- (void)view{
    
    if (self.number == LiveRoomGiftChannelPackage){
        
        IdentityMaxModel* selectPkgModel = [self.hullInfo objectForKey:@(self.number)];
        
        selectPkgModel.giftNum = self.with;
    
    }else if (self.number == LiveRoomGiftChannelHot){
        
        HeadModel* selectGiftModel = [self.hullInfo objectForKey:@(self.number)];
        
        selectGiftModel.giftNum = self.with;
    }
    
    [self change];
}


#pragma mark - BbbbAt delegate

- (void)says:(BbbbAt*)fzMenu{
    
}

- (void)personaling:(BbbbAt*)fzMenu{
    
}


- (CGFloat)page:(BbbbAt*)fzMenu terrace:(NSInteger)row {
    
    return 28;
}

- (CGFloat)send:(BbbbAt*)fzMenu guess:(NSInteger)row {
    
    return 145;
}

- (UIView*)atExplainRow:(BbbbAt*)fzMenu masterKey:(NSInteger)row {
    
    
    NSString *text = @"";
    
    UIView *itemView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 150, 28)];
    
    
    text = [NSString stringWithFormat:@"%@%@",[@([self send:row]) stringValue],NSLocalizedString(@"个", @"")];
    
    NSInteger indexP;
    
    if (self.theoryGroup.giftSendItem.count > 0) {
        
        indexP = self.theoryGroup.giftSendItem.count;
    
    }else{
        
        indexP = 7;
    }
    
    
    if (row<indexP) {
        
        UILabel *indexLabel = [UILabel new];
        
        indexLabel.textColor = RGBA(51, 51, 51, 1);
        
        indexLabel.font = [UIFont systemFontOfSize:14];
        
        indexLabel.text = text;
        
        [itemView addSubview:indexLabel];
        
        [indexLabel mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.left.equalTo(itemView).offset(17);
            
            make.centerY.equalTo(itemView);
        
        }];
        
        
        NSString *descString = [self treat:row];
        
        UILabel *descLabel = [UILabel new];
        
        descLabel.textColor = RGBA(102, 102, 102, 1);
        
        descLabel.font = [UIFont systemFontOfSize:14];
        
        descLabel.text = descString;
        
        [itemView addSubview:descLabel];
        
        [descLabel mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.left.equalTo(indexLabel.mas_right).offset(15);
            
            make.centerY.equalTo(itemView);
        
        }];
        
        
        if (self.theoryGroup.giftSendItem.count > 0) {
            
            OnModel *giftNumModel = self.theoryGroup.giftSendItem[row];
            
            if (giftNumModel.targetPid > 0) {
                
                descLabel.textColor = [UIColor redColor];
                
                indexLabel.textColor = [UIColor redColor];
            
            }else{
                
                descLabel.textColor = RGBA(102, 102, 102, 1);
                
                indexLabel.textColor = RGBA(51, 51, 51, 1);
            }
        }
    
    }else{
        
        UILabel *descLabel = [UILabel new];
        
        descLabel.textColor = RGBA(102, 102, 102, 1);
        
        descLabel.font = [UIFont systemFontOfSize:14];
        
        descLabel.text = StringFromLaceSettingData(&k_agentGeniusValue);
        
        descLabel.textAlignment = NSTextAlignmentCenter;
        
        [itemView addSubview:descLabel];
        
        [descLabel mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.centerX.equalTo(itemView);
            
            make.centerY.equalTo(itemView);
        
        }];
    }
    
    
    return itemView;
}


- (BOOL)acceptBy:(BbbbAt*)fzMenu next:(NSInteger)row {
    
    return YES;
}


- (void)show:(BbbbAt*)fzMenu family:(NSInteger)row {
    
    [self beauty:row];
}


#pragma mark - actionSheet delegate


- (void)somebody:(SearchView *)actionSheet size:(__kindof UIView *)subView{
    
    self.with = self.with == 0 ? 1 : self.with;
    
    [self.cardBbbb setTitle:[NSString stringWithFormat:@"%zd", self.with]
                        
                        forState:UIControlStateNormal];
    
    [self view];
}


#pragma mark - ReceiveView delegate

- (void) pic:(NSInteger) number{
    
    
    self.with = MIN(9999, self.with*10+number);
    
    self.agendaItemBbbb.text = [NSString stringWithFormat:@"%ld %@",(long)self.with,NSLocalizedString(@"个", @"")];
    
    [self view];
}

- (void) activity{
    
    
    self.with = self.with/10;
    
    self.agendaItemBbbb.text = [NSString stringWithFormat:@"%ld %@",(long)self.with,NSLocalizedString(@"个", @"")];
    
    [self view];
}


- (void) beforeConversation{
    
}


#pragma mark - select item

- (void)content:(id)itemModel{
    
    if ([itemModel isKindOfClass:[IdentityMaxModel class]]) {
        
        IdentityMaxModel* pkgModel = (IdentityMaxModel*)itemModel;
        
        IdentityMaxModel* lastSelectPkgModel = [self.hullInfo objectForKey:@(self.number)];
        
        if (lastSelectPkgModel.pkgItemsetId == pkgModel.pkgItemsetId) {
            
            [self me];
            
            return;
        
        }else{
            
            self.with = 1;
            
            [self.cardBbbb setTitle:[NSString stringWithFormat:@"%zd", self.with]
                                
                                forState:UIControlStateNormal];
            
            lastSelectPkgModel.select = NO;
            
            lastSelectPkgModel.giftNum = 0;
            
            pkgModel.select = YES;
            
            pkgModel.giftNum = self.with;
            
            [self.hullInfo setObject:pkgModel forKey:@(self.number)];
            
            [self teenager:pkgModel];
        }
    
    }else{
        
        HeadModel* giftModel = (HeadModel*)itemModel;
        
        HeadModel* lastSelectPkgModel = [self.hullInfo objectForKey:@(self.number)];
        
        if (lastSelectPkgModel.gid == giftModel.gid) {
            
            [self me];
            
            return;
        
        }else{
            
            self.with = 1;
            
            [self.cardBbbb setTitle:[NSString stringWithFormat:@"%zd", self.with]
                                
                                forState:UIControlStateNormal];
            
            lastSelectPkgModel.select = NO;
            
            lastSelectPkgModel.giftNum = 0;
            
            giftModel.select = YES;
            
            giftModel.giftNum = self.with;
            
            [self.hullInfo setObject:giftModel forKey:@(self.number)];
            
            [self sex];
            
            [self teenager:giftModel];
        }
    }
}



- (void)me{
   
    
    __block NSInteger currentNumIndex = -1;
    
    @weakify(self);
    
    [self.theoryGroup.giftSendItem enumerateObjectsUsingBlock:^(OnModel * _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) {
        
        @strongify(self);
        
        if (obj.num == self.with) {
            
            currentNumIndex = idx;
            
            *stop = YES;
        }
    
    }];
    
    if (currentNumIndex == -1) {
        
        self.with = 1;
    
    }else{
        
        currentNumIndex = currentNumIndex + 1;
        
        if (currentNumIndex >= self.theoryGroup.giftSendItem.count) {
            
            currentNumIndex = 0;
        }
        
        self.with = self.theoryGroup.giftSendItem[currentNumIndex].num;
    }
    
    
    [self.cardBbbb setTitle:[NSString stringWithFormat:@"%zd", self.with]
                        
                        forState:UIControlStateNormal];
    
    id selectItem = [self.hullInfo objectForKey:@(self.number)];
    
    NSInteger index = -1;
    
    if (selectItem) {
        
        NSArray* dataSource = [self channelProvinceQuery:self.number];
        
        index = [dataSource indexOfObject:selectItem];
    }
    
    if (self.number == LiveRoomGiftChannelPackage) {
        
        IdentityMaxModel* pkgModel = (IdentityMaxModel*)selectItem;
        
        pkgModel.giftNum = self.with;
    
    }else{
        
        HeadModel* giftModel = (HeadModel*)selectItem;
        
        giftModel.giftNum = self.with;
    }
    
    if (index >= 0) {
        
        NSIndexPath* indexPath = [NSIndexPath indexPathForItem:index inSection:0];
        
        UICollectionView* collectionView = [self jurisprudenceVideoTask:self.number];
        
        UICollectionViewCell* cell = [collectionView cellForItemAtIndexPath:indexPath];
        
        if (self.number == LiveRoomGiftChannelPackage) {

        
        }else{
            
            ShowReusableView* giftCell = (ShowReusableView*)cell;
            
            giftCell.level = selectItem;
        }

    }
}


#pragma mark - gift description

- (void)teenager:(PanelModel*)model{
    
    
    HeadModel *giftModel;
    
    IdentityMaxModel *pkgModel;
    
    
    if ([model isKindOfClass:[HeadModel class]]) {
        
        giftModel = (HeadModel*)model;
    }
    
    
    if ([model isKindOfClass:[IdentityMaxModel class]]) {
        
        pkgModel = (IdentityMaxModel*)model;
    }
    
    
    NSString *tips = giftModel?giftModel.giftDescription:(pkgModel?pkgModel.giftDescription:@"");
    
    if (FZUtils.isEmptyString(tips)) {
        
        [self fill];
        
        return;
    }
    
    
    YYTextLayout *yyLayout = giftModel?giftModel.yyLayout:(pkgModel?pkgModel.yyLayout:nil);
    
    
    if (!yyLayout) {
        
        NSMutableArray *attrbutedArray=[NSMutableArray new];
        
        NSMutableParagraphStyle* para = nil;
        
        para = [[NSMutableParagraphStyle alloc] init];
        
        para.lineBreakMode = NSLineBreakByCharWrapping;
        
        para.alignment = NSTextAlignmentCenter;
        
        [WithModel reply:tips pointBlankCard:attrbutedArray];
        
        MaxTask *config = [RankView phone];
        
        yyLayout = [SelectLabel concealed:attrbutedArray lineFloat:config.placeFloat goopPara:config streetwise:para];
        
        giftModel?(giftModel.yyLayout = yyLayout):(pkgModel?(pkgModel.yyLayout = yyLayout):(pkgModel));
    }
    
    
    self.instance.layer.contents = nil;
    
    self.instance.textLayout = yyLayout;
    
    self.instance.frame = CGRectMake(15, 6, yyLayout.textBoundingSize.width, yyLayout.textBoundingSize.height);

    
    
    self.instance.textAlignment = NSTextAlignmentCenter;
    
    CGFloat height = yyLayout.textBoundingSize.height + 12;
    
    CGFloat width = yyLayout.textBoundingSize.width + 30;
    
    self.existingBbbb.layer.cornerRadius = height/2.0;
    
    self.existingBbbb.width = width;
    
    self.existingBbbb.height = height;
    
    self.existingBbbb.center = CGPointMake(self.center.x, self.center.y-32);
    
    
    [self.existingBbbb.layer removeAllAnimations];
    
    self.existingBbbb.alpha = 1.0;
    
    self.existingBbbb.hidden = NO;
    
    [UIView animateWithDuration:0.3 delay:5.0 options:UIViewAnimationOptionLayoutSubviews animations:^{
        
        self.existingBbbb.alpha = 0.0;
    
    } completion:^(BOOL finished) {
    
    }];
}

- (void)fill {
    
    
    [_existingBbbb.layer removeAllAnimations];
    
    _existingBbbb.hidden = YES;
    
}


+ (MaxTask*)phone{
    
    MaxTask *config=[[MaxTask alloc] init];
    
    config.placeFloat=220;
    
    config.info=[UIFont systemFontOfSize:12];
    
    config.rivetLine=4;
    
    config.removeMessage=[UIColor whiteColor];
    
    return config;
}


- (void)mobile:(NSString*)channel{
    
    
    __block NSInteger index = -1;
    
    [self.gallery.titles enumerateObjectsUsingBlock:^(id  _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) {
        
        if ([channel isEqualToString:obj]) {
            
            index = idx;
            
            *stop = YES;
        }
    
    }];
    
    if (index < 0) {
        
        return;
    }
    
    [self.gallery selectItemAtIndex:index];
    
    [self categoryView:self.gallery didSelectedItemAtIndex:index];
    
    [self.gallery reloadData];
}


#pragma mark - UICollectionViewDelegate,UICollectionViewDataSource

- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView{
    
    return 1;
}


- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section{
    
    NSInteger rowNum = 0;
    
    switch (collectionView.tag) {
      
        
        case LiveRoomGiftChannelHot:
            
            rowNum = self.theoryGroup.gifts.count;
            
            break;
        
        case LiveRoomGiftChannelPackage:
            
            break;
       
        
        default:
            
            break;
    }
    
    return rowNum;
}


- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath{
    
    UICollectionViewCell* cell = nil;
    
    if (collectionView.tag == LiveRoomGiftChannelPackage) {
        
    
    }else{
        
        NSString* reuseId = StringFromLaceSettingData(&k_highwayVehicleText);
        
        NSArray* dataArr = self.theoryGroup.gifts;
        
        BOOL close = NO;
        
        ShowReusableView* giftCell = [collectionView dequeueReusableCellWithReuseIdentifier:reuseId forIndexPath:indexPath];
        
        giftCell.current = close;
        
        giftCell.level = dataArr[indexPath.item];
        
        @weakify(self);
        
        [giftCell setFull:^(HeadModel * _Nonnull model) {
           
           @strongify(self);
            
            [self content:model];
        
        }];
        
        cell = giftCell;
    }
    
    return cell;
}


- (void)scrollViewDidScroll:(UIScrollView *)scrollView{
    
    
    if (self.existingBbbb.hidden == NO) {
        
        [self fill];
    }
    
    
    CGFloat PageWidth = scrollView.frame.size.width;
    
    NSInteger index = floor ((scrollView.contentOffset.x - PageWidth / 2) / PageWidth)+1;
    
    self.album.currentPage = index;
}


#pragma mark - views


- (UIView*)hide{
    
    if (!_hide) {
        
        
        _hide = [[UIView alloc] init];
        
        _hide.backgroundColor = [UIColor clearColor];
        
        [self addSubview:_hide];
                
        
        UIView *lineView = [UIView new];
        
        lineView.backgroundColor = RGBA(60, 60, 60, 1);
        
        [_hide addSubview:lineView];
        
        
        [lineView mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.height.mas_equalTo(0.5);
            
            make.left.and.right.and.bottom.equalTo(self.hide);
        
        }];
    }
    
    
    return _hide;
}


- (ModelNameView *)gallery{
    
    if (!_gallery) {
        
        NSArray *titlesArr = @[StringFromLaceSettingData(&kSlopePreventionTitle)];
        
        _gallery = [[ModelNameView alloc] initWithFrame:CGRectMake(0, 0, 160, 36)];
        
        _gallery.titles = titlesArr;
        
        _gallery.defaultSelectedIndex = 0;
        
        _gallery.titleSelectedColor = RGBA(255, 255, 255, 1);
        
        _gallery.titleColor = RGBA(255, 255, 255, 0.8);
        
        _gallery.titleSelectedFont = [UIFont underbelly:PFSCTypeRegular substance:15];
        
        _gallery.titleFont = [UIFont underbelly:PFSCTypeRegular substance:15];
        
        _gallery.titleColorGradientEnabled = YES;
        
        _gallery.titleLabelZoomEnabled = NO;
        
        _gallery.contentScrollViewClickTransitionAnimationEnabled = NO;
        
        _gallery.cellSpacing = 5;
        
        _gallery.cellSpacing = 20;
        
        _gallery.cellWidthIncrement = 5;
        
        _gallery.averageCellSpacingEnabled = NO;
        
        _gallery.delegate = self;
        
        
        JXCategoryIndicatorLineView *lineView = [[JXCategoryIndicatorLineView alloc] init];
        
        lineView.indicatorColor = [ShowColor send];
        
        _gallery.indicators = @[lineView];
        
        [self.hide addSubview:_gallery];
    }
    
    return _gallery;
}



- (UIButton*)black{
    
    
    if (!_black) {
        
        _black = [UIButton buttonWithType:UIButtonTypeCustom];
        
        _black.backgroundColor = [[UIColor blackColor] colorWithAlphaComponent:0];
        
        
        @weakify(self);
        
        _black.rac_command = [[RACCommand alloc] initWithSignalBlock:^RACSignal *(id input) {
            
            @strongify(self);
            
            if (self.banRecharge) {
                
                self.banRecharge();
            }
            
            return [RACSignal empty];
        
        }];
        
        
        [self.hide addSubview:_black];
    }
    
    return _black;
}



- (UIImageView*)dot{
    
    
    if (!_dot) {
        
        
        _dot = [[UIImageView alloc] init];
        
        _dot.image = [UserTextImage imageNamed:StringFromLaceSettingData(&k_miteSlavName)];
        
        [self.hide insertSubview:_dot belowSubview:self.black];
    }
    
    return _dot;
}


- (UILabel*)userOld{
    
    
    if (!_userOld) {
        
        _userOld = [[UILabel alloc] init];
        
        _userOld.textColor     = [UIColor whiteColor];
        
        _userOld.font          = [UIFont underbelly:PFSCTypeMedium substance:14];
        
        _userOld.textAlignment = 2;
        
        
        [self.hide insertSubview:_userOld belowSubview:self.black];
    }
    
    
    return _userOld;
}


- (UIView *)add{
    
    if (!_add) {
        
        _add = [[UIView alloc] init];
        
        _add.backgroundColor = [UIColor clearColor];
        
        [self addSubview:_add];
    }
    
    return _add;
}


- (UIView*)areaList{
    
    
    if (!_areaList) {
        
        _areaList = [UIView new];
        
        _areaList.layer.borderColor  = ShowColor.send.CGColor;
        
        _areaList.layer.borderWidth  = 1;
        
        _areaList.layer.cornerRadius = 4;
        
        _areaList.clipsToBounds      = YES;
        
        
        [self.add addSubview:_areaList];
    }
    
    
    return _areaList;
}


- (AtControl*)arcanum{
    
    
    if (!_arcanum) {
        
        _arcanum = [AtControl buttonWithType:UIButtonTypeCustom];
        
        _arcanum.titleLabel.font = [UIFont boldSystemFontOfSize:15];
        
        [_arcanum setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
        
        [_arcanum setTitle:NSLocalizedString(StringFromLaceSettingData(&k_niteText), @"") forState:UIControlStateNormal];
        
        [_arcanum snap:ShowColor.send current:UIControlStateNormal];
        
        [_arcanum snap:[UIColor color:StringFromLaceSettingData(&k_mentionText)] current:UIControlStateHighlighted];
        
        [_arcanum snap:RGBA(180, 180, 180, 1) current:UIControlStateDisabled];
        
        [_arcanum addTarget:self
                        
                        action:@selector(doingAngel)
              
              forControlEvents:UIControlEventTouchUpInside];
        
        [self.areaList addSubview:_arcanum];
    }
    
    return _arcanum;
}


- (AtControl*)cardBbbb{
    
    
    if (!_cardBbbb) {
        
        _cardBbbb = [AtControl buttonWithType:UIButtonTypeCustom];
        
        _cardBbbb.titleLabel.font          = [UIFont systemFontOfSize:14];
        
        _cardBbbb.titleLabel.textAlignment = NSTextAlignmentRight;
        
        _cardBbbb.backgroundColor          = [UIColor clearColor];
        
        _cardBbbb.imageView.contentMode    = UIViewContentModeScaleAspectFit;
        
        
        [_cardBbbb setTitleColor:[UIColor whiteColor]
                             
                             forState:UIControlStateNormal];
        
        [_cardBbbb setTitle:NSLocalizedString(@"1", @"")
                        
                        forState:UIControlStateNormal];
        
        
        [_cardBbbb setImage:[UserTextImage imageNamed:StringFromLaceSettingData(&k_valueIndexCooperativeTitle)]
                        
                        forState:UIControlStateNormal];
        
        
        @weakify(self);
        
        _cardBbbb.rac_command = [[RACCommand alloc] initWithSignalBlock:^RACSignal *(id input) {
            
            @strongify(self);
            
            [self bbbb];
            
            return [RACSignal empty];
        
        }];
        
        
        [_cardBbbb setSawLog:^CGRect(CGRect rect){
            
            return CGRectMake(rect.size.width-5-9,
                              
                              (rect.size.height-9)/2.0,
                              
                              9, 9);
        
        }];
        
        
        [_cardBbbb setMessageContent:^CGRect(CGRect rect){
            
            return CGRectMake(0, 0,
                              
                              rect.size.width-5-9-4,
                              
                              rect.size.height);
        
        }];
        
        
        [self.areaList addSubview:_cardBbbb];
        
    }
    
    
    return _cardBbbb;
}




- (UICollectionView*)button{
    
    TaskFlowLayout* layout = [[TaskFlowLayout alloc] init];
    
    layout.scrollDirection = UICollectionViewScrollDirectionHorizontal;
    
    UICollectionView* collectionView = [[UICollectionView alloc] initWithFrame:CGRectZero collectionViewLayout:layout];
    
    collectionView.delegate = self;
    
    collectionView.dataSource = self;
    
    collectionView.bounces = NO;
    
    collectionView.pagingEnabled = YES;
    
    collectionView.showsHorizontalScrollIndicator = NO;
    
    collectionView.backgroundColor = [UIColor clearColor];
    
    return collectionView;
}


- (UICollectionView *)style{
    
    if (!_style) {
        
        _style = [self button];
        
        _style.tag = LiveRoomGiftChannelHot;
        
        [_style registerClass:[ShowReusableView class] forCellWithReuseIdentifier:StringFromLaceSettingData(&k_highwayVehicleText)];
        
        [self addSubview:_style];
    }
    
    return _style;
}

- (UIPageControl *)album{
    
    
    if (!_album) {
        
        _album = [[UIPageControl alloc] init];
        
        _album.hidesForSinglePage             = YES;
        
        _album.defersCurrentPageDisplay       = YES;
        
        _album.currentPageIndicatorTintColor  = RGBA(180, 180, 180, 1);
        
        _album.pageIndicatorTintColor         = RGBA(60, 60, 60, 1);
        
        [self addSubview:_album];
    }
    
    
    return _album;
}


- (UIView*)existingBbbb{
    
    
    if (!_existingBbbb) {
        
        _existingBbbb = [[UIView alloc] init];
        
        _existingBbbb.layer.cornerRadius  = 14.0;
        
        _existingBbbb.layer.borderWidth   = 1.0;
        
        _existingBbbb.layer.masksToBounds = YES;
        
        _existingBbbb.layer.borderColor   = [ShowColor send].CGColor;
        
        _existingBbbb.backgroundColor     = RGBA(0, 0, 0, 0.8);
        
        _existingBbbb.hidden              = YES;
        
        _existingBbbb.center              = CGPointMake(self.center.x, self.center.y-32);
        
        _existingBbbb.size                = CGSizeMake(30, 30);
        
        [self addSubview:_existingBbbb];
    }
    
    
    return _existingBbbb;
}


- (YYLabel*)instance{
    
    
    if (!_instance) {
        
        _instance = [[YYLabel alloc] init];
        
        _instance.font          = [UIFont systemFontOfSize:12];
        
        _instance.textColor     = [UIColor whiteColor];
        
        _instance.textAlignment = NSTextAlignmentCenter;
        
        _instance.numberOfLines = 0;
        
        _instance.backgroundColor = RGBA(0, 0, 0, 0.8);
        
        [self.existingBbbb addSubview:_instance];
        
        
        [_instance mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.left.equalTo(self.existingBbbb.mas_left).offset(5);
            
            make.right.equalTo(self.existingBbbb.mas_right).offset(-5);
            
            make.top.and.bottom.equalTo(self.existingBbbb);
        
        }];
    }
    
    
    return _instance;
}


- (UIView*)tip{
    
    
    if (!_tip) {
        
        
        _tip = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.width, 260)];
        
        _tip.backgroundColor = [UIColor blackColor];
        
        
        UIButton *backButton = [UIButton buttonWithType:UIButtonTypeCustom];
        
        [backButton setImage:[UserTextImage imageNamed:StringFromLaceSettingData(&kMountGrantValue)] forState:UIControlStateNormal];
        
        [_tip addSubview:backButton];
        
        
        [backButton mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.left.and.top.equalTo(_tip);
            
            make.width.and.height.mas_equalTo(44);
        
        }];
        
        
        @weakify(self);
        
        backButton.rac_command = [[RACCommand alloc] initWithSignalBlock:^RACSignal *(id input) {
            
            @strongify(self);
            
            [self.action guestListWith];
            
            return [RACSignal empty];
        
        }];
        
        
        UIButton *sendButton = [UIButton buttonWithType:UIButtonTypeCustom];
        
        sendButton.backgroundColor = RGBA(251, 161, 41, 1);
        
        sendButton.titleLabel.textColor=[UIColor whiteColor];
        
        sendButton.rac_command = [[RACCommand alloc] initWithSignalBlock:^RACSignal *(id input) {
            
            @strongify(self);
            
            if (self.number == LiveRoomGiftChannelPackage) {

            
            }else{
                
                [self loadGiftHorse];
            }
            
            return [RACSignal empty];
        
        }];
        
        [sendButton setTitle:NSLocalizedString(StringFromLaceSettingData(&k_niteText), @"") forState:UIControlStateNormal];
        
        [_tip addSubview:sendButton];
        
        
        [sendButton mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.right.and.top.equalTo(_tip);
            
            make.width.mas_equalTo(106);
            
            make.height.mas_equalTo(44);
        
        }];
        
        
        ReceiveView *keyboard = [[ReceiveView alloc]
                                        
                                        initWithFrame:CGRectMake(0, 200, self.width, 216)];
        
        keyboard.lastClick = self;
        
        [_tip addSubview:keyboard];
        
        
        [keyboard mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.left.and.right.and.bottom.equalTo(_tip);
            
            make.height.mas_equalTo(216);
        
        }];
    }
    
    
    return _tip;
}


- (UILabel*)info{
    
    
    if (!_info) {
        
        _info = [UILabel new];
        
        _info.textColor = [ShowColor send];
        
        [self.tip addSubview:_info];
        
        
        [_info mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.left.mas_equalTo(44);
            
            make.top.equalTo(self.tip);
            
            make.height.mas_equalTo(44);
            
            make.width.mas_equalTo(60);
        
        }];
    }
    
    
    return _info;
}


- (UILabel*)agendaItemBbbb{
    
    
    if (!_agendaItemBbbb) {
        
        _agendaItemBbbb = [UILabel new];
        
        _agendaItemBbbb.textAlignment = NSTextAlignmentCenter;
        
        _agendaItemBbbb.textColor     = [UIColor whiteColor];
        
        [self.tip addSubview:_agendaItemBbbb];
        
        
        [_agendaItemBbbb mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.left.equalTo(self.info.mas_right);
            
            make.top.equalTo(self.tip);
            
            make.height.mas_equalTo(44);
            
            make.right.equalTo(self.tip).offset(0-106);
        
        }];
    }
    
    
    return _agendaItemBbbb;
}


- (NSMutableDictionary *)hullInfo{
    
    if (!_hullInfo) {
        
        _hullInfo = [NSMutableDictionary dictionary];
    }
    
    return _hullInfo;
}


@end

Byte *LaceSettingDataToByte(CollectionUserData *data) {
    if (data->valueOnd) return data->restHighway;
    for (int i = 0; i < data->cephalometry; i++) {
        data->restHighway[i] ^= data->raftRate;
    }
    data->restHighway[data->cephalometry] = 0;
    data->valueOnd = true;
	if (data->cephalometry >= 3) {
		data->bill = data->restHighway[0];
		data->effortBacteria = data->restHighway[1];
		data->characterSetPeat = data->restHighway[2];
	}
    return data->restHighway;
}

NSString *StringFromLaceSettingData(CollectionUserData *data) {
    return [NSString stringWithUTF8String:(char *)LaceSettingDataToByte(data)];
}
