
#import <Foundation/Foundation.h>

NSString *StringFromBooData(Byte *data);



Byte k_legText[] = {20, 27, 5, 202, 103, 116, 115, 97, 111, 116, 108, 101, 103, 110, 97, 95, 108, 108, 97, 99, 95, 115, 114, 101, 104, 116, 111, 95, 110, 111, 99, 105, 87};



Byte kGalleryData[] = {9, 19, 9, 77, 107, 114, 62, 178, 164, 101, 110, 105, 108, 110, 111, 95, 115, 100, 110, 101, 105, 114, 102, 95, 110, 111, 99, 105, 128};



Byte kSlopeValue[] = {34, 27, 5, 76, 182, 101, 99, 105, 111, 118, 95, 111, 116, 104, 101, 114, 115, 104, 111, 109, 101, 95, 88, 71, 103, 98, 65, 83, 110, 111, 99, 105, 3};



Byte kShelfCountelOweTitle[] = {56, 7, 5, 31, 69, 65, 69, 56, 52, 48, 67, 35, 47};



Byte kRadName[] = {10, 21, 7, 152, 223, 89, 25, 111, 98, 105, 104, 122, 95, 105, 106, 111, 97, 103, 95, 116, 97, 104, 99, 95, 110, 111, 99, 105, 110};



Byte kEmpireDisturbText[] = {39, 12, 12, 190, 159, 204, 7, 75, 192, 127, 61, 99, 167, 186, 231, 137, 173, 231, 155, 138, 229, 133, 173, 233, 235};



Byte k_permitTitle[] = {89, 12, 13, 237, 253, 4, 97, 219, 71, 46, 214, 175, 110, 167, 186, 231, 137, 173, 231, 140, 175, 229, 162, 180, 232, 25};



Byte kModelMatedData[] = {53, 21, 12, 75, 184, 192, 19, 182, 246, 68, 97, 127, 110, 111, 99, 105, 95, 110, 114, 97, 119, 95, 111, 102, 110, 105, 95, 110, 111, 115, 114, 101, 112, 81};



Byte kMagicYerOpenContent[] = {74, 19, 6, 56, 233, 235, 145, 187, 233, 137, 139, 230, 178, 183, 229, 183, 143, 229, 166, 180, 232, 165, 175, 232, 32, 30};



Byte kMuseumContent[] = {31, 7, 7, 35, 214, 207, 220, 52, 70, 52, 70, 52, 70, 35, 58};



Byte k_numberLeapName[] = {99, 9, 11, 214, 120, 197, 221, 46, 199, 186, 36, 173, 184, 228, 173, 146, 230, 180, 155, 231, 53};



Byte k_establishContent[] = {26, 7, 10, 220, 241, 196, 171, 203, 248, 20, 56, 57, 53, 53, 66, 69, 35, 36};



Byte k_privatelyValue[] = {71, 25, 5, 211, 100, 110, 111, 99, 105, 95, 116, 115, 105, 108, 95, 101, 112, 121, 116, 95, 119, 101, 110, 95, 110, 111, 115, 114, 101, 112, 167};



Byte kDivideData[] = {77, 26, 8, 37, 12, 47, 236, 154, 103, 110, 112, 46, 64, 37, 108, 109, 47, 109, 114, 97, 104, 99, 47, 108, 101, 118, 101, 108, 47, 102, 109, 47, 64, 37, 99};



Byte k_gainValue[] = {18, 19, 10, 16, 219, 195, 196, 97, 117, 228, 183, 143, 229, 129, 176, 229, 178, 183, 229, 183, 143, 229, 166, 180, 232, 165, 175, 232, 32, 46};



Byte k_accomplishmentContent[] = {39, 19, 8, 105, 69, 211, 238, 34, 128, 168, 232, 129, 166, 231, 178, 183, 229, 183, 143, 229, 166, 180, 232, 165, 175, 232, 32, 210};



Byte k_behavioralText[] = {27, 27, 5, 148, 247, 103, 110, 112, 46, 64, 37, 102, 99, 47, 104, 116, 108, 97, 101, 119, 47, 108, 101, 118, 101, 108, 47, 102, 109, 47, 64, 37, 124};



Byte kMarkName[] = {55, 25, 6, 210, 239, 36, 101, 99, 105, 111, 118, 95, 111, 116, 104, 101, 114, 115, 104, 111, 109, 101, 95, 100, 72, 80, 75, 49, 98, 103, 98, 240};



Byte k_sourceServeName[] = {59, 10, 10, 96, 166, 168, 9, 60, 52, 107, 49, 48, 45, 49, 48, 45, 48, 57, 57, 49, 197};



Byte kImpossibleTitle[] = {10, 15, 11, 103, 155, 52, 170, 182, 34, 240, 189, 101, 118, 97, 119, 95, 111, 105, 100, 117, 97, 95, 121, 97, 108, 112, 168};



Byte k_journeyValue[] = {88, 31, 11, 132, 104, 114, 145, 182, 155, 52, 89, 116, 108, 117, 97, 102, 101, 100, 95, 110, 105, 112, 105, 104, 115, 101, 105, 106, 95, 111, 102, 110, 73, 114, 101, 115, 117, 95, 110, 111, 99, 105, 241};



Byte kThreePeakData[] = {37, 13, 11, 20, 249, 245, 64, 51, 61, 4, 245, 98, 97, 108, 95, 116, 97, 104, 99, 95, 110, 111, 99, 105, 73};
















#import "KeyView.h"
#import "NSDate+MaxPlay.h"
#import "SVGA.h"

@interface KeyView ()<SVGAPlayerDelegate>



@property(nonatomic,strong) UIView *territorialDivisionBorder;

@property(nonatomic,strong) PerspectiveView *flagSend;

@property(nonatomic,strong) UIImageView *person; 

@property(nonatomic,strong) UIImageView *message; 

@property(nonatomic,strong) UIImageView *black; 

@property(nonatomic,strong) UIImageView *flagTab; 




@property (nonatomic, strong) UIImageView *status;


@property(nonatomic,strong) UIView *snap; 

@property(nonatomic,strong) UILabel *hide; 

@property(nonatomic,strong) UIImageView *gender; 

@property(nonatomic,strong) UIView *giftEvent; 

@property(nonatomic,strong) UILabel *withRemark; 

@property(nonatomic,strong) UIImageView *castBbbb; 


@property(nonatomic,strong) AtControl *publicTransport; 

@property(nonatomic,strong) UIImageView *familyPair;

@property(nonatomic,strong) UILabel *cost;

@property(nonatomic,strong) SVGAPlayer *dot;


@property(nonatomic,strong) UIButton *lifeStory; 


@property(nonatomic,strong) AtControl *pageApp; 


@property (nonatomic, assign) BOOL tabOn;

@property(nonatomic,strong) UIButton* red;



@end


@implementation KeyView


- (instancetype)initWithFrame:(CGRect)frame{
    
    if (self = [super initWithFrame:frame]) {
        
        [self namePic];
    }
    
    return self;
}


- (void)namePic{

    
    self.backgroundColor = [UIColor clearColor];

    
    [self.territorialDivisionBorder mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.top.mas_equalTo(self.view.mas_bottom).mas_equalTo(-50);
        
        make.left.right.height.mas_equalTo(0);
    
    }];

    
    [self.flagSend mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.top.offset(18);
        
        make.left.offset(15);
        
        make.size.mas_equalTo(CGSizeMake(35,18));
    
    }];

    
    [self.person mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.centerY.mas_equalTo(self.flagSend.mas_centerY);
        
        make.left.mas_equalTo(self.flagSend.mas_right).offset(4);
        
        make.size.mas_equalTo(CGSizeMake(42, 18));
    
    }];
    
    [self.message mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.centerY.mas_equalTo(self.flagSend.mas_centerY);
        
        make.left.mas_equalTo(self.person.mas_right).offset(4);
        
        make.size.mas_equalTo(CGSizeMake(42, 18));
    
    }];

    
    [self.black mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.left.mas_equalTo(self.message.mas_right).offset(4);
        
        make.centerY.mas_equalTo(self.flagSend.mas_centerY);
        
        make.size.mas_equalTo(CGSizeMake(44, 18));
    
    }];
    
    [self.flagTab mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.left.mas_equalTo(self.black.mas_right).offset(4);
        
        make.centerY.mas_equalTo(self.flagSend.mas_centerY);
        
        make.size.mas_equalTo(CGSizeMake(28, 18));
    
    }];

    
    [self.status mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.left.equalTo(self.flagSend);
        
        make.top.equalTo(self.flagSend.mas_bottom).offset(6);
        
        make.size.mas_equalTo(CGSizeMake(101, 29));
    
    }];

    
    [self.snap mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.top.mas_equalTo(self.status.mas_bottom).offset(12);
        
        make.height.mas_equalTo(41);
        
        make.width.mas_equalTo(120);
        
        make.left.offset(15);
    
    }];

    
    [self.hide mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.left.mas_equalTo(10);
        
        make.centerY.mas_equalTo(self.snap);
    
    }];
    
    [self.gender mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.left.mas_equalTo(self.hide.mas_right).offset(6);
        
        make.width.mas_equalTo(41);
        
        make.height.mas_equalTo(16);
        
        make.centerY.mas_equalTo(self.snap);
    
    }];

    
    [self.giftEvent mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.top.mas_equalTo(self.snap);
        
        make.left.mas_equalTo(self.snap.mas_right).offset(8);
        
        make.height.mas_equalTo(41);
        
        make.width.mas_equalTo(120);
    
    }];

    
    [self.withRemark mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.left.mas_equalTo(10);
        
        make.centerY.mas_equalTo(self.snap);
    
    }];
    
    [self.castBbbb mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.left.mas_equalTo(self.withRemark.mas_right).offset(6);
        
        make.width.mas_equalTo(41);
        
        make.height.mas_equalTo(16);
        
        make.centerY.mas_equalTo(self.giftEvent);

    
    }];

   
   [self.red mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.right.mas_equalTo(self.territorialDivisionBorder.mas_right).offset(-15);
        
        make.width.mas_equalTo(actualWidth(202));
        
        make.height.mas_equalTo(actualHeight(34));
        
        make.top.mas_equalTo(self.territorialDivisionBorder).offset(3);

    
    }];


    
    [self.lifeStory mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.top.mas_equalTo(self.view.mas_top).mas_equalTo(statusBarNavBarHeight() + 10);
        
        make.centerX.mas_equalTo(self.view.mas_centerX);
        
        make.size.mas_equalTo(CGSizeMake(127, 28));
    
    }];



    
    [self.publicTransport mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.left.mas_equalTo(self.territorialDivisionBorder).offset(9);
        
        make.bottom.mas_equalTo(self.territorialDivisionBorder.mas_top).mas_offset(-12);
    
    }];


    
    [self.pageApp mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.left.mas_equalTo(15);
        
        make.bottom.mas_equalTo(self.publicTransport.mas_top).mas_offset(-8);
        
        make.width.mas_equalTo(66);
        
        make.height.mas_equalTo(25);
    
    }];


}


- (void)setPicCurriculumModelBbbb:(IndividualityModel *)userInfo{


    
    BOOL needUpdateRecord = YES;
    
    if (_picCurriculumModelBbbb) {
        
        if (userInfo.audioUrl && _picCurriculumModelBbbb.audioUrl && [userInfo.audioUrl isEqualToString:_picCurriculumModelBbbb.audioUrl]) {
            
            needUpdateRecord = NO;
        }
    }
    
    _picCurriculumModelBbbb = userInfo;

    
    [self.flagSend gender:[NSString stringWithFormat:@"%@",[self hoary:userInfo.birthday]] envelope:userInfo.sex];

    
    
    self.person.hidden = !(userInfo.sex == Gender_Male && userInfo.novice);
    
    [self.person mas_updateConstraints:^(MASConstraintMaker *make) {
        
        make.left.equalTo(self.flagSend.mas_right).offset(self.person.hidden?0:4);
        
        make.width.mas_equalTo(self.person.hidden?0:42);
    
    }];

    
    self.message.hidden = userInfo.onlineStatus == 0;
    
    [self.message mas_updateConstraints:^(MASConstraintMaker *make) {
        
        make.left.equalTo(self.person.mas_right).offset(self.message.hidden?0:4);
        
        make.width.mas_equalTo(self.message.hidden?0:42);
    
    }];

    
    self.black.image = [UserTextImage voice:userInfo.vipLevel];
    
    self.black.hidden = (userInfo.vipLevel == 0);
    
    [self.black mas_updateConstraints:^(MASConstraintMaker *make) {
        
        make.left.mas_equalTo(self.message.mas_right).offset(self.black.hidden?0:4);
        
        make.width.mas_equalTo(self.black.hidden?0:42);
    
    }];

    
    self.flagTab.hidden = PlayColorBbbb.size.file.sex == Gender_Female;

    
    if (needUpdateRecord) {
        
        self.publicTransport.hidden = FZUtils.isEmptyString(userInfo.audioUrl);
        
        self.cost.text = [NSString stringWithFormat:@"%zd″",userInfo.audioLength];
        
        self.familyPair.hidden = NO;
        
        [self.dot stopAnimation];
        
        self.dot.hidden = YES;
    }







    
    [self.pageApp mas_updateConstraints:^(MASConstraintMaker *make) {
        
        make.bottom.mas_equalTo(self.publicTransport.mas_top).mas_offset( self.publicTransport.hidden ? 25 : -8);
    
    }];


    
    if (_picCurriculumModelBbbb.sex == Gender_Female) { 
        
        self.status.hidden = !userInfo.likeReceiveCall;
    
    } else {
        
        self.status.hidden = YES;
    }

    
    NSString *key = [AuthorShadow of];
    
    self.red.hidden = [NSUserDefaults distinguishedFlyingCross:key];

    
    if (!self.red.hidden) {
//        [AtCurrent animateMomentReleaseEntryBtn:self.angelTipImage];
        
        [[NSUserDefaults standardUserDefaults] setValue:@(YES) forKey:key];
        
        [[NSUserDefaults standardUserDefaults] synchronize];

        
        dispatch_after(dispatch_time((0ull), (int64_t)(3 * 1000000000ull)), dispatch_get_main_queue(), ^{
            
            self.red.hidden = YES;
        
        });
    }

}


- (void)setOrientation:(ColorModel *)userExtraInfo {

    
    _orientation = userExtraInfo;

    
    CGFloat h = 135;

    
    
    if (self.status.hidden) {
        
        h -= 35;
        
        [self.snap mas_updateConstraints:^(MASConstraintMaker *make) {
            
            make.top.mas_equalTo(self.flagSend.mas_bottom).offset(12);
        
        }];
    }
    
    self.pageApp.hidden = !userExtraInfo.isPlaying;

    
    if (userExtraInfo.wealthLevel > 0 && userExtraInfo.charmLevel > 0 && [PlayColorBbbb size].itemImage == skinStyle_Normal) {
        
        
        NSString *wealthLevelUrl = [NSString stringWithFormat:StringFromBooData(k_behavioralText),PlayColorBbbb.size.model,@(userExtraInfo.wealthLevel)];
        
        [self.gender sd_setImageWithURL:[NSURL URLWithString:wealthLevelUrl]];
        
        
        NSString *charmLevelUrl = [NSString stringWithFormat:StringFromBooData(kDivideData),PlayColorBbbb.size.model,@(userExtraInfo.charmLevel)];
        
        [self.castBbbb sd_setImageWithURL:[NSURL URLWithString:charmLevelUrl]];
        
        self.snap.hidden = NO;
        
        self.giftEvent.hidden = NO;

    
    }else{
        
        self.snap.hidden = YES;
        
        self.giftEvent.hidden = YES;
        
        h -= 41;
    }
    
    [self effectCellBbbb:self.picCurriculumModelBbbb.userStatus];

    
    
    CGFloat minHeight = (self.picCurriculumModelBbbb.id?h:((h) > (75) ? (h) : (75)));
    
    [self.territorialDivisionBorder mas_updateConstraints:^(MASConstraintMaker *make) {
        
        make.height.mas_equalTo(minHeight);
    
    }];
    
    [self layoutIfNeeded];
    
    self.request = minHeight + 10 + screenWidth() - 50;

    
    [self.territorialDivisionBorder family:UIRectCornerTopLeft|UIRectCornerTopRight smart:15 quantity:CGSizeMake(screenWidth(), minHeight)];
}




- (NSString *)hoary:(NSString *)brithday{
    
    NSDate* birthdayDate=[NSDate giftFormat:brithday twentyFourHourPeriodPicFormat:[NSDate place]];
    
    if (!birthdayDate) {
        
        birthdayDate = [NSDate giftFormat:StringFromBooData(k_sourceServeName) twentyFourHourPeriodPicFormat:[NSDate place]];
    }
    
    return @([birthdayDate userFamily]).stringValue;
}


- (void)effectCellBbbb:(NSInteger)userState{
    
    if (userState == 3) {
        
        self.lifeStory.hidden = NO;
        
        [self.lifeStory setTitle:StringFromBooData(k_gainValue) forState:UIControlStateNormal];
    
    }else if(userState == 2){
        
        self.lifeStory.hidden = NO;
        
        [self.lifeStory setTitle:StringFromBooData(k_accomplishmentContent) forState:UIControlStateNormal];
    
    }else if(userState == 5){
        
        self.lifeStory.hidden = NO;
        
        [self.lifeStory setTitle:StringFromBooData(kMagicYerOpenContent) forState:UIControlStateNormal];
    
    }else{
        
        self.lifeStory.hidden = YES;
    }
}


#pragma mark - actions

- (void)infoRemind:(AtControl*)sender{
    
    if (self.label) {
        
        self.label();
    }
}


- (void)sendImage{
    
    if (self.personal) {
        
        self.personal();
    }
}

- (void)visualCommunication{
    
    if (self.toCard) {
        
        self.toCard();
    }
}


- (void)orientationView{
    
    if (self.dot.videoItem) {
        
        [self.dot stepToFrame:0 andPlay:YES];
        
        return;
    }

    
    SVGAParser* parser = [[SVGAParser alloc] init];
    
    NSString *filePath = [UtilBbbb showBbbb:StringFromBooData(kImpossibleTitle)];
    
    NSData *data = [NSData dataWithContentsOfFile:filePath];
    
    NSString *key = nil;
    
    SVGAPlayer* player = self.dot;
    
    [parser parseWithData:data cacheKey:key completionBlock:^(SVGAVideoEntity * _Nonnull videoItem) {
        
        if (videoItem) {
            
            player.videoItem = videoItem;
            
            [player startAnimation];
        }
    
    } failureBlock:^(NSError * _Nonnull error) {

    
    }];
}


- (void)sum:(BOOL)isPlaying{

    
    self.dot.hidden = !isPlaying;
    
    self.familyPair.hidden = isPlaying;
    
    if (isPlaying) {
        
        [self orientationView];
    
    }else{
        
        [self.dot stopAnimation];
    }
}



- (void)withBbbb:(CGFloat)offsetY {

    
    if (offsetY >= 0) {
        
        self.view.frame = CGRectMake(0, 0, screenWidth(), self.view.button);
    
    }else{
        
        self.view.frame = CGRectMake(0, offsetY, screenWidth(), self.view.button - offsetY);
    }

    
    [self.view atBbbb];
}





#pragma mark - views

- (UIView *)territorialDivisionBorder{
    
    if (!_territorialDivisionBorder) {
        
        _territorialDivisionBorder = [[UIView alloc] init];
        
        _territorialDivisionBorder.backgroundColor = [UIColor whiteColor];


        
        [self addSubview:_territorialDivisionBorder];
    }
    
    return _territorialDivisionBorder;
}



- (PerspectiveView *)flagSend {
    
    if (!_flagSend) {
        
        _flagSend = [[PerspectiveView alloc] init];
        
        [self.territorialDivisionBorder addSubview:_flagSend];
    }
    
    return _flagSend;
}


- (UIImageView *)person{
    
    if (!_person) {
        
        _person = [[UIImageView alloc] init];
        
        _person.image = [UserTextImage imageNamed:StringFromBooData(k_privatelyValue)];
        
        [self.territorialDivisionBorder addSubview:_person];
    }
    
    return _person;
}

- (UIImageView *)flagTab{
    
    if (!_flagTab) {
        
        _flagTab = [[UIImageView alloc] init];
        
        _flagTab.image = [UserTextImage imageNamed:StringFromBooData(kThreePeakData)];
        
        [self.territorialDivisionBorder addSubview:_flagTab];
    }
    
    return _flagTab;
}

- (UIImageView *)message{
    
    if (!_message) {
        
        _message = [[UIImageView alloc] init];
        
        _message.image = [UserTextImage imageNamed:StringFromBooData(kGalleryData)];
        
        [self.territorialDivisionBorder addSubview:_message];
    }
    
    return _message;
}

- (UIImageView *)status {
    
    if (!_status) {
        
        _status = [[UIImageView alloc] init];
        
        _status.image = [UserTextImage imageNamed:StringFromBooData(k_journeyValue)];
        
        [self.territorialDivisionBorder addSubview:_status];
    }
    
    return _status;
}

- (UIView *)snap{
    
    if (!_snap) {
        
        _snap = [[UIView alloc] init];
        
        _snap.layer.cornerRadius = 5;
        
        _snap.backgroundColor = [UIColor color:StringFromBooData(kMuseumContent)];
        
        [self.territorialDivisionBorder addSubview:_snap];
    }
    
    return _snap;
}

- (UILabel *)hide{
    
    if (!_hide) {
        
        _hide = [[UILabel alloc] init];;
        
        _hide.text = StringFromBooData(k_permitTitle);
        
        _hide.font = [UIFont regularShared:13];
        
        _hide.textColor = [ShowColor current];
        
        [self.snap addSubview:_hide];
    }
    
    return _hide;
}


- (UIImageView *)gender{
    
    if (!_gender) {
        
        _gender = [[UIImageView alloc] init];;
        
        [self.snap addSubview:_gender];
    }
    
    return _gender;
}

- (UIView *)giftEvent{
    
    if (!_giftEvent) {
        
        _giftEvent = [[UIView alloc] init];
        
        _giftEvent.layer.cornerRadius = 5;
        
        _giftEvent.backgroundColor = [UIColor color:StringFromBooData(kMuseumContent)];
        
        [self.territorialDivisionBorder addSubview:_giftEvent];
    }
    
    return _giftEvent;
}

- (UILabel *)withRemark{
    
    if (!_withRemark) {
        
        _withRemark = [[UILabel alloc] init];;
        
        _withRemark.text = StringFromBooData(kEmpireDisturbText);
        
        _withRemark.font = [UIFont regularShared:13];
        
        _withRemark.textColor = [ShowColor current];
        
        [self.giftEvent addSubview:_withRemark];
    }
    
    return _withRemark;
}


- (UIImageView *)castBbbb{
    
    if (!_castBbbb) {
        
        _castBbbb = [[UIImageView alloc] init];;
        
        [self.giftEvent addSubview:_castBbbb];
    }
    
    return _castBbbb;
}


- (AtControl *)publicTransport{
    
    if (!_publicTransport) {
        
        _publicTransport = [AtControl new];
        
        [_publicTransport setImage:[UserTextImage imageNamed:StringFromBooData(kMarkName)] forState:(UIControlStateNormal)];
        
        [_publicTransport addTarget:self action:@selector(sendImage) forControlEvents:(UIControlEventTouchUpInside)];
        
        [self addSubview:_publicTransport];
    }
    
    return _publicTransport;
}

- (AtControl *)pageApp{
    
    if (!_pageApp) {
        
        _pageApp = [AtControl buttonWithType:(UIButtonTypeCustom)];
        
        _pageApp.hidden = YES;
        
        [_pageApp setImage:[UserTextImage imageNamed:StringFromBooData(kRadName)] forState:UIControlStateNormal];
        
        [_pageApp setTitle:StringFromBooData(k_numberLeapName) forState:UIControlStateNormal];
        
        _pageApp.titleLabel.font = [UIFont regularShared:12];
        
        [_pageApp setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
        
        NSArray* colors = @[(id)[UIColor color:StringFromBooData(kShelfCountelOweTitle)].CGColor,(id)[UIColor color:StringFromBooData(k_establishContent)].CGColor];
        
        UIImage* norImage = [UIImage gatefold:colors standard:CGSizeMake(66, 25) mightHaveBeen:false];
        
        _pageApp.number = 4;
        
        [_pageApp addTarget:self action:@selector(visualCommunication) forControlEvents:UIControlEventTouchUpInside];
        
        _pageApp.layer.cornerRadius = 12.5;
        
        _pageApp.layer.masksToBounds = YES;
        
        [_pageApp setBackgroundImage:norImage forState:UIControlStateNormal];
        
        [self addSubview:_pageApp];
    }
    
    return _pageApp;
}



- (UIImageView *)black {
    
    if (!_black) {
        
        _black = [[UIImageView alloc] init];
        
        [self addSubview:_black];
    }
    
    return _black;
}


- (UIImageView *)familyPair{
    
    if (!_familyPair) {
        
        _familyPair = [[UIImageView alloc] init];
        
        _familyPair.image = [UserTextImage imageNamed:StringFromBooData(kSlopeValue)];
        
        [self.publicTransport addSubview:_familyPair];

        
        [_familyPair mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.left.offset(14);
            
            (void)make.centerY;
            
            make.size.mas_equalTo(CGSizeMake(48, 14));
        
        }];
    }
    
    return _familyPair;
}

- (UILabel *)cost{
    
    if (!_cost) {
        
        _cost = [[UILabel alloc] init];
        
        _cost.textColor = [UIColor whiteColor];
        
        _cost.font = [UIFont underbelly:(PFSCTypeRegular) substance:14.0f];
        
        [self.publicTransport addSubview:_cost];

        
        [_cost mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.right.offset(-14);
            
            (void)make.centerY;
        
        }];
    }
    
    return _cost;
}

- (SVGAPlayer *)dot{
    
    if (!_dot) {
        
        _dot = [[SVGAPlayer alloc] initWithFrame:CGRectMake(0, 0, actualWidth(65), actualWidth(65))];
        
        _dot.loops = NO;
        
        _dot.clearsAfterStop = NO;
        
        _dot.delegate = self;
        
        _dot.userInteractionEnabled = NO;
        
        _dot.contentMode = UIViewContentModeScaleToFill;
        
        [self.publicTransport addSubview:_dot];

        
        [_dot mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.centerY.equalTo(self.publicTransport);
            
            make.centerX.equalTo(self.familyPair).offset(-2);
            
            make.size.equalTo(self.familyPair);
        
        }];
    }
    
    return _dot;
}



- (UIButton *)lifeStory{
    
    if (!_lifeStory) {
        
        _lifeStory = [UIButton buttonWithType:UIButtonTypeCustom];
        
        _lifeStory.layer.cornerRadius = 14;
        
        _lifeStory.clipsToBounds = YES;
        
        _lifeStory.backgroundColor = [UIColor colorWithRed:(255)/255.0f green:(80)/255.0f blue:(109)/255.0f alpha:1];
        
        [_lifeStory setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
        
        _lifeStory.titleLabel.font = [UIFont underbelly:(PFSCTypeRegular) substance:14.0f];
        
        [_lifeStory setImage:[UserTextImage imageNamed:StringFromBooData(kModelMatedData)] forState:UIControlStateNormal];
        
        [self addSubview:_lifeStory];
    }
    
    return _lifeStory;
}




- (SharedErrorView *)view{

    
    if (!_view) {
        
        _view = [[SharedErrorView alloc] init];
        
        _view.button = screenWidth();
        
        [self insertSubview:_view atIndex:0];

    }

    
    return _view;
}


- (UIButton *)red{
    
    if (!_red) {
        
        _red = [[UIButton alloc] init];
        
        _red.hidden = YES;
        
        _red.imageView.contentMode = UIViewContentModeScaleAspectFill;
        
        [_red setImage:[UserTextImage imageNamed:StringFromBooData(k_legText)] forState:UIControlStateNormal];
        
        [self.territorialDivisionBorder addSubview:_red];
    }
    
    return _red;
}


@end


Byte * BooDataToCache(Byte *data) {
    int succeedBlock = data[0];
    int remindToon = data[1];
    int topical = data[2];
    if (!succeedBlock) return data + topical;
    for (int i = 0; i < remindToon / 2; i++) {
        int begin = topical + i;
        int end = topical + remindToon - i - 1;
        Byte temp = data[begin];
        data[begin] = data[end];
        data[end] = temp;
    }
    data[0] = 0;
    data[topical + remindToon] = 0;
    return data + topical;
}

NSString *StringFromBooData(Byte *data) {
    return [NSString stringWithUTF8String:(char *)BooDataToCache(data)];
}  
