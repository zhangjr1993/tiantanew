
#import <Foundation/Foundation.h>

NSString *StringFromKeyData(Byte *data);


//: 取消
Byte kWeekSumactContent[] = {59, 6, 3, 136, 182, 230, 150, 143, 229, 77};


//: iconYlJm6A_erom_llac_srehto_video
Byte k_walkingPlacementValue[] = {96, 33, 8, 48, 57, 235, 216, 78, 111, 101, 100, 105, 118, 95, 111, 116, 104, 101, 114, 115, 95, 99, 97, 108, 108, 95, 109, 111, 114, 101, 95, 65, 54, 109, 74, 108, 89, 110, 111, 99, 105, 90};


//: （可获得%@积分收益/分钟）
Byte k_testifyName[] = {91, 36, 5, 225, 118, 137, 188, 239, 159, 146, 233, 134, 136, 229, 47, 138, 155, 231, 182, 148, 230, 134, 136, 229, 175, 167, 231, 64, 37, 151, 190, 229, 183, 142, 232, 175, 143, 229, 136, 188, 239, 40};


//: controller
Byte k_penalBiologicName[] = {47, 10, 7, 174, 52, 61, 240, 114, 101, 108, 108, 111, 114, 116, 110, 111, 99, 189};


//: uid
Byte kLiveNeighborValue[] = {58, 3, 6, 117, 235, 136, 100, 105, 117, 37};


//: （免打扰）
Byte kAskFestivalData[] = {98, 15, 3, 137, 188, 239, 176, 137, 230, 147, 137, 230, 141, 133, 229, 136, 188, 239, 250};


//: iconR9bCV1_erom_llac_srehto_voice
Byte k_legMootData[] = {28, 33, 7, 15, 173, 136, 146, 101, 99, 105, 111, 118, 95, 111, 116, 104, 101, 114, 115, 95, 99, 97, 108, 108, 95, 109, 111, 114, 101, 95, 49, 86, 67, 98, 57, 82, 110, 111, 99, 105, 125};


//: data
Byte kNumberProvinceTitle[] = {36, 4, 3, 97, 116, 97, 100, 12};


//: page
Byte kReadilyTitle[] = {51, 4, 7, 27, 25, 172, 137, 101, 103, 97, 112, 160};


//: （免费）
Byte k_unemploymentContent[] = {50, 12, 5, 18, 166, 137, 188, 239, 185, 180, 232, 141, 133, 229, 136, 188, 239, 217};


//: 对方未开通该功能
Byte kSuspendData[] = {60, 24, 12, 157, 197, 145, 27, 3, 237, 84, 147, 89, 189, 131, 232, 159, 138, 229, 165, 175, 232, 154, 128, 233, 128, 188, 229, 170, 156, 230, 185, 150, 230, 185, 175, 229, 120};


//: rlkk/xqaRlkkKzxi
Byte kMagnitudeelBureauTitle[] = {11, 16, 8, 188, 185, 35, 34, 43, 105, 120, 122, 75, 107, 107, 108, 82, 97, 113, 120, 47, 107, 107, 108, 114, 130};


//: 语音通话
Byte k_readilyText[] = {38, 12, 10, 161, 8, 100, 184, 194, 31, 134, 157, 175, 232, 154, 128, 233, 179, 159, 233, 173, 175, 232, 67};


//: （%@%@/分钟）
Byte k_girlTitle[] = {91, 17, 6, 185, 82, 109, 137, 188, 239, 159, 146, 233, 134, 136, 229, 47, 64, 37, 64, 37, 136, 188, 239, 166};


//: 视频通话
Byte kRemoveText[] = {19, 12, 6, 32, 7, 207, 157, 175, 232, 154, 128, 233, 145, 162, 233, 134, 167, 232, 110};


//: talkAction
Byte k_areaTitle[] = {93, 10, 5, 194, 98, 110, 111, 105, 116, 99, 65, 107, 108, 97, 116, 54};


//: 通话记录
Byte k_modelSuspendBucketValue[] = {97, 12, 9, 161, 68, 198, 177, 135, 6, 149, 189, 229, 176, 174, 232, 157, 175, 232, 154, 128, 233, 130};


//: 暂无通话记录
Byte k_labelResidencyTitle[] = {66, 18, 3, 149, 189, 229, 176, 174, 232, 157, 175, 232, 154, 128, 233, 160, 151, 230, 130, 154, 230, 220};


//: 同性之间不支持通话
Byte k_softlyName[] = {14, 27, 9, 182, 144, 208, 221, 92, 20, 157, 175, 232, 154, 128, 233, 129, 140, 230, 175, 148, 230, 141, 184, 228, 180, 151, 233, 139, 185, 228, 167, 128, 230, 140, 144, 229, 44};

// __DEBUG__
// __CLOSE_PRINT__
//
//  ProductViewController.m
//  Talking
//
//  Created by GJ on 2021/10/19.
//  Copyright © 2021 app. All rights reserved.
//
//: 
//: 
//: 
//: 
//: 
//: 
//: @interface LFCSocialCallRecordListVC ()<UITableViewDelegate,UITableViewDataSource,HZActionSheetDelegate>

// __M_A_C_R_O__
#import "ProductViewController.h"
#import "AddressViewCell.h"
#import "TrailMax.h"
#import "ManagingDirectorBbbb.h"
#import "UIScrollView+LFCReFresh.h"
#import "ListControllerBbbb.h"

@interface ProductViewController ()<UITableViewDelegate,UITableViewDataSource,HeadIdentity>


//: @property (nonatomic, strong) UITableView           * tableView;
@property (nonatomic, strong) UITableView * first;
//: @property (nonatomic, strong) NSMutableArray        * dataSource;
@property (nonatomic, strong) NSMutableArray * treatArray;
//: @property (nonatomic, strong) LFCEmptyDataHandler   * emptyHandler;
@property (nonatomic, strong) TrailMax * emptyFind;
//: @property (nonatomic, strong) LFCSocialCallRecordModel   * selectModel;
@property (nonatomic, strong) SocietalModel * listOf;

//: @property (nonatomic, assign) NSInteger     page;
@property (nonatomic, assign) NSInteger along;
//: @property (nonatomic, assign) BOOL          requestCall;
@property (nonatomic, assign) BOOL serverUser;

//: @end
@end

//: @implementation LFCSocialCallRecordListVC
@implementation ProductViewController

//: - (void)viewDidLoad {
- (void)viewDidLoad {
    //: [super viewDidLoad];
    [super viewDidLoad];
    //: self.title = @"通话记录";
    self.title = StringFromKeyData(k_modelSuspendBucketValue);
    //: self.view.backgroundColor = [UIColor whiteColor];
    self.view.backgroundColor = [UIColor whiteColor];
    //: [self initdateRefresh];
    [self initRequest];

}
//: - (void)initdateRefresh {
- (void)initRequest {
    //: @weakify(self);
    @autoreleasepool {} __weak __typeof__(self) self_weak_ = (self);;
    //: [self.tableView addHeaderRefresh:^{
    [self.first mark:^{
        //: @strongify(self);
        @autoreleasepool {}
         __strong __typeof__(self) self = self_weak_;
                        ;
        //: self.page = 0;
        self.along = 0;
        //: [self func__requestData];
        [self totalroduce];
    //: }];
    }];

    //: [self.tableView addFooterRefresh:^{
    [self.first max:^{
        //: @strongify(self);
        @autoreleasepool {}
         __strong __typeof__(self) self = self_weak_;
                        ;
        //: self.page ++;
        self.along ++;
        //: [self func__requestData];
        [self totalroduce];
    //: }];
    }];
    //: [self.tableView.mj_header beginRefreshing];
    [self.first.mj_header beginRefreshing];
}

//: - (void)func__requestData{
- (void)totalroduce{
    //: TalkingRequest* setup = [TalkingRequest new];
    HologramHead* setup = [HologramHead new];
    //: setup.requestPath = @"rlkk/xqaRlkkKzxi";
    setup.user = StringFromKeyData(kMagnitudeelBureauTitle);
    //: setup.params = @{@"page":@(self.page).description};
    setup.pushTimeId = @{StringFromKeyData(kReadilyTitle):@(self.along).description};
    //: [[AppManager sharedAppManager].dao startRequest:setup withFinishBlock:^(TalkingRequest *requestModel, NSDictionary *component, NSError *error) {
    [[PlayColorBbbb size].admin with:setup editFee:^(HologramHead *requestModel, NSDictionary *component, NSError *error) {
        //: [self.tableView endRefresh];
        [self.first status];
        //: if (component == nil && error != nil) {
        if (component == nil && error != nil) {
            //: [self showStatusBarError:error];
            [self user:error];
            //: return;
            return;
        }
        //: if (self.page == 0) {
        if (self.along == 0) {
            //: [self.dataSource removeAllObjects];
            [self.treatArray removeAllObjects];
        }

        //: NSArray *tempArr = [LFCSocialCallRecordModel arrayOfModelsFromDictionaries:component[@"data"] error:nil];
        NSArray *tempArr = [SocietalModel arrayOfModelsFromDictionaries:component[StringFromKeyData(kNumberProvinceTitle)] error:nil];

        //: if (tempArr.count == 0) {
        if (tempArr.count == 0) {
            //: [self.tableView.mj_footer endRefreshingWithNoMoreData];
            [self.first.mj_footer endRefreshingWithNoMoreData];
        //: }else{
        }else{
            //: [self.tableView.mj_footer resetNoMoreData];
            [self.first.mj_footer resetNoMoreData];
        }
        //: [self.dataSource addObjectsFromArray:tempArr];
        [self.treatArray addObjectsFromArray:tempArr];
        //: self.tableView.mj_footer.hidden = (self.dataSource.count == 0);
        self.first.mj_footer.hidden = (self.treatArray.count == 0);
        //: self.tableView.emptyDataSetSource = self.emptyHandler;
        self.first.emptyDataSetSource = self.emptyFind;
        //: self.tableView.emptyDataSetDelegate = self.emptyHandler;
        self.first.emptyDataSetDelegate = self.emptyFind;
        //: [self.tableView reloadData];
        [self.first reloadData];
    //: } ];
    } ];
}


//: - (void)func__clickReCallBtn{
- (void)liveHead{
    //: if (self.selectModel.sex == [AppManager sharedAppManager].loginUser.sex) {
    if (self.listOf.sex == [PlayColorBbbb size].file.sex) {
        //: [self showStatusBarErrorStr:@"同性之间不支持通话"];
        [self push:StringFromKeyData(k_softlyName)];
        //: return;
        return;
    }
    //: if (self.selectModel.voiceAuth == 0) {
    if (self.listOf.voiceAuth == 0) {
        //: [self showStatusBarErrorStr:(@"对方未开通该功能")];
        [self push:(StringFromKeyData(kSuspendData))];
        //: return;
        return;
    }
    //判断要完备 -- 不然会插入一个nil
    //: NSMutableString *voiceText =  [[NSMutableString alloc] initWithString:@"语音通话"];
    NSMutableString *voiceText = [[NSMutableString alloc] initWithString:StringFromKeyData(k_readilyText)];

    //: if (self.selectModel.voiceAuth == -1){
    if (self.listOf.voiceAuth == -1){
        //: [voiceText appendString:@"（免打扰）"];
        [voiceText appendString:StringFromKeyData(kAskFestivalData)];
    //: }else{
    }else{
        //: if ([AppManager sharedAppManager].loginUser.sex == Gender_Female) {
        if ([PlayColorBbbb size].file.sex == Gender_Female) {
            //: if (self.selectModel.voiceBean.integerValue == 0) {
            if (self.listOf.voiceBean.integerValue == 0) {
                //: [voiceText appendString:@"（免费）"];
                [voiceText appendString:StringFromKeyData(k_unemploymentContent)];
            //: }else{
            }else{
                //: [voiceText appendFormat:@"（可获得%@积分收益/分钟）",self.selectModel.voiceBean];
                [voiceText appendFormat:StringFromKeyData(k_testifyName),self.listOf.voiceBean];
            }
        //: }else{
        }else{
            //: if (self.selectModel.voiceCoin.integerValue == 0) {
            if (self.listOf.voiceCoin.integerValue == 0) {
                //: [voiceText appendString:@"（免费）"];
                [voiceText appendString:StringFromKeyData(k_unemploymentContent)];
            //: }else{
            }else{
                //: [voiceText appendFormat:@"（%@%@/分钟）",self.selectModel.voiceCoin,[Package appUnitName]];
                [voiceText appendFormat:@"（%@%@/分钟）",self.listOf.voiceCoin,[ExamineColorBbbb controlUser]];
            }
        }
    }
    //: NSMutableString *videoText =  [[NSMutableString alloc] initWithString:@"视频通话"];
    NSMutableString *videoText = [[NSMutableString alloc] initWithString:StringFromKeyData(kRemoveText)];

    //: if (self.selectModel.videoAuth == -1){
    if (self.listOf.videoAuth == -1){
        //: [videoText appendString:@"（免打扰）"];
        [videoText appendString:StringFromKeyData(kAskFestivalData)];
    //: }else{
    }else{
        //: if ([AppManager sharedAppManager].loginUser.sex == Gender_Female) {
        if ([PlayColorBbbb size].file.sex == Gender_Female) {
            //: if (self.selectModel.videoBean.integerValue == 0) {
            if (self.listOf.videoBean.integerValue == 0) {
                //: [videoText appendString:@"（免费）"];
                [videoText appendString:StringFromKeyData(k_unemploymentContent)];
            //: }else{
            }else{
                //: [videoText appendFormat:@"（可获得%@积分收益/分钟）",self.selectModel.videoBean];
                [videoText appendFormat:StringFromKeyData(k_testifyName),self.listOf.videoBean];
            }
        //: }else{
        }else{
            //: if (self.selectModel.videoCoin.integerValue == 0) {
            if (self.listOf.videoCoin.integerValue == 0) {
                //: [videoText appendString:@"（免费）"];
                [videoText appendString:StringFromKeyData(k_unemploymentContent)];
            //: }else{
            }else{
                //: [videoText appendFormat:@"（%@%@/分钟）",self.selectModel.videoCoin,[Package appUnitName]];
                [videoText appendFormat:@"（%@%@/分钟）",self.listOf.videoCoin,[ExamineColorBbbb controlUser]];
            }
        }
    }
    //: NSArray* images = @[@"iconYlJm6A_erom_llac_srehto_video",@"iconR9bCV1_erom_llac_srehto_voice"];
    NSArray* images = @[StringFromKeyData(k_walkingPlacementValue),StringFromKeyData(k_legMootData)];
    //: HZActionSheet *sheet = [[HZActionSheet alloc] initWithTitle:@""
    SheetControl *sheet = [[SheetControl alloc] initWithFamily:@""
                                                       //: delegate:self
                                                       successful:self
                                              //: cancelButtonTitle: @"取消"
                                              record: StringFromKeyData(kWeekSumactContent)
                                      //: destructiveButtonIndexSet:nil
                                      voice:nil
                                              //: otherButtonTitles:@[[videoText copy],[voiceText copy]]];
                                              message:@[[videoText copy],[voiceText copy]]];
    //: sheet.titleImages = images;
    sheet.topMedal = images;
    //: sheet.userInfo = @{@"controller":self};
    sheet.agreeDictionary = @{StringFromKeyData(k_penalBiologicName):self};
    //: sheet.identify = @"talkAction";
    sheet.collection = StringFromKeyData(k_areaTitle);
    //: [sheet showInView:self.view];
    [sheet fellowFamily:self.view];
}
//: #pragma mark - TableViewDelegate
#pragma mark - TableViewDelegate
//: - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    //: return self.dataSource.count;
    return self.treatArray.count;
}

//: - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    //: LFCSocialCallRecordCell *cell = [tableView dequeueReusableCellWithIdentifier:[RowBbbb LFCSocialCallRecordCellID]];
    AddressViewCell *cell = [tableView dequeueReusableCellWithIdentifier:[RowBbbb recordWith]];
    //: LFCSocialCallRecordModel *model = [self.dataSource objectAtIndex:indexPath.row];
    SocietalModel *model = [self.treatArray objectAtIndex:indexPath.row];
    //: [cell configCellWithModel:model];
    [cell voice:model];
    //: @weakify(self);
    @autoreleasepool {} __weak __typeof__(self) self_weak_ = (self);;

    //: cell.reCallBtnBlcok = ^{
    cell.openName = ^{
        //: @strongify(self);
        @autoreleasepool {}
         __strong __typeof__(self) self = self_weak_;
                        ;
        //: self.selectModel = model;
        self.listOf = model;
        //: [self func__clickReCallBtn];
        [self liveHead];
    //: };
    };
    //: cell.nickNameBtnBlcok = ^{
    cell.bbbb = ^{
        //: @strongify(self);
        @autoreleasepool {}
         __strong __typeof__(self) self = self_weak_;
                        ;
        //: [LFCUserDetailInfoController pushUserMain:model.uid sourceViewController:self];
        [ListControllerBbbb compartment:model.uid tv:self];
    //: };
    };
    //: return cell;
    return cell;
}
//: - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    //: return 76;
    return 76;
}
//: - (void)scrollViewDidScroll:(UIScrollView *)scrollView {
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    //: !self.scrollCallback ?: self.scrollCallback(scrollView);
    !self.request ?: self.request(scrollView);
}
//: #pragma mark - HZActionSheetDelegate
#pragma mark - HeadIdentity
//: - (void)actionSheet:(HZActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex{
- (void)expanse:(SheetControl *)actionSheet stage:(NSInteger)buttonIndex{
    //: if (buttonIndex == 0) {
    if (buttonIndex == 0) {
        //: [self startVideoTalkAction];
        [self pageBbbb];
    //: }else if (buttonIndex == 1){
    }else if (buttonIndex == 1){
        //: [self startAudioTalkAction];
        [self userEnable];
    }
}
//: - (void)startAudioTalkAction{
- (void)userEnable{
    //: if (self.requestCall) {
    if (self.serverUser) {
        //: return;
        return;
    }
    //: [self func__checkAudioAuth];
    [self list];
}

//: - (void)startVideoTalkAction{
- (void)pageBbbb{
    //: if (self.requestCall) {
    if (self.serverUser) {
        //: return;
        return;
    }
    //: [self func__checkVideoAuth];
    [self theInfo];
}

//: - (void)func__checkAudioAuth {
- (void)list {

    //: [self checkMicroPhoneAuthWithTip:[Package authTipStr:2] isShowAlert:YES AuthBlock:^{
    [self aaaa:[ExamineColorBbbb naturalEvent:2] customBbbb:YES pair:^{
        //: [self func_request1V1TakingCallVideo:NO];
        [self enough:NO];
    //: }];
    }];
}

//: - (void)func__checkVideoAuth{
- (void)theInfo{
    //: [self checkMicroAndVideoPhoneAuthWithTip:[Package authTipStr:1] isShowAlert:YES AuthBlock:^{
    [self auth:[ExamineColorBbbb naturalEvent:1] withDoing:YES fresh:^{
        //: [self func_request1V1TakingCallVideo:YES];
        [self enough:YES];
    //: }];
    }];
}
/// 1V1 通话
/// @param isVideo YES 视频通话 语音通话
//: - (void)func_request1V1TakingCallVideo:(BOOL)isVideoCall{
- (void)enough:(BOOL)isVideoCall{
    //: NSString* uidStr = [NSString stringWithFormat:@"%zd",self.selectModel.uid];
    NSString* uidStr = [NSString stringWithFormat:@"%zd",self.listOf.uid];
    //: @weakify(self);
    @autoreleasepool {} __weak __typeof__(self) self_weak_ = (self);;
    //: [[LFC1v1TalkSocketManager sharedTalkManager] setanchorCallBlock:^(NSDictionary* response,NSError* error) {
    [[ManagingDirectorBbbb sleepingDraught] setAnchorLaunchMale:^(NSDictionary* response,NSError* error) {
        //: @strongify(self);
        @autoreleasepool {}
         __strong __typeof__(self) self = self_weak_;
                        ;
        //: [MBProgressHUD hideHUDForView:self.view animated:YES];
        [MBProgressHUD hideHUDForView:self.view animated:YES];
        //: if (!error) {
        if (!error) {
            //: NSMutableDictionary *info = [NSMutableDictionary dictionaryWithDictionary:response];
            NSMutableDictionary *info = [NSMutableDictionary dictionaryWithDictionary:response];
            //: info[@"uid"] = uidStr;
            info[StringFromKeyData(kLiveNeighborValue)] = uidStr;
            //: [[AppManager sharedAppManager] func__start1v1TalkCallWithInfo:info];
            [[PlayColorBbbb size] forefront:info];
        //: }else{
        }else{
            //: if (error.code == GJ1v1TalkSocketErrorMoneyLack) {
            if (error.code == GJ1v1TalkSocketErrorMoneyLack) {//余额不足
                //: [[AppManager sharedAppManager] func__showHalfChargeViewWithTitle:[Package halfTipStr:NO]];
                [[PlayColorBbbb size] natalDayName:[ExamineColorBbbb package:NO]];
            //: }else{
            }else{
                //: [self showStatusBarError:error];
                [self user:error];
            }
        }
        //: self.requestCall = NO;
        self.serverUser = NO;
    //: }];
    }];
    //: self.requestCall = YES;
    self.serverUser = YES;
    //: [MBProgressHUD showHUDAddedTo:self.view animated:YES];
    [MBProgressHUD showHUDAddedTo:self.view animated:YES];
    //: [[LFC1v1TalkSocketManager sharedTalkManager] func__webSocketTryToCallUser:self.selectModel.uid type:isVideoCall];
    [[ManagingDirectorBbbb sleepingDraught] quick:self.listOf.uid list:isVideoCall];
    //: dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(20 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{
    dispatch_after(dispatch_time((0ull), (int64_t)(20 * 1000000000ull)), dispatch_get_main_queue(), ^{
        //: @strongify(self);
        @autoreleasepool {}
         __strong __typeof__(self) self = self_weak_;
                        ;
        //: self.requestCall = NO;
        self.serverUser = NO;
        //: [MBProgressHUD hideHUDForView:self.view animated:YES];
        [MBProgressHUD hideHUDForView:self.view animated:YES];
    //: });
    });
}

//: - (UIView *)listView{
- (UIView *)listView{
    //: return self.view;
    return self.view;
}
//: - (UIScrollView *)listScrollView{
- (UIScrollView *)listScrollView{
    //: return self.tableView;
    return self.first;
}

//: - (void)listViewDidScrollCallback:(void (^)(UIScrollView *scrollView))callback{
- (void)listViewDidScrollCallback:(void (^)(UIScrollView *scrollView))callback{
    //: self.scrollCallback = callback;
    self.request = callback;
}

//: #pragma - mark - 懒加载
#pragma - mark - 懒加载
//: -(UITableView *)tableView{
-(UITableView *)first{
    //: if (!_tableView) {
    if (!_first) {
        //: _tableView = [[UITableView alloc]initWithFrame:CGRectZero style:UITableViewStylePlain];
        _first = [[UITableView alloc]initWithFrame:CGRectZero style:UITableViewStylePlain];
        //: _tableView.backgroundColor = [UIColor whiteColor];
        _first.backgroundColor = [UIColor whiteColor];
        //: [_tableView registerClass:[LFCSocialCallRecordCell class] forCellReuseIdentifier:[RowBbbb LFCSocialCallRecordCellID]];
        [_first registerClass:[AddressViewCell class] forCellReuseIdentifier:[RowBbbb recordWith]];
        //: _tableView.separatorStyle = UITableViewCellSeparatorStyleNone;
        _first.separatorStyle = UITableViewCellSeparatorStyleNone;
        //: _tableView.delegate = self;
        _first.delegate = self;
        //: _tableView.dataSource = self;
        _first.dataSource = self;
        //: _tableView.tableFooterView = [UIView new];
        _first.tableFooterView = [UIView new];
        //: _tableView.contentInsetAdjustmentBehavior = UIScrollViewContentInsetAdjustmentNever;
        _first.contentInsetAdjustmentBehavior = UIScrollViewContentInsetAdjustmentNever;
        //: [self.view addSubview:_tableView];
        [self.view addSubview:_first];
        //: [_tableView mas_makeConstraints:^(MASConstraintMaker *make) {
        [_first mas_makeConstraints:^(MASConstraintMaker *make) {
            //: make.edges.mas_equalTo(0);
            make.edges.mas_equalTo(0);
        //: }];
        }];
    }
    //: return _tableView;
    return _first;
}
//: - (NSMutableArray *)dataSource {
- (NSMutableArray *)treatArray {
    //: if (!_dataSource) {
    if (!_treatArray) {
        //: _dataSource = [NSMutableArray array];
        _treatArray = [NSMutableArray array];
    }
    //: return _dataSource;
    return _treatArray;
}
//: - (LFCEmptyDataHandler *)emptyHandler{
- (TrailMax *)emptyFind{
    //: if (!_emptyHandler) {
    if (!_emptyFind) {
        //: _emptyHandler = [LFCEmptyDataHandler emptyDataHandler];
        _emptyFind = [TrailMax manager];
        //: _emptyHandler.config.text = @"暂无通话记录";
        _emptyFind.representationLevel.cycleData = StringFromKeyData(k_labelResidencyTitle);
    }
    //: return _emptyHandler;
    return _emptyFind;
}
/*
#pragma mark - LiquidEcstasy

// In a storyboard-based application, you will often want to do a little preparation before navigation
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    // Get the new view controller using [segue destinationViewController].
    // Pass the selected object to the new view controller.
}
*/

//: @end
@end


Byte * KeyDataToCache(Byte *data) {
    int bureau = data[0];
    int sizeSpar = data[1];
    int edgeValueGray = data[2];
    if (!bureau) return data + edgeValueGray;
    for (int i = 0; i < sizeSpar / 2; i++) {
        int begin = edgeValueGray + i;
        int end = edgeValueGray + sizeSpar - i - 1;
        Byte temp = data[begin];
        data[begin] = data[end];
        data[end] = temp;
    }
    data[0] = 0;
    data[edgeValueGray + sizeSpar] = 0;
    return data + edgeValueGray;
}

NSString *StringFromKeyData(Byte *data) {
    return [NSString stringWithUTF8String:(char *)KeyDataToCache(data)];
}  
