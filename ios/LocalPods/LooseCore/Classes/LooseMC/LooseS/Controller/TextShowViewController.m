
#import <Foundation/Foundation.h>

NSString *StringFromAttitudeData(Byte *data);


//: 离线状态下会出现无法使用音视频通话功能，或无法收发消息的情况，请重新启动APP。
Byte k_portfolioFinishData[] = {41, 114, 42, 6, 131, 129, 17, 208, 229, 17, 228, 233, 17, 180, 224, 16, 170, 171, 14, 226, 181, 14, 230, 196, 15, 177, 228, 17, 184, 218, 16, 193, 202, 16, 221, 191, 14, 231, 233, 17, 190, 210, 19, 201, 221, 18, 209, 176, 19, 204, 187, 19, 170, 196, 18, 217, 199, 15, 180, 201, 18, 173, 231, 25, 230, 182, 16, 178, 192, 16, 193, 202, 16, 221, 191, 16, 190, 224, 15, 185, 187, 16, 224, 178, 16, 171, 217, 17, 196, 174, 16, 173, 175, 15, 176, 223, 25, 230, 182, 18, 217, 225, 19, 177, 183, 16, 192, 218, 15, 186, 217, 15, 180, 210, 107, 122, 122, 13, 170, 172, 140};


//: female_chat_state_busy
Byte kPlacementValue[] = {76, 22, 17, 7, 130, 139, 174, 119, 118, 126, 114, 125, 118, 112, 116, 121, 114, 133, 112, 132, 133, 114, 133, 118, 112, 115, 134, 132, 138, 51};


//: 谁看过我
Byte kResidencyValue[] = {86, 12, 15, 14, 67, 204, 247, 84, 234, 188, 110, 106, 198, 36, 247, 191, 144, 246, 171, 154, 247, 206, 150, 245, 151, 160, 139};


//: bType
Byte k_removeText[] = {70, 5, 36, 7, 102, 119, 12, 134, 120, 157, 148, 137, 72};


//: 忙碌状态说明有多人给你发消息你未回复，此状态下系统推荐将减少。
Byte kBraveData[] = {41, 93, 20, 6, 49, 87, 249, 211, 173, 251, 182, 160, 251, 158, 202, 250, 148, 149, 252, 195, 200, 250, 172, 162, 250, 176, 157, 249, 184, 174, 248, 206, 206, 251, 207, 173, 248, 209, 180, 249, 163, 165, 250, 202, 156, 250, 149, 195, 248, 209, 180, 250, 176, 190, 249, 175, 178, 249, 184, 161, 3, 208, 160, 250, 193, 184, 251, 158, 202, 250, 148, 149, 248, 204, 159, 251, 199, 207, 251, 207, 179, 250, 162, 188, 252, 161, 164, 249, 196, 154, 249, 155, 163, 249, 196, 165, 247, 148, 150, 115};


//: 您的网络不太好，请重新启动APP恢复
Byte kElevenName[] = {98, 48, 76, 8, 150, 111, 144, 124, 50, 206, 244, 51, 230, 208, 51, 9, 221, 51, 7, 232, 48, 4, 217, 49, 240, 246, 49, 241, 9, 59, 8, 216, 52, 251, 3, 53, 211, 217, 50, 226, 252, 49, 220, 251, 49, 214, 244, 141, 156, 156, 50, 205, 238, 49, 240, 217, 207};


//: bannerList
Byte kVariationRecordValue[] = {45, 10, 72, 4, 170, 169, 182, 182, 173, 186, 148, 177, 187, 188, 154};


//: gu/jtipmqii/rzmupx
Byte k_succeedData[] = {83, 18, 68, 9, 201, 242, 163, 115, 236, 171, 185, 115, 174, 184, 173, 180, 177, 181, 173, 173, 115, 182, 190, 177, 185, 180, 188, 148};


//: female_chat_state_disconect
Byte k_credibleTitle[] = {50, 27, 84, 12, 198, 188, 39, 164, 114, 213, 55, 57, 186, 185, 193, 181, 192, 185, 179, 183, 188, 181, 200, 179, 199, 200, 181, 200, 185, 179, 184, 189, 199, 183, 195, 194, 185, 183, 200, 20};


//: 99+
Byte kAlienContent[] = {90, 3, 83, 9, 50, 110, 205, 88, 185, 140, 140, 126, 155};


//: 立即开启
Byte kPathVoiceTitle[] = {23, 12, 10, 9, 3, 118, 14, 63, 218, 241, 181, 149, 239, 151, 189, 239, 198, 138, 239, 154, 185, 138};


//: female_chat_state_free
Byte kGrayData[] = {71, 22, 27, 5, 97, 129, 128, 136, 124, 135, 128, 122, 126, 131, 124, 143, 122, 142, 143, 124, 143, 128, 122, 129, 141, 128, 128, 145};


//: 开启推送通知，及时接受新消息~ 
Byte kValueGirlData[] = {66, 44, 97, 8, 249, 248, 39, 226, 70, 29, 225, 70, 241, 16, 71, 239, 9, 74, 225, 226, 74, 225, 251, 72, 0, 6, 80, 29, 237, 70, 240, 235, 71, 248, 23, 71, 239, 6, 70, 240, 248, 71, 247, 17, 71, 23, 233, 71, 226, 16, 223, 129, 51};


//: icon_date_toast_notice
Byte k_utterValue[] = {78, 22, 26, 6, 114, 39, 131, 125, 137, 136, 121, 126, 123, 142, 127, 121, 142, 137, 123, 141, 142, 121, 136, 137, 142, 131, 125, 127, 41};


//: gu/tiqo/xqaTmoqlsGixMtg
Byte kVoiceTitle[] = {21, 23, 20, 9, 158, 163, 90, 32, 170, 123, 137, 67, 136, 125, 133, 131, 67, 140, 133, 117, 104, 129, 131, 133, 128, 135, 91, 125, 140, 97, 136, 123, 204};


//: data
Byte kGrantTitle[] = {38, 4, 36, 8, 96, 18, 16, 131, 136, 133, 152, 133, 9};


//: 我知道了
Byte kPlacementDeriveCustomName[] = {38, 12, 51, 9, 136, 6, 195, 100, 62, 25, 187, 196, 26, 210, 216, 28, 180, 198, 23, 237, 185, 184};


//: yyyy-MM-dd
Byte k_toonValue[] = {59, 10, 97, 13, 253, 151, 213, 88, 224, 221, 44, 24, 124, 218, 218, 218, 218, 142, 174, 174, 142, 197, 197, 106};


//: btn_toast_closed_black
Byte kAggressionName[] = {82, 22, 1, 6, 159, 22, 99, 117, 111, 96, 117, 112, 98, 116, 117, 96, 100, 109, 112, 116, 102, 101, 96, 99, 109, 98, 100, 108, 220};


//: 消息
Byte kMornTitle[] = {26, 6, 85, 12, 17, 208, 158, 9, 50, 203, 34, 19, 59, 11, 221, 59, 214, 4, 173};


//: homePoster
Byte k_provinceValue[] = {53, 10, 98, 6, 49, 148, 202, 209, 207, 199, 178, 209, 213, 214, 199, 212, 162};


//: lmNum
Byte kProvinceName[] = {11, 5, 99, 11, 223, 164, 211, 238, 144, 41, 131, 207, 208, 177, 216, 208, 25};


//: 密友
Byte kTimeEdgePrivacyText[] = {75, 6, 16, 13, 22, 106, 71, 108, 197, 123, 143, 206, 242, 245, 191, 150, 245, 159, 155, 176};


//: %@_%d_msgTab
Byte kTalkPenalTitle[] = {38, 12, 33, 12, 30, 59, 15, 22, 66, 139, 250, 64, 70, 97, 128, 70, 133, 128, 142, 148, 136, 117, 130, 131, 66};


//: iconHUTL0G_mi_search
Byte kMagicLightningName[] = {82, 20, 43, 13, 161, 87, 180, 158, 190, 77, 161, 194, 46, 148, 142, 154, 153, 115, 128, 127, 119, 91, 114, 138, 152, 148, 138, 158, 144, 140, 157, 142, 147, 234};

// __DEBUG__
// __CLOSE_PRINT__
//
//  TextShowViewController.m
//  FZIphone
//
//  Created by Jack on 2021/1/6.
//  Copyright © 2021 app. All rights reserved.
//

//: #import "LFCMsgTabController.h"
#import "TextShowViewController.h"
//: #import "UINavigationController+Additions.h"
#import "UINavigationController+Info.h"
//: #import "LFCIntimacyListVC.h"
#import "StreetwiseViewController.h"

//: #import "JXCategoryView.h"
#import "JXCategoryView.h"
//: #import "JXPagerListRefreshView.h"
#import "JXPagerListRefreshView.h"
//: #import "LFCSoicalHomeBanner.h"
#import "AerosolView.h"
//: #import "LFCIMSearchController.h"
#import "MomentControllerBbbb.h"
//: #import "LFCTXChatListController.h"
#import "RankViewController.h"

//: #import "LFC1v1TalkSocketManager.h"
#import "ManagingDirectorBbbb.h"

//: #import "LFCWhoLikeMeViewController.h"
#import "WithMomentViewController.h"
//: #import "LFCNotificationTipView.h"
#import "BucketSearchView.h"

//: @interface LFCMsgTabController ()<JXCategoryViewDelegate,JXPagerViewDelegate>
@interface TextShowViewController ()<JXCategoryViewDelegate,JXPagerViewDelegate>

//: @property (nonatomic, strong) LFCIntimacyListVC         *intimacyVC;
@property (nonatomic, strong) StreetwiseViewController         *conversation;
//: @property (nonatomic, strong) LFCTXChatListController   *chatTXListVC;
@property (nonatomic, strong) RankViewController   *first;

//: @property (nonatomic, strong) JXCategoryTitleView   *categoryView;
@property (nonatomic, strong) JXCategoryTitleView   *ting;
//: @property (nonatomic, strong) JXPagerView           *pagerView;
@property (nonatomic, strong) JXPagerView           *name;
//: @property (nonatomic, strong) UIView                *headerView;
@property (nonatomic, strong) UIView                *viewGift;
//: @property (nonatomic, strong) UIButton              *stateButton;
@property (nonatomic, strong) UIButton              *minority;
//: @property (nonatomic, strong) UIButton              *searchButton;
@property (nonatomic, strong) UIButton              *make;
//: @property (nonatomic, strong) LFCSoicalHomeBanner   *bannerView;
@property (nonatomic, strong) AerosolView   *list;
//: @property (nonatomic, strong) UIView                *notiAuthView;
@property (nonatomic, strong) UIView                *trifle;
//: @property (nonatomic, strong) UILabel               *unconnectedLabel;
@property (nonatomic, strong) UILabel               *sexListLabel;
//: @property (nonatomic, strong) UILabel *likeCountLb;
@property (nonatomic, strong) UILabel *family;


//: @property (nonatomic, assign) BOOL connectSocket;
@property (nonatomic, assign) BOOL schema;
//: @property (nonatomic, assign) BOOL connectTXIM;     
@property (nonatomic, assign) BOOL rubric;     //TX
//: @property (nonatomic, assign) NSInteger unReadCount; 
@property (nonatomic, assign) NSInteger moment; //未读私信个数
//: @property (nonatomic, strong) NSArray *tableItems;
@property (nonatomic, strong) NSArray *consuetude;
//: @property (nonatomic, assign) NSInteger currentIndex ;
@property (nonatomic, assign) NSInteger social ;

//: @end
@end

//: @implementation LFCMsgTabController
@implementation TextShowViewController

//: - (void)dealloc{
- (void)dealloc{
    //: [[NSNotificationCenter defaultCenter] removeObserver:self];
    [[NSNotificationCenter defaultCenter] removeObserver:self];
}

//: - (instancetype)init {
- (instancetype)init {
    //: self = [super init];
    self = [super init];
    //: if (self) {
    if (self) {

        //: self.tableItems = @[@"消息", @"密友",@"谁看过我"];
        self.consuetude = @[StringFromAttitudeData(kMornTitle), StringFromAttitudeData(kTimeEdgePrivacyText),StringFromAttitudeData(kResidencyValue)];
        //: self.subControllerArr = [NSMutableArray array];
        self.from = [NSMutableArray array];
        
        //: self.chatTXListVC = [[LFCTXChatListController alloc] init];
        self.first = [[RankViewController alloc] init];
        //: [self.subControllerArr addObject:self.chatTXListVC];
        [self.from addObject:self.first];
        
        //: self.intimacyVC = [[LFCIntimacyListVC alloc] init];
        self.conversation = [[StreetwiseViewController alloc] init];
        //: [self.subControllerArr addObject:self.intimacyVC];
        [self.from addObject:self.conversation];

        //: LFCWhoLikeMeViewController *vc = [[LFCWhoLikeMeViewController alloc] init];
        WithMomentViewController *vc = [[WithMomentViewController alloc] init];
        //: [self.subControllerArr addObject:vc];
        [self.from addObject:vc];

    }
    
    //: return self;
    return self;
}

//: - (void)viewDidLoad {
- (void)viewDidLoad {
    //: [super viewDidLoad];
    [super viewDidLoad];
    //: [self setupViews];
    [self aside];
    //: [self requestBannerData];
    [self presentBbbb];
    //: [self observerRCConnectState];
    [self size];
    
    // APP进入前台
    //: [[NSNotificationCenter defaultCenter] addObserver:self
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             //: selector:@selector(checkCurrentNotificationStatus)
                                             selector:@selector(levelBbbb)
                                                 //: name:UIApplicationDidBecomeActiveNotification
                                                 name:UIApplicationDidBecomeActiveNotification
                                               //: object:nil];
                                               object:nil];
}

- (void)aside {
    //: self.view.backgroundColor = UIColor.whiteColor;
    self.view.backgroundColor = UIColor.whiteColor;
    //: [self func__setupNaviMomentTab];
    [self dataClick];
}

//: - (void)func__setupNaviMomentTab {
- (void)dataClick {
    
    // 导航右侧-female 状态 搜索
    //: if ([AppManager sharedAppManager].loginUser.sex == Gender_Female) {
    if ([PlayColorBbbb size].file.sex == Gender_Female) {
        //: UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 110, 44)];
        UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 110, 44)];
        
        //: [view addSubview:self.stateButton];
        [view addSubview:self.minority];
        //: [view addSubview:self.searchButton];
        [view addSubview:self.make];
        //: self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:view];
        self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:view];
    //: }else{
    }else{
        // 导航右侧-搜索会话
        //: self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithImage:[UserTextImage imageNamed:@"iconHUTL0G_mi_search"]
        self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithImage:[UserTextImage imageNamed:StringFromAttitudeData(kMagicLightningName)]
                                                                                  //: style:UIBarButtonItemStylePlain
                                                                                  style:UIBarButtonItemStylePlain
                                                                                 //: target:self
                                                                                 target:self
                                                                                 //: action:@selector(func__pushIMSearchView)];
                                                                                 action:@selector(pushBirthday)];
        //: self.navigationItem.rightBarButtonItem.width = 40;
        self.navigationItem.rightBarButtonItem.width = 40;
    }
    // 导航左侧-消息、热度
    //: self.categoryView.listContainer = (id<JXCategoryViewListContainer>)self.pagerView.listContainerView;
    self.ting.listContainer = (id<JXCategoryViewListContainer>)self.name.listContainerView;
    //: [self.view addSubview:self.pagerView];
    [self.view addSubview:self.name];
    //: UIView *titleView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 230, 40)];
    UIView *titleView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 230, 40)];
    //: [titleView addSubview:self.categoryView];
    [titleView addSubview:self.ting];
    
    //: self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:titleView];
    self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:titleView];
}
//: - (void)viewWillAppear:(BOOL)animated {
- (void)viewWillAppear:(BOOL)animated {
    //: [super viewWillAppear:animated];
    [super viewWillAppear:animated];
    
    //: [self requestLikeUnreadCount];
    [self page];
    
    //: UIViewController *vc = self.subControllerArr[self.currentIndex];
    UIViewController *vc = self.from[self.social];
    //: if ([vc isKindOfClass:[LFCWhoLikeMeViewController class]] && [AppManager sharedAppManager].loginUser.vipLevel != GJVipLevel_nor) {
    if ([vc isKindOfClass:[WithMomentViewController class]] && [PlayColorBbbb size].file.vipLevel != GJVipLevel_nor) {
        //: self.likeCountLb.hidden = YES;
        self.family.hidden = YES;
    }
    
    // 检测当前推送通知状态
    //: [self checkCurrentNotificationStatus];
    [self levelBbbb];
}
//: - (void)viewDidAppear:(BOOL)animated {
- (void)viewDidAppear:(BOOL)animated {
    //: [super viewDidAppear:animated];
    [super viewDidAppear:animated];
    //: [LFCMsgConversationCacheManager func__enableRequestWithoutLimitCheck];
    [AccountBbbb size];
    //: [self.intimacyVC checkConversaionSync];
    [self.conversation conversaion];
}

//: - (void)viewDidLayoutSubviews {
- (void)viewDidLayoutSubviews {
    //: [super viewDidLayoutSubviews];
    [super viewDidLayoutSubviews];
    //: CGRect lFrame = [self.categoryView getTargetCellFrame:2];
    CGRect lFrame = [self.ting getTargetCellFrame:2];
    
    //: [self.categoryView addSubview:self.likeCountLb];
    [self.ting addSubview:self.family];
    //: self.likeCountLb.x = CGRectGetMaxX(lFrame)-10;
    self.family.afterPlan = CGRectGetMaxX(lFrame)-10;
}

//: - (void)func__showUnconnectedView{
- (void)push{
    //: dispatch_async(dispatch_get_main_queue(), ^{
    dispatch_async(dispatch_get_main_queue(), ^{
        //: if (self.connectTXIM) {
        if (self.rubric) {
            //: self.unconnectedLabel.hidden = YES;
            self.sexListLabel.hidden = YES;
        //: }else{
        }else{
            //: self.unconnectedLabel.hidden = NO;
            self.sexListLabel.hidden = NO;
        }
        //: [self setupHeaderView];
        [self business];
    //: });
    });
}

//: - (void)observerRCConnectState {
- (void)size {
    
    //: @weakify(self);
    @weakify(self);
    //: [RACObserve(LFCTXIMManager.sharedManager, isTXConnection) subscribeNext:^(NSNumber *  _Nullable x) {
    [RACObserve(NameSelect.guess, ofRankKey) subscribeNext:^(NSNumber *  _Nullable x) {
        //: @strongify(self);
        @strongify(self);
        //: BOOL isConnected = x.boolValue;
        BOOL isConnected = x.boolValue;
        //: self.connectTXIM = isConnected;
        self.rubric = isConnected;
        //: [self func__checkStateButtonState];
        [self requestAdd];
        //: [self func__showUnconnectedView];
        [self push];
    //: }];
    }];
    
    //: if ([AppManager sharedAppManager].loginUser.sex == Gender_Female) {
    if ([PlayColorBbbb size].file.sex == Gender_Female) {
        //: [RACObserve(LFC1v1TalkSocketManager.sharedTalkManager, isConnected) subscribeNext:^(NSNumber *  _Nullable x) {
        [RACObserve(ManagingDirectorBbbb.sleepingDraught, menageEdit) subscribeNext:^(NSNumber *  _Nullable x) {
            //: @strongify(self);
            @strongify(self);
            //: BOOL isConnected = x.boolValue;
            BOOL isConnected = x.boolValue;
            //: self.connectSocket = isConnected;
            self.schema = isConnected;
            //: [self func__checkStateButtonState];
            [self requestAdd];
        //: }];
        }];
        
        //: [RACObserve(self.chatTXListVC, unreadConversationCount) subscribeNext:^(NSNumber *  _Nullable x) {
        [RACObserve(self.first, unreadEraseBbbb) subscribeNext:^(NSNumber *  _Nullable x) {
            //: @strongify(self);
            @strongify(self);
            //: self.unReadCount = x.integerValue;
            self.moment = x.integerValue;
            //: [self func__checkStateButtonState];
            [self requestAdd];
        //: }];
        }];
    }
}
//: - (void)requestBannerData{
- (void)presentBbbb{
    //: TalkingRequest *setup = [TalkingRequest new];
    HologramHead *setup = [HologramHead new];
    //: setup.requestPath = @"gu/jtipmqii/rzmupx";
    setup.user = StringFromAttitudeData(k_succeedData);
    //: setup.params = @{@"bType":@"2"};
    setup.pushTimeId = @{StringFromAttitudeData(k_removeText):@"2"};
    //: [[AppManager sharedAppManager].dao startRequest:setup withFinishBlock:^(TalkingRequest *requestModel, NSDictionary *component, NSError *error) {
    [[PlayColorBbbb size].admin with:setup editFee:^(HologramHead *requestModel, NSDictionary *component, NSError *error) {
        //: if (error != nil) {
        if (error != nil) {
            //: self.bannerView.items = nil;
            self.list.text = nil;
            //: [self setupHeaderView];
            [self business];
            //: return;
            return;
        }
        //: NSMutableArray *tempArr = [[NSMutableArray alloc] init];
        NSMutableArray *tempArr = [[NSMutableArray alloc] init];
        //: NSArray *bannerList = component[@"data"][@"bannerList"];
        NSArray *bannerList = component[StringFromAttitudeData(kGrantTitle)][StringFromAttitudeData(kVariationRecordValue)];
        //: for (NSDictionary *dic in bannerList) {
        for (NSDictionary *dic in bannerList) {
            //: LFCBannerModel *bannerModel = [LFCBannerModel modelWithDic:dic];
            AccountMomentJsonModel *bannerModel = [AccountMomentJsonModel modelWithDic:dic];
            //: [tempArr addObject:bannerModel];
            [tempArr addObject:bannerModel];
        }
        //: self.bannerView.items = tempArr;
        self.list.text = tempArr;
        //: [self setupHeaderView];
        [self business];

    //: }];
    }];
}
//: - (void)func__checkStateButtonState{
- (void)requestAdd{
    //female未读消息人数
    //: if ([AppManager sharedAppManager].loginUser.sex == Gender_Female) {
    if ([PlayColorBbbb size].file.sex == Gender_Female) {
        //: dispatch_async(dispatch_get_main_queue(), ^{
        dispatch_async(dispatch_get_main_queue(), ^{
            //: if (self.connectSocket && self.connectTXIM) {
            if (self.schema && self.rubric) {
                //: self.stateButton.selected = NO;
                self.minority.selected = NO;
                //: if (self.unReadCount < 3) {
                if (self.moment < 3) {//小于3人 空闲
                    //: self.stateButton.enabled = NO;
                    self.minority.enabled = NO;
                //: }else{
                }else{//大于3人 忙碌
                    //: self.stateButton.enabled = YES;
                    self.minority.enabled = YES;
                }
            //: }else{
            }else{
                //socket断开连接或融云断开连接
                //: self.stateButton.enabled = YES;
                self.minority.enabled = YES;
                //: self.stateButton.selected = YES;
                self.minority.selected = YES;
            }
        //: });
        });
    }
}
- (void)business{
    
    //: CGFloat bannerTop = self.unconnectedLabel.hidden?0:38;
    CGFloat bannerTop = self.sexListLabel.hidden?0:38;
    //: if (self.bannerView.items.count) {
    if (self.list.text.count) {
        //: self.bannerView.frame = CGRectMake(0, bannerTop, screenWidth(), actualWidth(100));
        self.list.frame = CGRectMake(0, bannerTop, screenWidth(), actualWidth(100));
        //: self.bannerView.hidden = NO;
        self.list.hidden = NO;
        //: bannerTop = CGRectGetMaxY(self.bannerView.frame);
        bannerTop = CGRectGetMaxY(self.list.frame);
    //: }else{
    }else{
        //: self.bannerView.frame = CGRectMake(0, bannerTop, screenWidth(), 0);
        self.list.frame = CGRectMake(0, bannerTop, screenWidth(), 0);
        //: self.bannerView.hidden = YES;
        self.list.hidden = YES;
    }
    
    //: self.headerView.frame = CGRectMake(0, 0, screenWidth(), bannerTop);
    self.viewGift.frame = CGRectMake(0, 0, screenWidth(), bannerTop);
    //: [self.pagerView resizeTableHeaderViewHeightWithAnimatable:NO duration:0 curve:UIViewAnimationCurveEaseInOut];
    [self.name resizeTableHeaderViewHeightWithAnimatable:NO duration:0 curve:UIViewAnimationCurveEaseInOut];
    //: self.chatTXListVC.tableBottomInset = bannerTop;
    self.first.tableRank = bannerTop;
}

//: - (void)resetHeaderViewLayoutWithAuth:(BOOL)isAuth {
- (void)send:(BOOL)isAuth {

    //: if (isAuth) {
    if (isAuth) {
        //: NSString *keyValue = [[NSUserDefaults standardUserDefaults] objectForKey:[NSString stringWithFormat:@"%@_%d_msgTab",[CacheDef StreamerViewCloseKey],[AppManager sharedAppManager].uid]];
        NSString *keyValue = [[NSUserDefaults standardUserDefaults] objectForKey:[NSString stringWithFormat:StringFromAttitudeData(kTalkPenalTitle),[AuthorShadow level],[PlayColorBbbb size].societal]];

        //: isAuth = ![keyValue isEqualToString:[self gettodayDateStr]];
        isAuth = ![keyValue isEqualToString:[self imageTotal]];
    }
    
    //: CGFloat bannerTop = self.unconnectedLabel.hidden?0:38;
    CGFloat bannerTop = self.sexListLabel.hidden?0:38;
    
    //: self.notiAuthView.hidden = !isAuth;
    self.trifle.hidden = !isAuth;
    //: self.notiAuthView.frame = CGRectMake(15, bannerTop+8, screenWidth()-30, 34);
    self.trifle.frame = CGRectMake(15, bannerTop+8, screenWidth()-30, 34);
    //: bannerTop += isAuth ? (34+8) : 0;
    bannerTop += isAuth ? (34+8) : 0;
    
    //: if (self.bannerView.items.count) {
    if (self.list.text.count) {
        //: self.bannerView.frame = CGRectMake(0, bannerTop, screenWidth(), actualWidth(100));
        self.list.frame = CGRectMake(0, bannerTop, screenWidth(), actualWidth(100));
        //: self.bannerView.hidden = NO;
        self.list.hidden = NO;
        //: bannerTop = CGRectGetMaxY(self.bannerView.frame);
        bannerTop = CGRectGetMaxY(self.list.frame);
    //: }else{
    }else{
        //: self.bannerView.frame = CGRectMake(0, bannerTop, screenWidth(), 0);
        self.list.frame = CGRectMake(0, bannerTop, screenWidth(), 0);
        //: self.bannerView.hidden = YES;
        self.list.hidden = YES;
    }
    
    //: self.headerView.frame = CGRectMake(0, 0, screenWidth(), bannerTop);
    self.viewGift.frame = CGRectMake(0, 0, screenWidth(), bannerTop);
    //: [self.pagerView resizeTableHeaderViewHeightWithAnimatable:NO duration:0 curve:UIViewAnimationCurveEaseInOut];
    [self.name resizeTableHeaderViewHeightWithAnimatable:NO duration:0 curve:UIViewAnimationCurveEaseInOut];
    //: self.chatTXListVC.tableBottomInset = bannerTop;
    self.first.tableRank = bannerTop;
}

//: - (void)requestLikeUnreadCount{
- (void)page{
    
    //: TalkingRequest *model = [[TalkingRequest alloc]init];
    HologramHead *model = [[HologramHead alloc]init];
    //: model.requestType = REQUEST_GET;
    model.index = REQUEST_GET;
    //: model.requestPath = @"gu/tiqo/xqaTmoqlsGixMtg";
    model.user = StringFromAttitudeData(kVoiceTitle);
    //: [[AppManager sharedAppManager].dao startRequest:model withFinishBlock:^(TalkingRequest *requestModel, NSDictionary *component, NSError *error) {
    [[PlayColorBbbb size].admin with:model editFee:^(HologramHead *requestModel, NSDictionary *component, NSError *error) {
        //: if (component == nil && error != nil) {
        if (component == nil && error != nil) {
            //: return;
            return;
        }
        //: NSInteger count = [component[@"data"][@"lmNum"] integerValue];
        NSInteger count = [component[StringFromAttitudeData(kGrantTitle)][StringFromAttitudeData(kProvinceName)] integerValue];
        //: [self showUnreadCount:self.likeCountLb count:count];
        [self page:self.family hideManager:count];
        //: UIViewController *vc = self.subControllerArr[self.currentIndex];
        UIViewController *vc = self.from[self.social];
        //: if ([vc isKindOfClass:[LFCWhoLikeMeViewController class]] && [AppManager sharedAppManager].loginUser.vipLevel != GJVipLevel_nor) {
        if ([vc isKindOfClass:[WithMomentViewController class]] && [PlayColorBbbb size].file.vipLevel != GJVipLevel_nor) {
            //: self.likeCountLb.hidden = YES;
            self.family.hidden = YES;
        }
    //: }];
    }];
    
}

//: #pragma mark - UIApplicationDidBecomeActiveNotification
#pragma mark - UIApplicationDidBecomeActiveNotification
/// 应用进入前台，检测当前推送通知系统设置状态
//: - (void)checkCurrentNotificationStatus {
- (void)levelBbbb {
    //: @weakify(self);
    @weakify(self);
    //: [[LFCPopupManager sharedInstance] checkCurrentNotificationStatusWithResult:^(BOOL isAuth) {
    [[ByPush instance] buttonBbbb:^(BOOL isAuth) {
        //: @strongify(self);
        @strongify(self);
        //: [self resetHeaderViewLayoutWithAuth:isAuth];
        [self send:isAuth];
    //: }];
    }];
}

//: #pragma mark - 事件私有方法
#pragma mark - 事件私有方法
//: - (void)func__stateButtonAction:(UIButton *)sender{
- (void)presents:(UIButton *)sender{
    //: NSString *alertText = @"忙碌状态说明有多人给你发消息你未回复，此状态下系统推荐将减少。";
    NSString *alertText = StringFromAttitudeData(kBraveData);
    //: if (sender.selected) {
    if (sender.selected) {
        //: alertText = @"离线状态下会出现无法使用音视频通话功能，或无法收发消息的情况，请重新启动APP。";
        alertText = StringFromAttitudeData(k_portfolioFinishData);
    }
    //: LFCAlertButton *button = [[LFCAlertButton alloc]initWithTitle:@"我知道了" type:AlertButtonType1 action:^{
    ImageButton *button = [[ImageButton alloc]initWithTimeCurrent:StringFromAttitudeData(kPlacementDeriveCustomName) merge:AlertButtonType1 like:^{
        
    //: }];
    }];
    //: LFCAlertView *alertView = [[LFCAlertView alloc]initWithTitle:nil content:alertText btnArray:@[button]];
    MutualView *alertView = [[MutualView alloc]initWithPlanSquare:nil phone:alertText age:@[button]];
    //: [alertView show];
    [alertView of];
}
//: - (void)func__closeAction {
- (void)videoBbbb {
    
    //: if (self.closeBlock) {
    if (self.with) {
        //: self.closeBlock();
        self.with();
    }
}

// push im搜索页面
//: - (void)func__pushIMSearchView {
- (void)pushBirthday {
    //: LFCIMSearchController *imSearchView = [[LFCIMSearchController alloc] init];
    MomentControllerBbbb *imSearchView = [[MomentControllerBbbb alloc] init];
    //: [self.navigationController pushViewController:imSearchView animated:YES];
    [self.navigationController pushViewController:imSearchView animated:YES];
}

//: - (void)func__bannerClick:(LFCBannerModel*)banner{
- (void)tipDisable:(AccountMomentJsonModel*)banner{
    
    
    //: switch (banner.type) {
    switch (banner.type) {
        //: case BannerType_URL:{
        case BannerType_URL:{

            //: [[AppManager sharedAppManager] func__pushWebViewController:banner.url];
            [[PlayColorBbbb size] extreme:banner.url];
            //: if ([AppManager sharedAppManager].loginUser.sex == Gender_Male) {
            if ([PlayColorBbbb size].file.sex == Gender_Male) {
                //: [LFCAppCapStatistical onNewEvent:[LFCAppStatHelper ClickSocialTab_OnlineMatchingH5]];
                [AppBbbb userBbbb:[ClickUser every]];
            }
            //: break;
            break;
        }
        //: case BannerType_Native:
        case BannerType_Native:
        {
            
            //: break;
            break;
        }
        //: default:
        default:
            //: break;
            break;
    }
}

//: - (void)showUnreadCount:(UILabel *)countLb count:(NSInteger)count{
- (void)page:(UILabel *)countLb hideManager:(NSInteger)count{
    
    //: if (count == 0) {
    if (count == 0) {
        
        //: countLb.hidden = YES;
        countLb.hidden = YES;
        //: countLb.text = nil;
        countLb.text = nil;
    //: }else if (count>99){
    }else if (count>99){
        
        //: countLb.hidden = NO;
        countLb.hidden = NO;
        
        //: NSString *maxUnreadCountStr = @"99+";
        NSString *maxUnreadCountStr = StringFromAttitudeData(kAlienContent);
        //: CGFloat w = [self badgeNumberWidth:maxUnreadCountStr];
        CGFloat w = [self ping:maxUnreadCountStr];
        
        //: countLb.text = @"99+";
        countLb.text = StringFromAttitudeData(kAlienContent);
        //: countLb.size = CGSizeMake(12+w, 18);
        countLb.size = CGSizeMake(12+w, 18);

    //: }else {
    }else {
        //: countLb.hidden = NO;
        countLb.hidden = NO;
        //: CGFloat w = [self badgeNumberWidth:[NSString stringWithFormat:@"%ld",(long)count]];
        CGFloat w = [self ping:[NSString stringWithFormat:@"%ld",(long)count]];
        //: countLb.size = CGSizeMake(MAX(12+w, 18), 18);
        countLb.size = CGSizeMake(MAX(12+w, 18), 18);
        //: countLb.text = [NSString stringWithFormat:@"%ld",(long)count];
        countLb.text = [NSString stringWithFormat:@"%ld",(long)count];
    }
    
}

//: - (CGFloat)badgeNumberWidth:(NSString *)unreadStr{
- (CGFloat)ping:(NSString *)unreadStr{
    //: return [unreadStr sizeWithAttributes:@{NSFontAttributeName :[UIFont PingFangFontWithType:PFSCTypeMedium fontSize:11]}].width;
    return [unreadStr sizeWithAttributes:@{NSFontAttributeName :[UIFont underbelly:PFSCTypeMedium substance:11]}].width;
}


//: #pragma mark - JXPagerViewDelegate
#pragma mark - JXPagerViewDelegate
//: - (UIView *)tableHeaderViewInPagerView:(JXPagerView *)pagerView {
- (UIView *)tableHeaderViewInPagerView:(JXPagerView *)pagerView {
    //: return self.headerView;
    return self.viewGift;
}
//: - (NSUInteger)tableHeaderViewHeightInPagerView:(JXPagerView *)pagerView {
- (NSUInteger)tableHeaderViewHeightInPagerView:(JXPagerView *)pagerView {
    //: return self.headerView.frame.size.height;
    return self.viewGift.frame.size.height;
}
//: - (NSUInteger)heightForPinSectionHeaderInPagerView:(JXPagerView *)pagerView {
- (NSUInteger)heightForPinSectionHeaderInPagerView:(JXPagerView *)pagerView {
    //: return 0;
    return 0;
}
//: - (UIView *)viewForPinSectionHeaderInPagerView:(JXPagerView *)pagerView {
- (UIView *)viewForPinSectionHeaderInPagerView:(JXPagerView *)pagerView {
    //: return nil;
    return nil;
}
//: - (NSInteger)numberOfListsInPagerView:(JXPagerView *)pagerView {
- (NSInteger)numberOfListsInPagerView:(JXPagerView *)pagerView {
    //: return self.tableItems.count;
    return self.consuetude.count;
}
//: - (id<JXPagerViewListViewDelegate>)pagerView:(JXPagerView *)pagerView initListAtIndex:(NSInteger)index {
- (id<JXPagerViewListViewDelegate>)pagerView:(JXPagerView *)pagerView initListAtIndex:(NSInteger)index {
    //: return [self.subControllerArr objectAtIndex:index];
    return [self.from objectAtIndex:index];
}
//: - (void)mainTableViewDidScroll:(UIScrollView *)scrollView{
- (void)mainTableViewDidScroll:(UIScrollView *)scrollView{
    //: self.chatTXListVC.tableBottomInset = MAX(0,self.headerView.height -  scrollView.contentOffset.y);
    self.first.tableRank = MAX(0,self.viewGift.height -  scrollView.contentOffset.y);
}
//: #pragma mark - JXCategoryViewDelegate
#pragma mark - JXCategoryViewDelegate
//: - (void)categoryView:(JXCategoryBaseView *)categoryView didSelectedItemAtIndex:(NSInteger)index {
- (void)categoryView:(JXCategoryBaseView *)categoryView didSelectedItemAtIndex:(NSInteger)index {
    
    //: if (index >= 0 && index < self.subControllerArr.count && index != self.currentIndex) {
    if (index >= 0 && index < self.from.count && index != self.social) {
        
        //: UIViewController *aListView = self.subControllerArr[index];
        UIViewController *aListView = self.from[index];
        
        //: if ([aListView isKindOfClass:[LFCWhoLikeMeViewController class]] && [AppManager sharedAppManager].loginUser.vipLevel != GJVipLevel_nor) {
        if ([aListView isKindOfClass:[WithMomentViewController class]] && [PlayColorBbbb size].file.vipLevel != GJVipLevel_nor) {
            //: self.likeCountLb.hidden = YES;
            self.family.hidden = YES;
            
            //: LFCWhoLikeMeViewController *vc = (LFCWhoLikeMeViewController *)aListView;
            WithMomentViewController *vc = (WithMomentViewController *)aListView;
            //: [vc beginRefresh];
            [vc getClickTab];
        }
        //: self.currentIndex = index;
        self.social = index;
    }
}
//: #pragma mark - 懒加载
#pragma mark - 懒加载

//: - (UIButton *)stateButton{
- (UIButton *)minority{
    //: if (!_stateButton) {
    if (!_minority) {
        //: _stateButton = [UIButton buttonWithType:UIButtonTypeCustom];
        _minority = [UIButton buttonWithType:UIButtonTypeCustom];
        //: _stateButton.frame = CGRectMake(0, 0, 72, 44);
        _minority.frame = CGRectMake(0, 0, 72, 44);
        //: _stateButton.contentHorizontalAlignment = UIControlContentHorizontalAlignmentRight;
        _minority.contentHorizontalAlignment = UIControlContentHorizontalAlignmentRight;
        //: _stateButton.adjustsImageWhenHighlighted = NO;
        _minority.adjustsImageWhenHighlighted = NO;
        //: [_stateButton setImage:[UserTextImage imageNamed:@"female_chat_state_free"] forState:UIControlStateDisabled]; 
        [_minority setImage:[UserTextImage imageNamed:StringFromAttitudeData(kGrayData)] forState:UIControlStateDisabled]; //空闲
        //: [_stateButton setImage:[UserTextImage imageNamed:@"female_chat_state_disconect"] forState:UIControlStateSelected]; 
        [_minority setImage:[UserTextImage imageNamed:StringFromAttitudeData(k_credibleTitle)] forState:UIControlStateSelected]; //离线
        //: [_stateButton setImage:[UserTextImage imageNamed:@"female_chat_state_busy"] forState:UIControlStateNormal]; 
        [_minority setImage:[UserTextImage imageNamed:StringFromAttitudeData(kPlacementValue)] forState:UIControlStateNormal]; //忙碌
        //: [_stateButton addTarget:self action:@selector(func__stateButtonAction:) forControlEvents:UIControlEventTouchUpInside];
        [_minority addTarget:self action:@selector(presents:) forControlEvents:UIControlEventTouchUpInside];
    }
    //: return _stateButton;
    return _minority;
}
//: - (UIButton *)searchButton{
- (UIButton *)make{
    //: if (!_searchButton) {
    if (!_make) {
        //: _searchButton = [UIButton buttonWithType:UIButtonTypeCustom];
        _make = [UIButton buttonWithType:UIButtonTypeCustom];
        //: [_searchButton setImage:[UserTextImage imageNamed:@"iconHUTL0G_mi_search"] forState:UIControlStateNormal];
        [_make setImage:[UserTextImage imageNamed:StringFromAttitudeData(kMagicLightningName)] forState:UIControlStateNormal];
        //: _searchButton.frame = CGRectMake(72, 0, 35, 44);
        _make.frame = CGRectMake(72, 0, 35, 44);
        //: _searchButton.contentHorizontalAlignment = UIControlContentHorizontalAlignmentRight;
        _make.contentHorizontalAlignment = UIControlContentHorizontalAlignmentRight;
        //: [_searchButton addTarget:self action:@selector(func__pushIMSearchView) forControlEvents:UIControlEventTouchUpInside];
        [_make addTarget:self action:@selector(pushBirthday) forControlEvents:UIControlEventTouchUpInside];
    }
    //: return _searchButton;
    return _make;
}

//: - (JXCategoryTitleView *)categoryView{
- (JXCategoryTitleView *)ting{
    //: if (!_categoryView) {
    if (!_ting) {
        //: _categoryView = [[JXCategoryTitleView alloc] initWithFrame:CGRectMake(0, 5,230, 32)];
        _ting = [[JXCategoryTitleView alloc] initWithFrame:CGRectMake(0, 5,230, 32)];
        //: _categoryView.titles = self.tableItems;
        _ting.titles = self.consuetude;
        //: _categoryView.titleSelectedColor = [ShowColor appTextColor];
        _ting.titleSelectedColor = [ShowColor current];
        //: _categoryView.titleColor = [ShowColor appTextValeColor];
        _ting.titleColor = [ShowColor table];
        //: _categoryView.titleSelectedFont = [UIFont PingFangFontWithType:PFSCTypeSemibold fontSize:22];
        _ting.titleSelectedFont = [UIFont underbelly:PFSCTypeSemibold substance:22];
        //: _categoryView.titleFont = [UIFont PingFangFontWithType:PFSCTypeMedium fontSize:18];
        _ting.titleFont = [UIFont underbelly:PFSCTypeMedium substance:18];

        //: _categoryView.titleColorGradientEnabled = YES;
        _ting.titleColorGradientEnabled = YES;
        //: _categoryView.titleLabelZoomEnabled = YES;
        _ting.titleLabelZoomEnabled = YES;
        //: _categoryView.contentScrollViewClickTransitionAnimationEnabled = NO;
        _ting.contentScrollViewClickTransitionAnimationEnabled = NO;
        //: _categoryView.contentEdgeInsetLeft = 4;
        _ting.contentEdgeInsetLeft = 4;
        //: _categoryView.cellSpacing = 16;
        _ting.cellSpacing = 16;
        //: _categoryView.averageCellSpacingEnabled = NO;
        _ting.averageCellSpacingEnabled = NO;
        //: _categoryView.delegate = self;
        _ting.delegate = self;
        
        //: if ([AppManager sharedAppManager].skinStyle == skinStyle_Normal) {
        if ([PlayColorBbbb size].itemImage == skinStyle_Normal) {
            //: JXCategoryIndicatorLineView *lineView = [[JXCategoryIndicatorLineView alloc] init];
            JXCategoryIndicatorLineView *lineView = [[JXCategoryIndicatorLineView alloc] init];
            //: lineView.indicatorColor  = [ShowColor appTextColor];
            lineView.indicatorColor  = [ShowColor current];
            //: lineView.indicatorWidth  = 8;
            lineView.indicatorWidth  = 8;
            //: _categoryView.indicators = @[lineView];
            _ting.indicators = @[lineView];
        }
    }
    //: return _categoryView;
    return _ting;
}

//: - (JXPagerView *)pagerView{
- (JXPagerView *)name{
    //: if (!_pagerView) {
    if (!_name) {
        //: _pagerView = [[JXPagerListRefreshView alloc] initWithDelegate:self];
        _name = [[JXPagerListRefreshView alloc] initWithDelegate:self];
        //: _pagerView.isListHorizontalScrollEnabled = NO;
        _name.isListHorizontalScrollEnabled = NO;
        //: _pagerView.frame = CGRectMake(0, 0, screenWidth(), screenHeight()-statusBarNavBarHeight()-tabbarHeight());
        _name.frame = CGRectMake(0, 0, screenWidth(), screenHeight()-statusBarNavBarHeight()-tabbarHeight());
    }
    //: return _pagerView;
    return _name;
}
//: - (UIView *)headerView{
- (UIView *)viewGift{
    //: if (!_headerView) {
    if (!_viewGift) {
        //: _headerView = [[UIView alloc] init];
        _viewGift = [[UIView alloc] init];
        //: _headerView.frame = CGRectMake(0, 0, screenWidth(), 40);
        _viewGift.frame = CGRectMake(0, 0, screenWidth(), 40);
        //: _headerView.backgroundColor = [UIColor whiteColor];
        _viewGift.backgroundColor = [UIColor whiteColor];
    }
    //: return  _headerView;
    return  _viewGift;
}
//: - (LFCSoicalHomeBanner *)bannerView{
- (AerosolView *)list{
    
    //: if (!_bannerView) {
    if (!_list) {
        //: _bannerView = [[LFCSoicalHomeBanner alloc] initWithFrame:CGRectMake(0, statusBarNavBarHeight(), screenWidth(), 0.0001)];
        _list = [[AerosolView alloc] initWithFrame:CGRectMake(0, statusBarNavBarHeight(), screenWidth(), 0.0001)];
        //: _bannerView.accessibilityLabel = @"homePoster";
        _list.accessibilityLabel = StringFromAttitudeData(k_provinceValue);
        //: [self.headerView addSubview:_bannerView];
        [self.viewGift addSubview:_list];
        
        //: @weakify(self);
        @weakify(self);
        //: [_bannerView setindexClickBlock:^(LFCBannerModel* model) {
        [_list setSyncretize:^(AccountMomentJsonModel* model) {
            //: @strongify(self);
            @strongify(self);
            //: [self func__bannerClick:model];
            [self tipDisable:model];
        //: }];
        }];
    }
    //: return _bannerView;
    return _list;
}
//: - (UILabel *)unconnectedLabel{
- (UILabel *)sexListLabel{
    //: if (!_unconnectedLabel) {
    if (!_sexListLabel) {
        //: _unconnectedLabel = [[UILabel alloc]initWithFrame:CGRectMake(0, 0, screenWidth(), 38)];
        _sexListLabel = [[UILabel alloc]initWithFrame:CGRectMake(0, 0, screenWidth(), 38)];
        //: _unconnectedLabel.backgroundColor = UIColorHex(#FDD5D0);
        _sexListLabel.backgroundColor = UIColorHex(#FDD5D0);
        //: _unconnectedLabel.font = [UIFont PingFangFontWithType:PFSCTypeRegular fontSize:14];
        _sexListLabel.font = [UIFont underbelly:PFSCTypeRegular substance:14];
        //: _unconnectedLabel.text = @"您的网络不太好，请重新启动APP恢复";
        _sexListLabel.text = StringFromAttitudeData(kElevenName);
        //: _unconnectedLabel.textColor = UIColorHex(#F95644);
        _sexListLabel.textColor = UIColorHex(#F95644);
        //: _unconnectedLabel.textAlignment = NSTextAlignmentCenter;
        _sexListLabel.textAlignment = NSTextAlignmentCenter;
        //: _unconnectedLabel.hidden = YES;
        _sexListLabel.hidden = YES;
        //: [self.headerView addSubview:_unconnectedLabel];
        [self.viewGift addSubview:_sexListLabel];
    }
    //: return _unconnectedLabel;
    return _sexListLabel;
}

//: - (UILabel *)likeCountLb{
- (UILabel *)family{
    //: if (!_likeCountLb) {
    if (!_family) {
        //: _likeCountLb = [[UILabel alloc]init];
        _family = [[UILabel alloc]init];
        //: _likeCountLb.frame = CGRectMake(0, 0, 18, 18);
        _family.frame = CGRectMake(0, 0, 18, 18);
        //: _likeCountLb.backgroundColor = UIColorHex(#FF506D);
        _family.backgroundColor = UIColorHex(#FF506D);
        //: _likeCountLb.layer.cornerRadius = 9;
        _family.layer.cornerRadius = 9;
        //: _likeCountLb.layer.masksToBounds = YES;
        _family.layer.masksToBounds = YES;
        //: _likeCountLb.font = [UIFont PingFangFontWithType:PFSCTypeMedium fontSize:11];
        _family.font = [UIFont underbelly:PFSCTypeMedium substance:11];
        //: _likeCountLb.textColor = UIColor.whiteColor;
        _family.textColor = UIColor.whiteColor;
        //: _likeCountLb.textAlignment = NSTextAlignmentCenter;
        _family.textAlignment = NSTextAlignmentCenter;
        //: _likeCountLb.hidden = YES;
        _family.hidden = YES;
    }
    //: return _likeCountLb;
    return _family;
}

//: - (UIView *)notiAuthView {
- (UIView *)trifle {
    //: if (!_notiAuthView) {
    if (!_trifle) {
        //: _notiAuthView = [[UIView alloc] initWithFrame:CGRectMake(15, 0, screenWidth()-30, 34)];
        _trifle = [[UIView alloc] initWithFrame:CGRectMake(15, 0, screenWidth()-30, 34)];
        //: _notiAuthView.backgroundColor = UIColorHex(#CCFAFF);
        _trifle.backgroundColor = UIColorHex(#CCFAFF);
        //: _notiAuthView.layer.cornerRadius = 5;
        _trifle.layer.cornerRadius = 5;
        //: _notiAuthView.layer.masksToBounds = YES;
        _trifle.layer.masksToBounds = YES;
        //: [self.headerView addSubview:_notiAuthView];
        [self.viewGift addSubview:_trifle];
        
        //: UIImageView *icon = [[UIImageView alloc] init];
        UIImageView *icon = [[UIImageView alloc] init];
        //: icon.image = [UserTextImage imageNamed:@"icon_date_toast_notice"];
        icon.image = [UserTextImage imageNamed:StringFromAttitudeData(k_utterValue)];
        
        //: YYLabel *textLabel = [[YYLabel alloc] init];
        YYLabel *textLabel = [[YYLabel alloc] init];
        //: NSMutableAttributedString *attributedStr = [[NSMutableAttributedString alloc] initWithString:@"开启推送通知，及时接受新消息~ "];
        NSMutableAttributedString *attributedStr = [[NSMutableAttributedString alloc] initWithString:StringFromAttitudeData(kValueGirlData)];
        // font
        //: CGFloat font = 13;
        CGFloat font = 13;
        //: if (kDevice_Is_iPhone5) {
        if (kDevice_Is_iPhone5) {
            //: font = 12;
            font = 12;
        }
        //: [attributedStr addAttribute:NSFontAttributeName value:[UIFont PingFangFontWithType:(PFSCTypeRegular) fontSize:font] range:NSMakeRange(0, attributedStr.length)];
        [attributedStr addAttribute:NSFontAttributeName value:[UIFont underbelly:(PFSCTypeRegular) substance:font] range:NSMakeRange(0, attributedStr.length)];
        // color
        //: [attributedStr addAttribute:NSForegroundColorAttributeName
        [attributedStr addAttribute:NSForegroundColorAttributeName
                              //: value:[ShowColor appTextColor]
                              value:[ShowColor current]
                              //: range:NSMakeRange(0, attributedStr.length)];
                              range:NSMakeRange(0, attributedStr.length)];
        
        //: NSMutableParagraphStyle *paragraphStyle = [[NSMutableParagraphStyle alloc] init];
        NSMutableParagraphStyle *paragraphStyle = [[NSMutableParagraphStyle alloc] init];
        //: paragraphStyle.lineSpacing = 4;
        paragraphStyle.lineSpacing = 4;
        //: paragraphStyle.alignment = NSTextAlignmentLeft;
        paragraphStyle.alignment = NSTextAlignmentLeft;
        //: attributedStr.paragraphStyle = paragraphStyle;
        attributedStr.paragraphStyle = paragraphStyle;
        
        //: textLabel.attributedText = attributedStr;
        textLabel.attributedText = attributedStr;

        //: YYLabel *actionLabel = [[YYLabel alloc] init];
        YYLabel *actionLabel = [[YYLabel alloc] init];
        //: NSMutableAttributedString *actionText = [[NSMutableAttributedString alloc] initWithString:@"立即开启" attributes:@{NSUnderlineStyleAttributeName:@1.5}];
        NSMutableAttributedString *actionText = [[NSMutableAttributedString alloc] initWithString:StringFromAttitudeData(kPathVoiceTitle) attributes:@{NSUnderlineStyleAttributeName:@1.5}];
        // font
        //: [actionText addAttribute:NSFontAttributeName value:[UIFont PingFangFontWithType:(PFSCTypeRegular) fontSize:font] range:NSMakeRange(0, actionText.length)];
        [actionText addAttribute:NSFontAttributeName value:[UIFont underbelly:(PFSCTypeRegular) substance:font] range:NSMakeRange(0, actionText.length)];
        // color
        //: [actionText addAttribute:NSForegroundColorAttributeName
        [actionText addAttribute:NSForegroundColorAttributeName
                           //: value:UIColorHex(#23D2E6)
                           value:UIColorHex(#23D2E6)
                           //: range:NSMakeRange(0, actionText.length)];
                           range:NSMakeRange(0, actionText.length)];
        
        //: NSRange sendRange2 = [actionText.string rangeOfString:@"立即开启"];
        NSRange sendRange2 = [actionText.string rangeOfString:StringFromAttitudeData(kPathVoiceTitle)];
        
        //: @weakify(self);
        @weakify(self);
        //: [actionText setTextHighlightRange:sendRange2 color:UIColorHex(#23D2E6) backgroundColor:[UIColor clearColor] tapAction:^(UIView * _Nonnull containerView, NSAttributedString * _Nonnull text, NSRange range, CGRect rect) {
        [actionText setTextHighlightRange:sendRange2 color:UIColorHex(#23D2E6) backgroundColor:[UIColor clearColor] tapAction:^(UIView * _Nonnull containerView, NSAttributedString * _Nonnull text, NSRange range, CGRect rect) {
            //: @strongify(self);
            @strongify(self);
            //事件
            //: [self func__streamerViewClick:text.string];
            [self rank:text.string];
        //: }];
        }];
        //: actionLabel.attributedText = actionText;
        actionLabel.attributedText = actionText;
        
        //: UIButton *closeBtn = [UIButton buttonWithType:UIButtonTypeCustom];
        UIButton *closeBtn = [UIButton buttonWithType:UIButtonTypeCustom];
        //: [closeBtn setImage:[UserTextImage imageNamed:@"btn_toast_closed_black"] forState:UIControlStateNormal];
        [closeBtn setImage:[UserTextImage imageNamed:StringFromAttitudeData(kAggressionName)] forState:UIControlStateNormal];
        //: [closeBtn addTarget:self action:@selector(closeBtnClick) forControlEvents:UIControlEventTouchUpInside];
        [closeBtn addTarget:self action:@selector(groupSay) forControlEvents:UIControlEventTouchUpInside];
        
        //: [_notiAuthView addSubview:icon];
        [_trifle addSubview:icon];
        //: [_notiAuthView addSubview:textLabel];
        [_trifle addSubview:textLabel];
        //: [_notiAuthView addSubview:actionLabel];
        [_trifle addSubview:actionLabel];
        //: [_notiAuthView addSubview:closeBtn];
        [_trifle addSubview:closeBtn];
        
        
        //: [icon mas_makeConstraints:^(MASConstraintMaker *make) {
        [icon mas_makeConstraints:^(MASConstraintMaker *make) {
            //: make.left.offset(6);
            make.left.offset(6);
            //: make.centerY.mas_equalTo(0);
            make.centerY.mas_equalTo(0);
            //: make.size.mas_equalTo(CGSizeMake(16, 16));
            make.size.mas_equalTo(CGSizeMake(16, 16));
        //: }];
        }];
        
        //: [textLabel mas_makeConstraints:^(MASConstraintMaker *make) {
        [textLabel mas_makeConstraints:^(MASConstraintMaker *make) {
            //: make.left.equalTo(icon.mas_right).offset(1);
            make.left.equalTo(icon.mas_right).offset(1);
            //: make.centerY.mas_equalTo(0);
            make.centerY.mas_equalTo(0);
        //: }];
        }];
        
        //: [actionLabel mas_makeConstraints:^(MASConstraintMaker *make) {
        [actionLabel mas_makeConstraints:^(MASConstraintMaker *make) {
            //: make.left.mas_equalTo(textLabel.mas_right).offset(6);
            make.left.mas_equalTo(textLabel.mas_right).offset(6);
            //: make.centerY.mas_equalTo(0);
            make.centerY.mas_equalTo(0);
        //: }];
        }];
        
        //: [closeBtn mas_makeConstraints:^(MASConstraintMaker *make) {
        [closeBtn mas_makeConstraints:^(MASConstraintMaker *make) {
            //: make.centerY.mas_equalTo(0);
            make.centerY.mas_equalTo(0);
            //: make.right.mas_equalTo(-10);
            make.right.mas_equalTo(-10);
            //: make.size.mas_equalTo(CGSizeMake(12, 12));
            make.size.mas_equalTo(CGSizeMake(12, 12));
        //: }];
        }];
        
    }
    //: return _notiAuthView;
    return _trifle;
}

//: - (void)func__streamerViewClick:(NSString *)str {
- (void)rank:(NSString *)str {
    //: [LFCNotificationTipView OpenNotificationSettings];
    [BucketSearchView gesture];
}

//: - (void)closeBtnClick {
- (void)groupSay {
    //: NSString *keyValue = [NSString stringWithFormat:@"%@_%d_msgTab",[CacheDef StreamerViewCloseKey],[AppManager sharedAppManager].uid];
    NSString *keyValue = [NSString stringWithFormat:StringFromAttitudeData(kTalkPenalTitle),[AuthorShadow level],[PlayColorBbbb size].societal];
    //: [NSUserDefaults setObject:[self gettodayDateStr] forKey:keyValue];
    [NSUserDefaults wholeAcross:[self imageTotal] nutsAndBolts:keyValue];

    //: [self resetHeaderViewLayoutWithAuth:NO];
    [self send:NO];
//    [[NSNotificationCenter defaultCenter] postNotificationName:[CurrentUp UpdateMsgTabChangedAuthNoti] object:nil];
}

//: - (NSString *)gettodayDateStr{
- (NSString *)imageTotal{
    //: NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    //: [dateFormatter setDateFormat:@"yyyy-MM-dd"];
    [dateFormatter setDateFormat:StringFromAttitudeData(k_toonValue)];
    //: [dateFormatter setLocale:[NSLocale currentLocale]];
    [dateFormatter setLocale:[NSLocale currentLocale]];
    //: NSString *todayDateStr = [dateFormatter stringFromDate:[NSDate date]];
    NSString *todayDateStr = [dateFormatter stringFromDate:[NSDate date]];
    //: return todayDateStr;
    return todayDateStr;
}

//: @end
@end

Byte * AttitudeDataToCache(Byte *data) {
    int minimalRate = data[0];
    int communicatory = data[1];
    Byte minimalVocal = data[2];
    int rakeRare = data[3];
    if (!minimalRate) return data + rakeRare;
    for (int i = rakeRare; i < rakeRare + communicatory; i++) {
        int value = data[i] - minimalVocal;
        if (value < 0) {
            value += 256;
        }
        data[i] = value;
    }
    data[0] = 0;
    data[rakeRare + communicatory] = 0;
    return data + rakeRare;
}

NSString *StringFromAttitudeData(Byte *data) {
    return [NSString stringWithUTF8String:(char *)AttitudeDataToCache(data)];
}
