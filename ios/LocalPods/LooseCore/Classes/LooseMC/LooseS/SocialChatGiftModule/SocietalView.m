
#import <Foundation/Foundation.h>

NSString *StringFromDenominateData(Byte *data);        



Byte kGrayTabModelTitle[] = {65, 9, 79, 14, 39, 112, 145, 70, 63, 88, 171, 89, 175, 211, 151, 57, 66, 152, 57, 98, 149, 110, 81, 51};



Byte kFileStateName[] = {29, 25, 18, 12, 246, 52, 67, 236, 72, 231, 10, 250, 213, 146, 170, 213, 119, 151, 212, 131, 158, 215, 117, 125, 210, 166, 123, 214, 113, 171, 211, 158, 127, 210, 168, 124, 31, 65};



Byte k_finishUtterAttitudeValue[] = {47, 12, 21, 9, 130, 197, 130, 109, 234, 207, 163, 107, 208, 115, 114, 212, 140, 165, 208, 115, 148, 244};



Byte k_boringData[] = {43, 9, 71, 8, 133, 208, 250, 55, 161, 95, 58, 159, 67, 106, 159, 67, 106, 141};



Byte k_userValue[] = {12, 12, 89, 14, 177, 130, 125, 30, 132, 251, 225, 1, 2, 214, 23, 18, 14, 240, 27, 12, 20, 26, 12, 27, 240, 11, 77};



Byte kDiversName[] = {3, 6, 80, 12, 192, 88, 142, 239, 39, 5, 206, 139, 152, 51, 60, 149, 60, 53, 5};



Byte kElementaryValue[] = {29, 6, 22, 14, 11, 108, 68, 36, 136, 33, 54, 145, 55, 108, 81, 83, 80, 94, 51, 78, 10};



Byte kWildlifeContent[] = {75, 7, 75, 9, 233, 225, 59, 136, 63, 28, 30, 27, 41, 3, 42, 34, 21};



Byte kAirmanContent[] = {94, 5, 56, 9, 246, 138, 45, 125, 144, 60, 55, 29, 49, 44, 66};



Byte k_grandfatherName[] = {89, 12, 75, 10, 226, 144, 234, 81, 169, 198, 153, 109, 53, 156, 73, 84, 153, 109, 53, 153, 109, 75, 228};



Byte k_variationText[] = {9, 23, 42, 9, 101, 166, 113, 78, 222, 56, 61, 53, 73, 63, 78, 63, 68, 53, 62, 59, 68, 61, 60, 75, 53, 58, 59, 60, 55, 75, 66, 74, 130};



Byte kMethodSternName[] = {34, 21, 60, 7, 57, 20, 151, 45, 51, 39, 50, 41, 56, 44, 14, 251, 246, 35, 50, 41, 52, 51, 35, 43, 57, 37, 54, 40, 131};



Byte k_closedFibName[] = {89, 18, 19, 10, 200, 29, 18, 214, 205, 223, 211, 159, 142, 211, 137, 118, 214, 109, 118, 209, 165, 154, 212, 145, 169, 212, 118, 150, 6};



Byte k_numberGiftImitationValue[] = {10, 10, 65, 6, 68, 79, 164, 68, 68, 164, 63, 123, 174, 123, 89, 239, 149};



Byte kRichData[] = {46, 15, 93, 5, 203, 12, 6, 18, 17, 241, 228, 11, 251, 217, 238, 2, 5, 4, 6, 14, 205};



Byte k_booPartyTitle[] = {38, 7, 94, 14, 68, 239, 138, 147, 111, 99, 248, 14, 53, 169, 135, 39, 39, 135, 34, 94, 220, 176};



Byte kCoordinateTitle[] = {39, 15, 36, 10, 17, 96, 55, 112, 187, 157, 195, 153, 109, 195, 151, 120, 192, 148, 105, 195, 151, 117, 193, 102, 119, 205};



Byte k_closedBlackTitle[] = {77, 12, 8, 6, 134, 80, 220, 176, 120, 221, 183, 123, 220, 176, 120, 222, 124, 135, 37};



Byte kCooperativeTimeViewValue[] = {86, 19, 39, 10, 42, 107, 123, 247, 109, 162, 59, 77, 71, 58, 36, 29, 12, 41, 66, 56, 77, 63, 66, 64, 56, 70, 72, 75, 62, 121};



Byte kSearchValue[] = {44, 23, 62, 13, 84, 172, 195, 101, 246, 39, 194, 171, 196, 13, 21, 49, 37, 43, 35, 46, 21, 39, 46, 39, 37, 54, 16, 55, 47, 36, 39, 52, 24, 43, 39, 57, 230};



Byte kEmployerAlienTitle[] = {83, 12, 72, 14, 209, 142, 228, 151, 22, 36, 149, 248, 39, 208, 157, 69, 57, 157, 61, 96, 157, 69, 57, 159, 118, 70, 239};



Byte kBackVehicleData[] = {12, 6, 72, 13, 72, 237, 203, 179, 107, 14, 93, 230, 225, 159, 59, 101, 161, 79, 96, 218};



Byte k_peakMessageName[] = {67, 20, 75, 6, 251, 57, 155, 84, 90, 156, 81, 64, 157, 100, 91, 156, 112, 59, 157, 100, 105, 155, 77, 67, 213, 243, 40};



Byte kToonDiversData[] = {86, 9, 79, 8, 224, 200, 64, 241, 153, 56, 91, 150, 95, 75, 149, 106, 58, 169};



Byte kHutOftenData[] = {59, 6, 26, 6, 126, 179, 204, 105, 153, 202, 163, 134, 146};



Byte k_residencyTrapPunchData[] = {73, 6, 1, 11, 27, 253, 212, 230, 188, 64, 79, 231, 180, 159, 232, 127, 128, 110};



Byte kBraveTitle[] = {85, 25, 86, 9, 91, 245, 110, 215, 123, 19, 13, 25, 24, 9, 29, 19, 34, 19, 24, 9, 30, 11, 24, 18, 11, 25, 9, 14, 15, 16, 11, 31, 22, 30, 229};
























#import "SocietalView.h"
#import "SelectLabel.h"
#import "ReceiveView.h"
#import "Segmented.h"
#import "BbbbAt.h"
#import "BucketReusableView.h"
#import "NameView.h"
#import "ShadowTo.h"
#import "SearchView.h"
#import "MaxTask.h"
#import "NSDate+TimeWriting.h"

typedef NS_ENUM(NSUInteger, LFCRoomGiftChannel) {
    
    LFCRoomGiftChannelHot = 1,
    
    LFCRoomGiftChannelPackage = 2,

};



@interface UserBbbbViewLayout : UICollectionViewFlowLayout


@property(nonatomic,strong,readwrite) NSArray* charm;

@property(nonatomic,strong,readwrite) NSMutableArray<UICollectionViewLayoutAttributes*>* show;

@property(nonatomic,assign,readwrite) CGSize ofSize ;

@end


@implementation UserBbbbViewLayout


- (void)prepareLayout{
    
    [super prepareLayout];
    
    [self.show removeAllObjects];

    
    for (int i = 0; i < self.charm.count; ++i) {
        
        UICollectionViewLayoutAttributes* itemAttr = [self layoutAttributesForItemAtIndexPath:[NSIndexPath indexPathForItem:i inSection:0]];
        
        [self.show addObject:itemAttr];
    }

    
    NSInteger page = self.charm.count / (2 * 4);
    
    page = (self.charm.count % (4 * 2) == 0) ? page : (page + 1);
    
    page = ((page) > (1) ? (page) : (1));
    
    self.ofSize = CGSizeMake(screenWidth() * page, 2 * 100);
}


- (UICollectionViewLayoutAttributes *)layoutAttributesForItemAtIndexPath:(NSIndexPath *)indexPath{
    
    NSInteger page = indexPath.item / (4 * 2);
    
    NSInteger pageIndex = indexPath.item % (2 * 4);
    
    NSInteger pageRow = pageIndex / 4;
    
    NSInteger pageCol = pageIndex % 4;
    
    CGFloat itemWidth = screenWidth() / 4;
    
    CGFloat x = page * screenWidth() + pageCol * itemWidth;
    
    CGFloat y = pageRow * 100;
    
    UICollectionViewLayoutAttributes* layoutAttr = [UICollectionViewLayoutAttributes layoutAttributesForCellWithIndexPath:indexPath];
    
    layoutAttr.frame = CGRectMake(x, y, itemWidth, 100);
    
    return layoutAttr;
}


- (CGSize)collectionViewContentSize{
    
    return self.ofSize;
}


- (NSArray<UICollectionViewLayoutAttributes *> *)layoutAttributesForElementsInRect:(CGRect)rect{
    
    return self.show.copy;
}


- (NSMutableArray<UICollectionViewLayoutAttributes *> *)show{
    
    if (!_show) {
        
        _show = [NSMutableArray array];
    }
    
    return _show;
}


@end



static NSInteger kScrollContentHeight = 200;



@interface SocietalView ()<CurrentDisplay,AnalogDigitalConverterDisplay,

UICollectionViewDelegate,UICollectionViewDataSource,UIScrollViewDelegate,ShowList,ReachingShowReplacementLabel>


#pragma mark - 头部


@property (nonatomic,strong) UIImageView * bbbb;

@property (nonatomic,strong) UIImageView * array;

@property (nonatomic,strong) UILabel * streetSmart;



@property (nonatomic,strong) UIView * viewMatch;


@property (nonatomic,strong) Segmented *infoLike;


@property (nonatomic,strong) UILabel *age;


@property (nonatomic,strong) UIImageView *unsettled;


@property (nonatomic,strong) UIButton *to;


#pragma mark - 中间内容



@property (nonatomic,strong) UIScrollView * hello;



@property (nonatomic,strong) UICollectionView * topDay;

@property (nonatomic,strong) UICollectionView * labelColor;




@property (nonatomic,strong) UIPageControl *commonFractionStatuteName;


#pragma mark - 底部


@property (nonatomic,strong) UIView *videoView;


@property (nonatomic,strong) AtControl *luxury;


@property (nonatomic,strong) AtControl *redirect;


@property (nonatomic,strong) UIView *golfClubHead;


#pragma mark - 礼物数量输入视图


@property (nonatomic,strong) UIView *appNetDoor;


@property (nonatomic,strong) UILabel *upgrade;


@property (nonatomic,strong) UILabel *gift;


#pragma mark - ActionSheet


@property (nonatomic,strong) SearchView *actionLevel;


#pragma mark - 描述


@property (nonatomic,strong) UIView *dotEqual;


@property (nonatomic,strong) YYLabel *hide;



@property (nonatomic,strong) UILabel *clickLink;



@property (nonatomic, weak) UIViewController *viewController;



@property (nonatomic, assign) BOOL countMatch;


@property (nonatomic, strong) MaxWith *underway;


@end


@implementation SocietalView


- (void)dealloc {
    
    [[NSNotificationCenter defaultCenter] removeObserver:self];
}


#pragma mark 初始化


- (instancetype)init
{
    
    self = [super init];

    
    if (self) {
        
        [self assign];
    }

    
    return self;
}


- (instancetype)initWithFrame:(CGRect)frame
{
    
    self = [super initWithFrame:frame];

    
    if (self) {
        
        [self assign];
    }

    
    return self;
}


- (MaxWith *)underway {
    
    if (!_underway) {
        
        _underway = [[MaxWith alloc] init];
    }
    
    return _underway;;
}


#pragma mark - 公共方法



+ (CGFloat)societalHiddenBbbb {

    
    return 96 + (100 * 2) + safeAreaBottomHeight();
}


- (void)presentBbbb:(UIViewController *)viewController
{
    
    self.viewController = viewController;
    
    NSIndexPath * indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
    
    
    [self waterSport:0];
}

- (void)anySend {
    
    [self addSubview:self.bbbb];
    
    [self.bbbb addSubview:self.array];
    
    [self.bbbb addSubview:self.streetSmart];
    
    self.bbbb.frame = CGRectMake(screenWidth(), -36, self.streetSmart.right, 30);

    
    [UIView animateWithDuration:(self.bbbb.width+screenWidth())/60 delay:0.5 options:(UIViewAnimationOptionCurveLinear | UIViewAnimationOptionRepeat) animations:^{
        
        self.bbbb.frame = CGRectMake(-self.bbbb.width, -36, self.streetSmart.right, 30);
    
    } completion:^(BOOL finished) {
        
        [self.bbbb removeFromSuperview];
    
    }];
}


#pragma mark - UI



- (void)assign {

    
    {
        
        [self.viewMatch addSubview:self.to];
        
        [self.viewMatch insertSubview:self.unsettled belowSubview:self.to];
        
        [self.viewMatch insertSubview:self.age belowSubview:self.to];

        
        
        [_unsettled mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.centerY.equalTo(self.viewMatch.mas_centerY);
            
            make.trailing.equalTo(self.viewMatch.mas_trailing).mas_offset(-7);
        
        }];

        
        
        [_to mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.top.and.right.and.bottom.equalTo(self.viewMatch);
            
            make.left.equalTo(self.age.mas_left);
        
        }];

        
        
        [_age mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.centerY.equalTo(self.viewMatch);
            
            make.right.equalTo(self.unsettled.mas_left).offset(-7);
            
            make.width.mas_greaterThanOrEqualTo(90);
        
        }];
    }

    
    {
        
        [self addSubview:self.commonFractionStatuteName];
        
        self.hello = [[UIScrollView alloc] init];
        
        self.hello.backgroundColor = UIColor.clearColor;
        
        [self addSubview:self.hello];

        
        [self.hello mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.top.mas_equalTo(self.viewMatch.mas_bottom);
            
            make.leading.and.trailing.mas_equalTo(self);
            
            make.height.mas_equalTo(kScrollContentHeight);
        
        }];

        
        
        [self.topDay mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.top.leading.and.bottom.mas_equalTo(self.hello);
            
            make.trailing.mas_equalTo(self.hello.mas_trailing);
            
            make.size.mas_equalTo(self.hello);
        
        }];
        
        [self.labelColor mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.top.leading.and.bottom.mas_equalTo(self.hello);
            
            make.trailing.mas_equalTo(self.hello.mas_trailing);
            
            make.size.mas_equalTo(self.hello);
        
        }];

        
        self.commonFractionStatuteName.numberOfPages = [[ShadowTo age]
                                          
                                          key:8];
        
        [self.commonFractionStatuteName mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.centerX.equalTo(self);
            
            make.height.mas_offset(8);
            
            make.bottom.mas_equalTo(self.golfClubHead.mas_top).mas_offset(0);
        
        }];
    }

    
    
    [self addSubview:self.golfClubHead];

    
    self.age.text = StringFromDenominateData(k_numberGiftImitationValue);

}


- (NSInteger)reply:(NSInteger)index{

    
    NSArray * sendingItems = [self itemsByRelate];

    
    
    if (sendingItems.count > 0 &&
        
        index < sendingItems.count) {

        
        OnModel *giftNumArrModel = sendingItems[index];
        
        return giftNumArrModel.num;
    }

    
    
    else{
        
        switch (index) {
            
            case 0: return 1; break;
            
            case 1: return 10; break;
            
            case 2: return 30; break;
            
            case 3: return 66; break;
            
            case 4: return 188; break;
            
            case 5: return 520; break;
            
            case 6: return 1314; break;
            
            default: return 0;break;
        }
    }
}


- (NSString*)graduatedTable:(NSInteger)index{

    
    NSArray * sendingItems = [self itemsByRelate];

    
    if (sendingItems.count > 0) {

        
        OnModel *giftNumArrModel = sendingItems[index];
        
        return giftNumArrModel.tag;
    
    }else{
        
        switch (index) {
            
            case 0:return NSLocalizedString(StringFromDenominateData(k_closedBlackTitle), @"");
            
            case 1:return NSLocalizedString(StringFromDenominateData(kEmployerAlienTitle), @"");
            
            case 2:return NSLocalizedString(StringFromDenominateData(kHutOftenData), @"");
            
            case 3:return NSLocalizedString(StringFromDenominateData(k_finishUtterAttitudeValue), @"");
            
            case 4:return NSLocalizedString(StringFromDenominateData(k_boringData), @"");
            
            case 5:return NSLocalizedString(StringFromDenominateData(kGrayTabModelTitle), @"");
            
            case 6:return NSLocalizedString(StringFromDenominateData(k_grandfatherName), @"");
            
            default:return @"";
        }
    }
}


- (NSInteger)viewBbbb:(NSInteger)num {
    
    NSInteger index = 0;
    
    for (OnModel *model in [self itemsByRelate]) {
        
        if (model.num == num) {
            
            break;
        }
        
        index ++;
    }
    
    return index;
}


- (NSInteger)contentAccept:(NSInteger)addIndex {
    
    if (addIndex > [self itemsByRelate].count-1) {
        
        return 0;
    }
    
    return addIndex;
}


+ (MaxTask*)hideGroin{

    
    MaxTask *config = [[MaxTask alloc] init];
    
    config.placeFloat = 220;
    
    config.info = [UIFont systemFontOfSize:12];
    
    config.rivetLine = 4;
    
    config.removeMessage = [UIColor whiteColor];

    
    return config;
}


- (void)waterSport:(NSInteger)index{

    
    if (self.infoLike.selectedMagnitude == 0) {
        
        NSInteger numberOfGift = [self reply:index];

        
        if (numberOfGift>0) {
            
            self.underway.hotGiftNum = numberOfGift;
            
            [self.luxury setTitle:[NSString stringWithFormat:@"%zd",numberOfGift] forState:UIControlStateNormal];
            
            [self report];
        
        }else{

            
            self.upgrade.text = self.underway.hotGiftName;
            
            self.gift.text = [NSString stringWithFormat:@"%ld%@",
                                           
                                           (long)self.underway.hotGiftNum,NSLocalizedString(@"个", @"")];

            
            self.actionLevel = [[SearchView alloc] initWithShow:self.appNetDoor
                                                          
                                                          putUpFloat:260
                                                       
                                                       guide:UIInterfaceOrientationPortrait];
            
            self.actionLevel.withTargetPush = self;

            
            [self.actionLevel comment:[UIApplication sharedApplication].keyWindow];
        }
    
    }else if (self.infoLike.selectedMagnitude == 1) {
        
        NSInteger numberOfGift = [self reply:index];

        
        if (numberOfGift>0) {
            
            self.underway.packageGiftNum = numberOfGift;
            
            [self.luxury setTitle:[NSString stringWithFormat:@"%zd",self.underway.packageGiftNum]
                                
                                forState:UIControlStateNormal];
            
            [self report];
        
        }else{
            
            if (self.underway.lastPackageIndexPath == nil) {
                
                [self push:(StringFromDenominateData(k_closedFibName))];
                
                return;
            }

            
            self.upgrade.text = self.underway.packageGiftName;
            
            self.gift.text = [NSString stringWithFormat:@"%ld%@",
                                               
                                               (long)self.underway.packageGiftNum,NSLocalizedString(@"个", @"")];

            
            self.actionLevel = [[SearchView alloc] initWithShow:self.appNetDoor
                                                          
                                                          putUpFloat:260
                                                       
                                                       guide:UIInterfaceOrientationPortrait];
            
            self.actionLevel.withTargetPush = self;

            
            [self.actionLevel comment:[UIApplication sharedApplication].keyWindow];
        }
    }


}


#pragma mark - lazy init

#pragma mark giftNum Input


- (UICollectionView *)topDay {
    
    if (!_topDay) {
        
        _topDay = [self owner];
        
        _topDay.tag = LFCRoomGiftChannelHot;
        
        [_topDay registerClass:[BucketReusableView class] forCellWithReuseIdentifier:@"BucketReusableView"];
        
        [self.hello addSubview:_topDay];
    }
    
    return _topDay;
}


- (UICollectionView *)labelColor {
    
    if (!_labelColor) {
        
        _labelColor = [self owner];
        
        _labelColor.hidden = YES;
        
        _labelColor.tag = LFCRoomGiftChannelPackage;
        
        [_labelColor registerClass:[NameView class] forCellWithReuseIdentifier:@"NameView"];
        
        [self.hello addSubview:_labelColor];
    }
    
    return _labelColor;
}


- (UICollectionView*)owner{
    
    UserBbbbViewLayout* layout = [[UserBbbbViewLayout alloc] init];
    
    layout.scrollDirection = UICollectionViewScrollDirectionHorizontal;
    
    UICollectionView* collectionView = [[UICollectionView alloc] initWithFrame:CGRectZero collectionViewLayout:layout];
    
    collectionView.prefetchingEnabled = NO;
    
    collectionView.delegate = self;
    
    collectionView.dataSource = self;
    
    collectionView.bounces = NO;
    
    collectionView.pagingEnabled = YES;
    
    collectionView.showsHorizontalScrollIndicator = NO;
    
    collectionView.backgroundColor = [UIColor clearColor];
    
    return collectionView;
}


- (UIView*)appNetDoor{

    
    if (!_appNetDoor) {

        
        _appNetDoor = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.width, 260)];
        
        _appNetDoor.backgroundColor = [UIColor blackColor];

        
        UIButton *backButton = [UIButton buttonWithType:UIButtonTypeCustom];
        
        [backButton setImage:[UserTextImage imageNamed:StringFromDenominateData(kRichData)]
                    
                    forState:UIControlStateNormal];
        
        [_appNetDoor addSubview:backButton];

        
        [backButton mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.left.and.top.equalTo(_appNetDoor);
            
            make.width.and.height.mas_equalTo(44);
        
        }];

        
        @autoreleasepool {} __weak __typeof__(self) self_weak_ = (self);;
        
        backButton.rac_command = [[RACCommand alloc] initWithSignalBlock:^RACSignal *(id input) {
            
            @autoreleasepool {}
             __strong __typeof__(self) self = self_weak_;
                            ;
            
            [self.actionLevel guestListWith];
            
            return [RACSignal empty];
        
        }];

        
        UIButton *sendButton = [UIButton buttonWithType:UIButtonTypeCustom];
        
        sendButton.backgroundColor = [UIColor colorWithRed:(251)/255.0f green:(161)/255.0f blue:(41)/255.0f alpha:1];
        
        sendButton.titleLabel.textColor = [UIColor whiteColor];

        
        sendButton.rac_command = [[RACCommand alloc] initWithSignalBlock:^RACSignal *(id input) {

            
            @autoreleasepool {}
             __strong __typeof__(self) self = self_weak_;
                            ;
            
            NSInteger giftNumber = self.infoLike.selectedMagnitude == 0 ? self.underway.hotGiftNum : self.underway.packageGiftNum;
            
            [self.luxury setTitle:[NSString stringWithFormat:@"%zd",giftNumber]
                                
                                forState:UIControlStateNormal];
            
            [self cancelBbbb];
            
            return [RACSignal empty];
        
        }];

        
        [sendButton setTitle:NSLocalizedString(StringFromDenominateData(k_residencyTrapPunchData), @"")
                    
                    forState:UIControlStateNormal];

        
        [_appNetDoor addSubview:sendButton];

        
        [sendButton mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.right.and.top.equalTo(_appNetDoor);
            
            make.width.mas_equalTo(106);
            
            make.height.mas_equalTo(44);
        
        }];

        
        ReceiveView *keyboard = [[ReceiveView alloc]
                                        
                                        initWithFrame:CGRectMake(0, 200, self.width, 216)];
        
        keyboard.lastClick = self;
        
        [_appNetDoor addSubview:keyboard];

        
        [keyboard mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.left.and.right.and.bottom.equalTo(_appNetDoor);
            
            make.height.mas_equalTo(216);
        
        }];
    }

    
    return _appNetDoor;
}


- (UILabel*)upgrade{

    
    if (!_upgrade) {

        
        _upgrade = [UILabel new];
        
        _upgrade.textColor = [ShowColor send];
        
        [self.appNetDoor addSubview:_upgrade];

        
        [_upgrade mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.left.mas_equalTo(44);
            
            make.top.equalTo(self.appNetDoor);
            
            make.height.mas_equalTo(44);
        
        }];
    }

    
    return _upgrade;
}


- (UILabel*)gift{

    
    if (!_gift) {
        
        _gift = [UILabel new];
        
        _gift.textAlignment = NSTextAlignmentCenter;
        
        _gift.textColor = [UIColor whiteColor];
        
        [self.appNetDoor addSubview:_gift];

        
        [_gift mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.centerX.mas_equalTo(self.appNetDoor.mas_centerX);
            
            make.top.equalTo(self.appNetDoor);
            
            make.height.mas_equalTo(44);
            
            make.width.mas_equalTo(100);
        
        }];
    }

    
    return _gift;
}


- (UIView*)dotEqual{

    
    if (!_dotEqual) {
        
        _dotEqual = [[UIView alloc] init];
        
        _dotEqual.layer.cornerRadius = 14.0;
        
        _dotEqual.layer.borderWidth = 1.0;
        
        _dotEqual.layer.masksToBounds = YES;
        
        _dotEqual.layer.borderColor = [ShowColor send].CGColor;
        
        _dotEqual.backgroundColor = [UIColor colorWithRed:(0)/255.0f green:(0)/255.0f blue:(0)/255.0f alpha:0.8];
        
        _dotEqual.hidden = YES;
        
        _dotEqual.center = CGPointMake(self.center.x, self.center.y-32);
        
        _dotEqual.size = CGSizeMake(30, 30);
        
        [self addSubview:_dotEqual];
    }

    
    return _dotEqual;
}


- (YYLabel*)hide{

    
    if (!_hide) {
        
        _hide = [[YYLabel alloc] init];
        
        _hide.font = [UIFont systemFontOfSize:12];
        
        _hide.textColor = [UIColor whiteColor];
        
        _hide.textAlignment = NSTextAlignmentCenter;
        
        _hide.numberOfLines = 0;
        
        _hide.backgroundColor = [UIColor colorWithRed:(0)/255.0f green:(0)/255.0f blue:(0)/255.0f alpha:0.8];
        
        [self.dotEqual addSubview:_hide];

        
        [_hide mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.left.equalTo(self.dotEqual.mas_left).offset(16);
            
            make.right.equalTo(self.dotEqual.mas_right).offset(-16);
            
            make.top.and.bottom.equalTo(self.dotEqual);
        
        }];
    }

    
    return _hide;
}


-(UILabel *)clickLink{
    
    if (!_clickLink) {
        
        _clickLink = [[UILabel alloc]init];
        
        _clickLink.text = StringFromDenominateData(k_peakMessageName);
        
        _clickLink.textColor = [UIColor colorWithHexString:((__bridge NSString *)CFSTR("#73F7CD"))];
        
        _clickLink.font = [UIFont regularShared:12];
        
        _clickLink.hidden = YES;
        
        [self.dotEqual addSubview:_clickLink];
        
        [_clickLink mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.bottom.mas_equalTo(-7);
            
            make.right.mas_equalTo(-16);
            
            make.height.mas_equalTo(17);
        
        }];

        
        UIView *line = [[UIView alloc]init];
        
        line.backgroundColor = _clickLink.textColor;
        
        [_clickLink addSubview:line];
        
        [line mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.height.mas_equalTo(1);
            
            make.bottom.mas_equalTo(-1);
            
            make.left.mas_equalTo(0);
            
            make.right.mas_equalTo(-12);
        
        }];
    }
    
    return _clickLink;
}


#pragma mark 头部

- (UIImageView *)bbbb {
    
    if (!_bbbb) {
        
        _bbbb= [[UIImageView alloc] init];
        
        _bbbb.image = [UserTextImage imageNamed:StringFromDenominateData(k_variationText)];
        
        _bbbb.layer.cornerRadius = 5;
        
        _bbbb.layer.masksToBounds = YES;
    }
    
    return _bbbb;
}

- (UIImageView *)array {
    
    if (!_array) {
        
        _array = [[UIImageView alloc] init];
        
        _array.frame = CGRectMake(8, 8, 14, 14);
        
        _array.image = [UserTextImage imageNamed:StringFromDenominateData(kBraveTitle)];
    }
    
    return _array;
}

- (UILabel *)streetSmart {
    
    if (!_streetSmart) {
        
        _streetSmart = [[UILabel alloc] init];
        
        _streetSmart.textColor = [UIColor whiteColor];
        
        _streetSmart.font = [UIFont regularShared:13];
        
        _streetSmart.text = [PlayColorBbbb size].sizeAggregation;
        
        CGFloat textWidth = [_streetSmart sizeThatFits:CGSizeMake(1.7976931348623157e+308, 30)].width;
        
        _streetSmart.frame = CGRectMake(25, 0, textWidth+8, 30);

    }
    
    return _streetSmart;
}

- (UIView *)viewMatch
{
    
    if (!_viewMatch) {
        
        _viewMatch = [[UIView alloc] init];
        
        _viewMatch.backgroundColor = UIColor.clearColor;
        
        [self addSubview:_viewMatch];

        
        [_viewMatch mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.top.leading.and.trailing.mas_equalTo(self);
            
            make.height.mas_equalTo(35);
        
        }];

        
        [_viewMatch addSubview:self.infoLike];

        
        [self age];
        
        [self to];
        
        [self unsettled];
    }

    
    return _viewMatch;
}


- (UILabel*)age{

    
    if (!_age) {
        
        _age = [[UILabel alloc] init];
        
        _age.textColor = [UIColor whiteColor];
        
        _age.font = [UIFont underbelly:PFSCTypeMedium substance:14];
        
        _age.textAlignment = 2;
    }

    
    return _age;
}



- (UIImageView*)unsettled{

    
    if (!_unsettled) {

        
        _unsettled = [[UIImageView alloc] init];
        
        _unsettled.image = [UserTextImage imageNamed:StringFromDenominateData(kCooperativeTimeViewValue)];
    }
    
    return _unsettled;
}



- (UIButton*)to{

    
    if (!_to) {
        
        _to = [UIButton buttonWithType:UIButtonTypeCustom];
        
        _to.backgroundColor = [[UIColor blackColor] colorWithAlphaComponent:0];

        
        @autoreleasepool {} __weak __typeof__(self) self_weak_ = (self);;
        
        _to.rac_command = [[RACCommand alloc] initWithSignalBlock:^RACSignal *(id input) {
            
            @autoreleasepool {}
             __strong __typeof__(self) self = self_weak_;
                            ;
            
            if (self.demonstrate) {
                
                self.demonstrate();
            }
            
            return [RACSignal empty];
        
        }];
    }
    
    return _to;
}


- (Segmented*)infoLike{

    
    if (!_infoLike) {

        
        NSArray * titlesArr = @[(StringFromDenominateData(kBackVehicleData)),(StringFromDenominateData(kDiversName))];

        
        CGFloat swichWidth = titlesArr.count * actualWidth(54) + actualWidth(20);

        
        _infoLike = [[Segmented alloc] initWithEffectItems:titlesArr];
        
        _infoLike.height = 36;
        
        _infoLike.backInfo = NO;
        
        _infoLike.local = self;
        
        _infoLike.flag = NO;
        
        _infoLike.selectedMagnitude = 0;
        
        _infoLike.refresh = NO;
        
        _infoLike.needOfSegment = NO;
        
        _infoLike.from = 2;
        
        _infoLike.level = [ShowColor send];

        
        _infoLike.width = swichWidth;

        
        _infoLike.package = [UIFont systemFontOfSize:15];
        
        _infoLike.withLevel = [UIFont systemFontOfSize:15];
        
        _infoLike.business = [UIColor clearColor];
        
        _infoLike.backgroundColor = [UIColor clearColor];
        
        _infoLike.tintColor = [UIColor clearColor];

        
        [_infoLike size:[UIColor colorWithRed:(255)/255.0f green:(255)/255.0f blue:(255)/255.0f alpha:0.8] page:UIControlStateNormal];
        
        [_infoLike size:[UIColor colorWithRed:(255)/255.0f green:(255)/255.0f blue:(255)/255.0f alpha:1] page:UIControlStateSelected];
        
        [_infoLike addTarget:self action:@selector(ignitionKey:) forControlEvents:UIControlEventValueChanged];
        
        [self.viewMatch addSubview:_infoLike];

        
        [_infoLike mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.left.and.top.equalTo(self.viewMatch);
            
            make.bottom.mas_equalTo(self.viewMatch);
            
            make.width.mas_equalTo(swichWidth);
        
        }];

        
        self.hello.contentSize = CGSizeMake(screenWidth()*titlesArr.count, kScrollContentHeight);
    }
    
    return _infoLike;
}


#pragma mark 中部


-(UIScrollView *)hello
{
    
    if (!_hello) {
        
        _hello = [[UIScrollView alloc] init];
    }

    
    return _hello;
}


#pragma mark 底部


- (UIView *)golfClubHead{
    
    if (!_golfClubHead) {
        
        _golfClubHead = [[UIView alloc] init];
        
        _golfClubHead.backgroundColor = [UIColor clearColor];
        
        [self addSubview:_golfClubHead];

        
        [_golfClubHead mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.bottom.offset(-safeAreaBottomHeight());
            
            make.height.mas_equalTo(44);
            
            (void)make.left.right;
        
        }];

        
        [_golfClubHead addSubview:self.videoView];
    }
    
    return _golfClubHead;
}


- (UIView*)videoView{

    
    if (!_videoView) {
        
        _videoView = [UIView new];
        
        _videoView.layer.borderColor = ([ShowColor send]).CGColor;
        
        _videoView.layer.borderWidth = 1;
        
        _videoView.layer.cornerRadius = 4;
        
        _videoView.clipsToBounds = YES;
        
        [self.golfClubHead addSubview:_videoView];

        
        [_videoView mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.right.equalTo(self.golfClubHead).offset(-10);
            
            make.centerY.equalTo(self.golfClubHead);
            
            make.height.mas_equalTo(29);
            
            make.width.mas_equalTo(120);
        
        }];

        
        [_videoView addSubview:self.luxury];
        
        [_videoView addSubview:self.redirect];
    }

    
    return _videoView;
}


- (UIPageControl *)commonFractionStatuteName{

    
    if (!_commonFractionStatuteName) {
        
        _commonFractionStatuteName = [[UIPageControl alloc] init];
        
        _commonFractionStatuteName.hidesForSinglePage = YES;
        
        _commonFractionStatuteName.defersCurrentPageDisplay = YES;
        
        _commonFractionStatuteName.currentPageIndicatorTintColor = [UIColor colorWithRed:(180)/255.0f green:(180)/255.0f blue:(180)/255.0f alpha:1];
        
        _commonFractionStatuteName.pageIndicatorTintColor = [UIColor colorWithRed:(60)/255.0f green:(60)/255.0f blue:(60)/255.0f alpha:1];
    }

    
    return _commonFractionStatuteName;
}


- (AtControl*)luxury{

    
    if (!_luxury) {
        
        _luxury = [AtControl buttonWithType:UIButtonTypeCustom];
        
        _luxury.titleLabel.font = [UIFont systemFontOfSize:14];
        
        _luxury.titleLabel.textAlignment = NSTextAlignmentRight;
        
        _luxury.backgroundColor = [UIColor clearColor];
        
        _luxury.imageView.contentMode = UIViewContentModeScaleAspectFit;

        
        [_luxury setTitleColor:[UIColor whiteColor]
                             
                             forState:UIControlStateNormal];
        
        [_luxury setTitle:NSLocalizedString(@"1", @"")
                        
                        forState:UIControlStateNormal];

        
        [_luxury setImage:[UserTextImage imageNamed:StringFromDenominateData(kMethodSternName)]
                        
                        forState:UIControlStateNormal];

        
        @autoreleasepool {} __weak __typeof__(self) self_weak_ = (self);;
        
        _luxury.rac_command = [[RACCommand alloc] initWithSignalBlock:^RACSignal *(id input) {
            
            @autoreleasepool {}
             __strong __typeof__(self) self = self_weak_;
                            ;
            
            [self bulkNeedCheck];
            
            return [RACSignal empty];
        
        }];

        
        [_luxury setSawLog:^CGRect(CGRect rect){
            
            return CGRectMake(rect.size.width-5-9,
                              
                              (rect.size.height-9)/2.0,
                              
                              9, 9);
        
        }];

        
        [_luxury setMessageContent:^CGRect(CGRect rect){
            
            return CGRectMake(0, 0,
                              
                              rect.size.width-5-9-4,
                              
                              rect.size.height);
        
        }];

        
        [self.videoView addSubview:_luxury];

        
        [_luxury mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.top.and.left.and.bottom.equalTo(self.videoView);
            
            make.width.equalTo(self.videoView).multipliedBy(1.0/2);
        
        }];
    }
    
    return _luxury;
}


- (AtControl*)redirect{

    
    if (!_redirect) {
        
        _redirect = [AtControl buttonWithType:UIButtonTypeCustom];
        
        _redirect.titleLabel.font = [UIFont boldSystemFontOfSize:15];
        
        [_redirect setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
        
        [_redirect setTitle:NSLocalizedString(StringFromDenominateData(k_residencyTrapPunchData), @"") forState:UIControlStateNormal];
        
        [_redirect snap:[ShowColor send] current:UIControlStateNormal];
        
        [_redirect snap:[UIColor colorWithRed:(180)/255.0f green:(180)/255.0f blue:(180)/255.0f alpha:1] current:UIControlStateHighlighted];
        
        [_redirect snap:[UIColor colorWithRed:(180)/255.0f green:(180)/255.0f blue:(180)/255.0f alpha:1] current:UIControlStateDisabled];
        
        [_redirect addTarget:self
                        
                        action:@selector(doingAngel)
              
              forControlEvents:UIControlEventTouchUpInside];
        
        [self.videoView addSubview:_redirect];

        
        [_redirect mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.top.and.right.and.bottom.equalTo(self.videoView);
            
            make.width.equalTo(self.videoView).multipliedBy(1.0/2);
        
        }];
    }
    
    return _redirect;
}


#pragma mark - Action


- (void)cancelBbbb{
    
    if (self.infoLike.selectedMagnitude == 0 && self.underway.hotGiftNum < 1) {
        
        [self push:(StringFromDenominateData(kFileStateName))];
        
        return;
    }
    
    if (self.infoLike.selectedMagnitude == 1) {
        
        if (self.underway.packageGiftNum < 1) {
            
            [self push:StringFromDenominateData(kFileStateName)];
            
            return;
        
        }else if (self.underway.lastPackageIndexPath == nil) {
            
            [self push:StringFromDenominateData(k_closedFibName)];
            
            return;
        }
    }
    
    _redirect.userInteractionEnabled = NO;
    
    NSInteger index;
    
    NSDictionary * param;
    
    NSInteger packTYpe = 0;
    
    switch (self.infoLike.selectedMagnitude) {
        
        case 0:{
            
            index = self.underway.lastHotIndexPath.row;
            
            HeadModel * model = [self telecasting][index];
            
            param = @{StringFromDenominateData(kElementaryValue) : [NSNumber numberWithInteger:model.gid],
                         
                         StringFromDenominateData(kWildlifeContent): [NSNumber numberWithInteger:self.underway.hotGiftNum],
                         
                         StringFromDenominateData(kAirmanContent) : self.phone?:@""};

            
            break;
        }
        
        case 1:{
            
            packTYpe = 1;
            
            index = self.underway.lastPackageIndexPath.row;
            
            IdentityMaxModel *model = [self income][index];
            
            param = @{StringFromDenominateData(kElementaryValue) : [NSNumber numberWithInteger:model.pid],
                         
                         StringFromDenominateData(kWildlifeContent): [NSNumber numberWithInteger:self.underway.packageGiftNum],
                         
                         StringFromDenominateData(kAirmanContent) : self.phone?:@"",
                         
                         StringFromDenominateData(k_userValue) : @(model.pkgItemsetId).description};
            
            break;
        }
        
        default:
            
            break;
    }

    
    if (param) {
        
        
        Reachability *curReach = [PlayColorBbbb size].data;
        
        NetworkStatus currentStatus = [curReach currentReachabilityStatus];
        
        if (currentStatus == NotReachable) {
            
            [self.viewController push:StringFromDenominateData(kCoordinateTitle)];
            
            _redirect.userInteractionEnabled = YES;
            
            return;
        }

        
        @autoreleasepool {} __weak __typeof__(self) self_weak_ = (self);;
        
        [[ShadowTo age] proposal:param gift:packTYpe
                                                                  
                                                                  key:^(BOOL success, NSDictionary * _Nonnull extral, NSError * _Nonnull error) {
            
            @autoreleasepool {}
             __strong __typeof__(self) self = self_weak_;
                            ;
            
            _redirect.userInteractionEnabled = YES;
            
            [self.actionLevel guestListWith];
            
            if (self.treat) {
                
                self.treat(extral,error);
            }
            
            if (self.infoLike.selectedMagnitude == 1) {
                
                if (self.underway.lastPackageIndexPath.row < [self income].count) {
                    
                    IdentityMaxModel *model = [self income][self.underway.lastPackageIndexPath.row];
                    
                    if (model.pkgItemsetId != self.underway.lastPackageItemID) {
                        
                        self.underway.lastPackageItemID = -1;
                        
                        self.underway.lastPackageIndexPath = nil;
                        
                        self.underway.packageGiftNum = 1;
                        
                        [self waterSport:0];
                    }
                
                }else{
                    
                    self.underway.lastPackageItemID = -1;
                    
                    self.underway.lastPackageIndexPath = nil;
                    
                    self.underway.packageGiftNum = 1;
                    
                    [self waterSport:0];
                }
                
                [self.labelColor reloadData];
                
                self.commonFractionStatuteName.numberOfPages = [self income].count > 0?(([self income].count - 1)/8 + 1):0;
            }
        
        }];
    }

}


- (void)ignitionKey:(Segmented *)control{

    
    switch (control.selectedMagnitude) {
        
        case 0:
            
            self.commonFractionStatuteName.numberOfPages = (([self telecasting].count - 1)/8 + 1);
            
            self.topDay.hidden = NO;
            
            self.labelColor.hidden = YES;
            
            [self.luxury setTitle:[NSString stringWithFormat:@"%zd",self.underway.hotGiftNum] forState:UIControlStateNormal];
            
            self.luxury.enabled = !_countMatch;
            
            break;
        
        case 1:
            
            [[ShadowTo age] container:NO];
            
            [self followInChatUp];
            
            self.commonFractionStatuteName.numberOfPages = [self income].count > 0?(([self income].count - 1)/8 + 1):0;
            
            self.topDay.hidden = YES;
            
            self.labelColor.hidden = NO;
            
            [self.luxury setTitle:[NSString stringWithFormat:@"%zd",self.underway.packageGiftNum] forState:UIControlStateNormal];
            
            self.luxury.enabled = YES;
            
            break;
        
        default:
            
            break;
    }
}


- (void)bulkNeedCheck{

    
    if (self.infoLike.selectedMagnitude == 1 && self.underway.lastPackageIndexPath == nil) {
        
        [self push:(StringFromDenominateData(k_closedFibName))];
        
        return;
    }

    
    NSInteger rows;
    
    NSArray * sendingItems = [self itemsByRelate];

    
    if (sendingItems.count > 0) {
        
        rows = sendingItems.count + 1;
    
    }else{
        
        rows = 8;
    }

    
    [[BbbbAt benchItem] setEvent:self];
    
    [[BbbbAt benchItem] setAgeIdentify:StringFromDenominateData(kSearchValue)];
    
    [[BbbbAt benchItem] setFeedback:[UIColor colorWithRed:(255)/255.0f green:(255)/255.0f blue:(255)/255.0f alpha:1]];
    
    [[BbbbAt benchItem] setOutline:[UIColor colorWithRed:(255)/255.0f green:(255)/255.0f blue:(255)/255.0f alpha:1]];
    
    [[BbbbAt benchItem] setRid:[UIColor colorWithRed:(230)/255.0f green:(230)/255.0f blue:(230)/255.0f alpha:1]];
    
    [[BbbbAt benchItem] setFamilyUser:YES];
    
    [[BbbbAt benchItem] admin:[UIApplication sharedApplication].delegate.window
                               
                               demonstrateImageRows:CGRectMake(self.width-90, screenHeight() -44, 10, 10)
                                   
                                   isRequest:rows];
}



- (void)doingAngel {
    
    [self cancelBbbb];
}


- (void)report{

    
    if (self.infoLike.selectedMagnitude == 0) {
        
        BucketReusableView * cell = (BucketReusableView *)[self.topDay
                                                       
                                                       cellForItemAtIndexPath:self.underway.lastHotIndexPath];
        
        [cell placeFunc:self.underway.hotGiftNum];

    
    }else if (self.infoLike.selectedMagnitude == 1) {
        
        NameView * cell = (NameView *)[self.labelColor
                                                       
                                                       cellForItemAtIndexPath:self.underway.lastPackageIndexPath];
        
        [cell can:self.underway.packageGiftNum];
    }
}


- (NSArray *)telecasting
{
    
    return [[ShadowTo age] text];
}


- (NSArray *)income {
    
    return [[ShadowTo age] moment];
}


- (NSArray *)itemsByRelate
{
    
    return [[ShadowTo age] array];
}


- (void)freshInfo{
    
    if (self.modify) {
        
        self.modify();
    }
}


#pragma mark - gift description

- (void)frame:(PanelModel*)model{

    
    HeadModel *giftModel;
    
    IdentityMaxModel *pkgModel;

    
    if ([model isKindOfClass:[HeadModel class]]) {
        
        giftModel = (HeadModel*)model;
    }

    
    if ([model isKindOfClass:[IdentityMaxModel class]]) {
        
        pkgModel = (IdentityMaxModel*)model;
    }

    
    NSString *tips = giftModel?giftModel.giftDescription:(pkgModel?pkgModel.giftDescription:@"");
    
    if (FZUtils.isEmptyString(tips)) {
        
        [self belowFinish];
        
        return;
    }

    
    YYTextLayout *yyLayout = giftModel?giftModel.yyLayout:(pkgModel?pkgModel.yyLayout:nil);

    
    if (!yyLayout) {
        
        NSMutableArray *attrbutedArray = [NSMutableArray new];
        
        NSMutableParagraphStyle * para = nil;
        
        para = [[NSMutableParagraphStyle alloc] init];
        
        para.lineBreakMode = NSLineBreakByCharWrapping;
        
        para.alignment = NSTextAlignmentCenter;

        
        [NSObject reply:tips
                                                 
                                                 pointBlankCard:attrbutedArray];

        
        MaxTask *config = [SocietalView hideGroin];

        
        yyLayout = [SelectLabel concealed:attrbutedArray
                                             
                                             lineFloat:config.placeFloat
                                                      
                                                      goopPara:config
                                                        
                                                        streetwise:para];

        
        giftModel?(giftModel.yyLayout = yyLayout):(pkgModel?(pkgModel.yyLayout = yyLayout):(pkgModel));
    }

    
    self.hide.textLayout = yyLayout;
    
    self.hide.textAlignment = NSTextAlignmentCenter;
    
    [self.hide sizeToFit];
    
    CGFloat height = yyLayout.textBoundingSize.height + 12;
    
    CGFloat width = yyLayout.textBoundingSize.width + 30;
    
    self.dotEqual.layer.cornerRadius = height/2.0;
    
    self.dotEqual.width = width;
    
    self.dotEqual.height = height;
    
    self.dotEqual.center = CGPointMake(self.center.x,
                                                          
                                                          self.center.y-32);

    
    self.dotEqual.alpha = 1.0;
    
    self.dotEqual.hidden = NO;


    
    if (self.countMatch) {

        
        UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(freshInfo)];
        
        [self.dotEqual addGestureRecognizer:tap];
        
        self.hide.textColor = UIColor.whiteColor;
        
        self.hide.textAlignment = NSTextAlignmentLeft;
        
        self.clickLink.hidden = NO;
    
    }else{
        
        [UIView animateWithDuration:0.3
                              
                              delay:5.0
                            
                            options:UIViewAnimationOptionLayoutSubviews
                         
                         animations:^{
            
            self.dotEqual.alpha = 0.0;
        
        } completion:NULL];

        
        self.clickLink.hidden = YES;
    }


}


- (void)belowFinish {
    
    _dotEqual.hidden = YES;
}


#pragma mark - BbbbAt delegate

- (void)says:(BbbbAt*)fzMenu;{

}


- (void)personaling:(BbbbAt*)fzMenu;{

}


- (CGFloat)page:(BbbbAt*)fzMenu terrace:(NSInteger)row {
    
    return 28;
}


- (CGFloat)send:(BbbbAt*)fzMenu guess:(NSInteger)row {
    
    return 145;
}


- (UIView*)atExplainRow:(BbbbAt*)fzMenu masterKey:(NSInteger)row {

    
    NSString *text = @"";
    
    UIView *itemView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 150, 28)];

    
    NSArray * sendingItems = [self itemsByRelate];
    
    text = [NSString stringWithFormat:@"%@%@",
                               
                               [@([self reply:row]) stringValue],
                               
                               NSLocalizedString(@"个", @"")];
    
    NSInteger indexP;

    
    if (sendingItems.count > 0) {
        
        indexP = sendingItems.count;
    
    }else{
        
        indexP = 7;
    }

    
    if (row<indexP) {
        
        UILabel *indexLabel = [UILabel new];
        
        indexLabel.textColor = [ShowColor current];
        
        indexLabel.font = [UIFont systemFontOfSize:14];
        
        indexLabel.text = text;
        
        [itemView addSubview:indexLabel];

        
        [indexLabel mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.left.equalTo(itemView).offset(17);
            
            make.centerY.equalTo(itemView);
        
        }];

        
        NSString *descString = [self graduatedTable:row];
        
        UILabel *descLabel = [UILabel new];
        
        descLabel.textColor = [ShowColor table];
        
        descLabel.font = [UIFont systemFontOfSize:14];
        
        descLabel.text = descString;
        
        [itemView addSubview:descLabel];

        
        [descLabel mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.left.equalTo(indexLabel.mas_right).offset(15);
            
            make.centerY.equalTo(itemView);
        
        }];

        
        if (sendingItems.count > 0) {

            
            OnModel *giftNumModel = sendingItems[row];

            
            if (giftNumModel.targetPid > 0) {
                
                descLabel.textColor = [UIColor redColor];
                
                indexLabel.textColor = [UIColor redColor];
            
            }else{
                
                descLabel.textColor = [ShowColor table];
                
                indexLabel.textColor = [ShowColor current];
            }
        }
    
    }else{
        
        UILabel *descLabel = [UILabel new];
        
        descLabel.textColor = [ShowColor table];
        
        descLabel.font = [UIFont systemFontOfSize:14];
        
        descLabel.text = (StringFromDenominateData(kToonDiversData));
        
        descLabel.textAlignment = NSTextAlignmentCenter;
        
        [itemView addSubview:descLabel];

        
        [descLabel mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.centerX.equalTo(itemView);
            
            make.centerY.equalTo(itemView);
        
        }];
    }

    
    return itemView;
}


- (BOOL)acceptBy:(BbbbAt*)fzMenu next:(NSInteger)row {
    
    return YES;
}


- (void)show:(BbbbAt*)fzMenu family:(NSInteger)row {

    
    [self waterSport:row];
}



#pragma mark - actionSheet delegate

- (void)somebody:(SearchView *)actionSheet
                
                size:(__kindof UIView *)subView{

    
    NSInteger giftNum = 1;
    
    if (self.infoLike.selectedMagnitude == 0) {
        
        giftNum = self.underway.hotGiftNum < 1 ? 1 : self.underway.hotGiftNum;
    
    }else {
        
        giftNum = self.underway.packageGiftNum < 1 ? 1 : self.underway.packageGiftNum;
    }

    
    [self.luxury setTitle:[NSString stringWithFormat:@"%zd", giftNum]
                        
                        forState:UIControlStateNormal];
    
    [self report];
}


#pragma mark - ReceiveView delegate

- (void)pic:(NSInteger) number{

    
    NSInteger inputNumber = 0;
    
    switch (self.infoLike.selectedMagnitude) {
        
        case 0:{
            
            self.underway.hotGiftNum = ((9999) < (self.underway.hotGiftNum*10+number) ? (9999) : (self.underway.hotGiftNum*10+number));
            
            inputNumber = self.underway.hotGiftNum;
            
            break;
        }
        
        case 1:{
            
            self.underway.packageGiftNum = ((9999) < (self.underway.packageGiftNum*10+number) ? (9999) : (self.underway.packageGiftNum*10+number));
            
            inputNumber = self.underway.packageGiftNum;
            
            break;
        }
        
        default:
            
            break;
    }

    
    self.gift.text = [NSString stringWithFormat:@"%ld %@",inputNumber,NSLocalizedString(@"个", @"")];
    
    [self report];
}

- (void)activity{

    
    NSInteger inputNumber = 0;
    
    switch (self.infoLike.selectedMagnitude) {
        
        case 0:{
            
            self.underway.hotGiftNum = self.underway.hotGiftNum / 10;
            
            inputNumber = self.underway.hotGiftNum;
            
            break;
        }
        
        case 1:{
            
            self.underway.packageGiftNum = self.underway.packageGiftNum / 10;
            
            inputNumber = self.underway.packageGiftNum;
            
            break;
        }
        
        default:
            
            break;
    }
    
    self.gift.text = [NSString stringWithFormat:@"%ld %@",inputNumber,NSLocalizedString(@"个", @"")];
    
    [self report];
}


- (void) beforeConversation{

}


#pragma mark - UICollectionviewDelegate

- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView{
    
    return 1;
}


- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section {
    
    NSInteger rowNum = 0;
    
    switch (collectionView.tag) {
        
        case LFCRoomGiftChannelHot:
            
            rowNum = [self telecasting].count;
            
            break;
        
        case LFCRoomGiftChannelPackage:
            
            rowNum = [self income].count;
            
            break;

        
        default:
            
            break;
    }


    
    return rowNum;
}


- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {

    
    if (collectionView.tag == LFCRoomGiftChannelPackage) {
        
        NameView *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"NameView" forIndexPath:indexPath];
        
        if (indexPath.row < [self income].count) {
            
            IdentityMaxModel *model = [self income][indexPath.row];
            
            [cell setButtonGuessModel:model];
            
            cell.potSelected = (self.underway.lastPackageIndexPath == indexPath && self.underway.lastPackageItemID == model.pkgItemsetId);
            
            NSInteger selectedNum = (self.underway.lastPackageIndexPath == indexPath && self.underway.lastPackageItemID == model.pkgItemsetId) ? self.underway.packageGiftNum : 1;
            
            [cell can:self.underway.packageGiftNum];

        }

        
        return cell;
    
    }else {
        
        BucketReusableView * cell = [collectionView
                                   
                                   dequeueReusableCellWithReuseIdentifier:NSStringFromClass([BucketReusableView class])
                                   
                                   forIndexPath:indexPath];

        
        if (indexPath.row < [self telecasting].count) {
            
            HeadModel *model = [self telecasting][indexPath.row];
            
            [cell setPair:model];
            
            cell.videoHide = (self.underway.lastHotIndexPath == indexPath);
        }

        
        
        if (indexPath.row == 0) {
            
            HeadModel *fmodel = [[self telecasting] firstObject];
            
            _countMatch = (fmodel.showType == GJChatGiftType_myStery);
            
            self.luxury.enabled = !_countMatch;
            
            [self.luxury setTitleColor:_countMatch ?[UIColor lightGrayColor]:[UIColor whiteColor] forState:UIControlStateNormal];
            
            [self frame:fmodel];
        }

        
        return cell;
    }
}


- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath {

    
    if (collectionView.tag == LFCRoomGiftChannelPackage) {
        
        if (self.underway.lastPackageIndexPath == indexPath) {
            
            IdentityMaxModel *model = [self income][indexPath.row];
            
            self.underway.packageGiftName = model.name;
            
            if (self.underway.lastPackageItemID == model.pkgItemsetId) {
                
                NSInteger sendIndex = [self viewBbbb:self.underway.packageGiftNum];
                
                sendIndex = [self contentAccept:sendIndex+1];
                
                [self waterSport:sendIndex];
            
            }else{
                
                [self waterSport:0];
                
                [self frame:model];
            }
        
        }else {
            
            
            IdentityMaxModel *model = [self income][indexPath.row];
            
            self.underway.packageGiftName = model.name;

            
            NameView * cell = (NameView *)[collectionView cellForItemAtIndexPath:self.underway.lastPackageIndexPath];
            
            cell.potSelected = NO;

            
            NameView * currentCell = (NameView *)[collectionView cellForItemAtIndexPath:indexPath];
            
            currentCell.potSelected = YES;

            
            self.underway.lastPackageIndexPath = indexPath;
            
            self.underway.lastPackageItemID = model.pkgItemsetId;
            
            
            [self waterSport:0];
            
            [self frame:model];
        }
    
    }else {
        
        
        if (self.underway.lastHotIndexPath == indexPath) {
            
            HeadModel *model = [self telecasting][indexPath.row];
            
            self.underway.hotGiftName = model.name;

            
            if ((model.showType == GJChatGiftType_myStery)) {
                
                [self waterSport:0];
                
                return;
            }

            
            NSInteger sendIndex = [self viewBbbb:self.underway.hotGiftNum];
            
            sendIndex = [self contentAccept:sendIndex+1];
            
            [self waterSport:sendIndex];
        
        }else {
            
            
            HeadModel *model = [self telecasting][indexPath.row];
            
            self.underway.hotGiftName = model.name;
            
            BucketReusableView * cell = (BucketReusableView *)[collectionView cellForItemAtIndexPath:self.underway.lastHotIndexPath];
            
            cell.videoHide = NO;

            
            BucketReusableView * currentCell = (BucketReusableView *)[collectionView cellForItemAtIndexPath:indexPath];
            
            currentCell.videoHide = YES;

            
            self.underway.lastHotIndexPath = indexPath;
            
            
            [self waterSport:0];

            
            _countMatch = (model.showType == GJChatGiftType_myStery);

            
            self.luxury.enabled = !_countMatch;
            
            [self.luxury setTitleColor:_countMatch ?[UIColor lightGrayColor]:[UIColor whiteColor] forState:UIControlStateNormal];

            
            [self frame:model];

        }
    }
}

//: - (void)collectionView:(UICollectionView *)collectionView didDeselectItemAtIndexPath:(NSIndexPath *)indexPath
- (void)collectionView:(UICollectionView *)collectionView didDeselectItemAtIndexPath:(NSIndexPath *)indexPath
{
//    if (collectionView == self.hotGiftCollectionView) {
//        
//        BucketReusableView * cell = (BucketReusableView *)[self.hotGiftCollectionView
//                                                       cellForItemAtIndexPath:indexPath];










}


#pragma mark - UIScrollviewDelegate


- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    
    if (scrollView == self.topDay) {
        
        [self family:scrollView.contentOffset.x];
    
    }else if (scrollView == self.labelColor) {
        
        [self family:scrollView.contentOffset.x];
    }
}



- (void)family:(CGFloat)offsetX
{
    
    CGFloat traillingOffsetX = offsetX + screenWidth();
    
    traillingOffsetX = (traillingOffsetX < screenWidth())?screenWidth():traillingOffsetX;

    
    NSInteger page = traillingOffsetX / screenWidth() - 1;
    
    page = (page < 0)?0:page;

    
    NSInteger addition = (((long)traillingOffsetX % (long)screenWidth()) > 0)?1:0;
    
    page += addition;

    
    self.commonFractionStatuteName.currentPage = page;
}

//: - (void)updateBalance:(NSString *)balance
- (void)streetSmart:(NSString *)balance
{
//    double balance = [[ShadowTo sharedGiftManager] getbalanceValue];
    
    self.age.text = [StringFromDenominateData(k_booPartyTitle) stringByAppendingString:balance?:@""];;
}



- (void)followInChatUp {

    
    if ([ShadowTo age].attention == NO) {
        
        [self.infoLike male:YES rhymesterVideo:1]; 
    
    }else {
        
        [self.infoLike male:NO rhymesterVideo:1]; 
    }
}


- (void)family {

    
    
    self.underway.lastPackageIndexPath = nil;
    
    self.underway.packageGiftName = @"";
    
    self.underway.packageGiftNum = 1;

    
    NSInteger giftCount = [self telecasting].count;

    
    if (self.infoLike.selectedMagnitude == 1) {
        
        
        [self.luxury setTitle:@"1" forState:UIControlStateNormal];
        
        [[ShadowTo age] container:NO];
        
        giftCount = [self income].count;

    }

    
    [self followInChatUp];
    
    self.commonFractionStatuteName.numberOfPages = ((giftCount - 1)/8 + 1);

    
    UserBbbbViewLayout *hotLayout = (UserBbbbViewLayout*)self.topDay.collectionViewLayout;
    
    UserBbbbViewLayout *packLayout = (UserBbbbViewLayout*)self.labelColor.collectionViewLayout;
    
    hotLayout.charm = [self telecasting];
    
    packLayout.charm = [self income];

    
    [self.topDay reloadData];
    
    [self.labelColor reloadData];

    
    
    HeadModel *hotModel = [[self telecasting] firstObject];
    
    self.underway.hotGiftName = hotModel.name;

    

    
    if ([self telecasting].count > 0) {
        
        [self.topDay selectItemAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] animated:NO scrollPosition:UICollectionViewScrollPositionNone];
    }
//    [self.hotGiftCollectionView scrollToItemAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] atScrollPosition:UICollectionViewScrollPositionLeft animated:NO];

    
    if ([self income].count > 0) {
        
        [self.labelColor selectItemAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] animated:NO scrollPosition:UICollectionViewScrollPositionNone];
        
        [self.labelColor scrollToItemAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] atScrollPosition:UICollectionViewScrollPositionLeft animated:NO];
    }
}


@end


@implementation MaxWith


- (instancetype)init {
    
    if (self = [super init]) {
        
        _lastHotIndexPath = [NSIndexPath indexPathForRow:0 inSection:0];
        
        _hotGiftNum = 1;
        
        _packageGiftNum = 1;
    }
    
    return self;
}


@end


Byte * DenominateDataToCache(Byte *data) {
    int modelMethod = data[0];
    int swellShelf = data[1];
    Byte pastCoordinate = data[2];
    int positionHotel = data[3];
    if (!modelMethod) return data + positionHotel;
    for (int i = positionHotel; i < positionHotel + swellShelf; i++) {
        int value = data[i] + pastCoordinate;
        if (value > 255) {
            value -= 256;
        }
        data[i] = value;
    }
    data[0] = 0;
    data[positionHotel + swellShelf] = 0;
    return data + positionHotel;
}

NSString *StringFromDenominateData(Byte *data) {
    return [NSString stringWithUTF8String:(char *)DenominateDataToCache(data)];
}
