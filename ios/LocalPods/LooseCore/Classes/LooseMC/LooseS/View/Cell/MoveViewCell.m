
#import <Foundation/Foundation.h>

NSString *StringFromSmoothenData(Byte *data);



Byte k_aggressionName[] = {76, 8, 52, 12, 71, 155, 139, 134, 138, 244, 38, 30, 151, 149, 160, 160, 136, 157, 161, 153, 25};



Byte k_videoFileValue[] = {12, 7, 48, 8, 69, 23, 39, 140, 147, 159, 158, 164, 149, 158, 164, 34};



Byte k_skilledContent[] = {38, 27, 27, 10, 26, 220, 118, 171, 197, 69, 132, 126, 138, 137, 122, 135, 132, 124, 138, 143, 132, 124, 137, 122, 143, 132, 124, 137, 136, 132, 127, 144, 122, 135, 64, 135, 127, 31};



Byte k_biologicContent[] = {74, 11, 68, 12, 241, 131, 93, 192, 37, 133, 234, 150, 167, 179, 177, 177, 169, 178, 184, 141, 178, 170, 179, 108};



Byte kBooGrayValue[] = {42, 10, 27, 5, 223, 139, 141, 132, 145, 124, 143, 128, 96, 137, 127, 20};



Byte kNonethelessData[] = {41, 14, 40, 8, 200, 38, 74, 126, 131, 16, 207, 174, 17, 202, 185, 17, 168, 199, 17, 173, 181, 133, 219};



Byte k_stateHotelTitle[] = {51, 5, 82, 13, 207, 26, 135, 130, 245, 168, 32, 222, 102, 183, 202, 198, 196, 179, 238};



Byte k_askShelfData[] = {51, 22, 25, 12, 197, 116, 25, 20, 35, 155, 33, 39, 130, 124, 136, 135, 94, 123, 131, 132, 113, 77, 120, 140, 144, 126, 135, 120, 127, 136, 133, 133, 136, 144, 37};



Byte k_recordTitle[] = {1, 6, 56, 12, 27, 43, 86, 163, 51, 245, 133, 86, 125, 165, 167, 133, 171, 159, 116};



Byte k_elevenText[] = {40, 6, 85, 13, 150, 179, 70, 4, 3, 177, 245, 228, 135, 172, 186, 193, 162, 200, 188, 210};



Byte k_shelfName[] = {89, 5, 82, 8, 230, 137, 65, 28, 191, 197, 185, 155, 182, 138};



Byte k_matedText[] = {36, 25, 41, 4, 146, 140, 152, 151, 136, 151, 142, 160, 156, 136, 143, 138, 150, 146, 149, 162, 136, 157, 155, 138, 159, 142, 149, 142, 155, 41};



Byte kMagnitudeText[] = {99, 4, 81, 5, 177, 191, 178, 190, 182, 22};



Byte kBehavioralVoiceAlienValue[] = {30, 9, 97, 13, 153, 20, 197, 105, 57, 154, 124, 91, 70, 194, 213, 213, 198, 207, 213, 202, 208, 207, 122};



Byte kVariationValue[] = {25, 24, 58, 6, 46, 157, 175, 168, 173, 169, 166, 176, 159, 158, 135, 159, 168, 174, 163, 169, 168, 159, 158, 135, 173, 161, 153, 95, 180, 158, 104};



Byte k_sparText[] = {51, 11, 42, 8, 58, 113, 60, 169, 151, 143, 157, 157, 139, 145, 143, 126, 163, 154, 143, 57};



Byte kPartyData[] = {14, 4, 50, 12, 21, 89, 21, 48, 32, 248, 127, 27, 110, 147, 166, 112, 30};



Byte k_propertyText[] = {71, 9, 69, 9, 76, 100, 56, 37, 68, 166, 186, 169, 174, 180, 137, 166, 185, 166, 43};



Byte k_agentCowText[] = {45, 7, 96, 13, 69, 239, 224, 33, 227, 179, 7, 27, 231, 205, 211, 199, 169, 206, 198, 207, 96};



Byte k_consumeValue[] = {54, 5, 81, 6, 68, 139, 197, 192, 166, 186, 181, 74};



Byte k_cooperativeEdgeTitle[] = {47, 12, 70, 9, 60, 181, 212, 81, 40, 179, 172, 137, 181, 175, 180, 153, 186, 167, 186, 187, 185, 78};



Byte kElevenText[] = {81, 8, 51, 12, 229, 97, 169, 120, 161, 22, 47, 17, 156, 160, 148, 154, 152, 136, 165, 156, 170};



Byte kValueClinicData[] = {67, 10, 82, 8, 14, 23, 87, 191, 200, 187, 182, 183, 193, 159, 179, 198, 181, 186, 43};



Byte kConsumeScaleContent[] = {95, 29, 32, 14, 93, 108, 4, 117, 173, 189, 41, 177, 220, 41, 137, 131, 143, 142, 127, 140, 137, 129, 143, 148, 137, 129, 142, 127, 154, 129, 137, 152, 137, 129, 142, 127, 132, 133, 134, 129, 149, 140, 148, 147};



Byte kFileSwitchdName[] = {6, 6, 85, 13, 68, 63, 102, 140, 3, 11, 192, 225, 96, 134, 133, 134, 138, 133, 141, 122};



Byte kMuseumDeriveQuitValue[] = {92, 10, 9, 5, 166, 111, 120, 123, 118, 106, 125, 93, 130, 121, 110, 194};



Byte k_bureauName[] = {74, 2, 27, 11, 6, 7, 128, 25, 186, 79, 183, 136, 129, 56};



Byte kEquivalentMeetingContent[] = {63, 5, 95, 13, 39, 171, 61, 90, 118, 238, 156, 33, 134, 207, 203, 192, 200, 205, 92};



Byte kOmitValue[] = {61, 5, 68, 10, 93, 178, 160, 80, 90, 126, 128, 173, 177, 171, 130, 167};



Byte kSparTotName[] = {44, 11, 86, 5, 226, 198, 197, 201, 202, 169, 203, 198, 198, 197, 200, 202, 66};



Byte k_steadilyEmpireContent[] = {12, 6, 51, 10, 42, 132, 209, 192, 183, 100, 135, 171, 167, 128, 166, 154, 131};



Byte k_bucketEticValue[] = {75, 10, 24, 6, 112, 66, 115, 0, 165, 161, 255, 192, 215, 117, 61, 88, 207};



Byte k_loveData[] = {63, 25, 12, 5, 244, 117, 111, 123, 122, 107, 120, 117, 109, 123, 128, 117, 109, 122, 107, 128, 117, 109, 122, 121, 117, 112, 129, 107, 120, 61, 7};



Byte kResidencyText[] = {93, 6, 39, 9, 24, 78, 224, 162, 238, 99, 86, 144, 148, 142, 101, 214};



Byte k_unemploymentName[] = {60, 25, 22, 13, 19, 102, 84, 134, 213, 214, 214, 129, 95, 127, 131, 125, 108, 104, 112, 88, 130, 99, 117, 143, 130, 127, 131, 119, 124, 117, 137, 141, 123, 132, 117, 136, 127, 131, 178};



Byte kSmokeName[] = {14, 12, 94, 8, 99, 213, 38, 60, 206, 205, 209, 210, 170, 216, 202, 176, 195, 206, 202, 215, 103};



Byte kRakeTitle[] = {93, 5, 27, 8, 183, 28, 62, 101, 84, 84, 84, 84, 70, 249};



Byte k_totName[] = {64, 13, 16, 14, 119, 6, 201, 118, 74, 183, 59, 42, 196, 72, 128, 130, 121, 134, 113, 132, 117, 89, 126, 134, 121, 132, 117, 180};



Byte k_lightningUtterData[] = {92, 8, 6, 7, 28, 73, 37, 103, 123, 106, 111, 117, 91, 120, 111, 41};



Byte k_listenText[] = {47, 5, 47, 10, 179, 2, 243, 226, 36, 121, 107, 94, 144, 163, 109, 178};



Byte k_boringText[] = {32, 6, 40, 10, 156, 211, 24, 230, 51, 1, 113, 149, 143, 117, 155, 143, 157};



Byte k_skilledPrivacyData[] = {72, 17, 60, 5, 93, 165, 159, 171, 170, 116, 133, 149, 146, 149, 126, 155, 163, 175, 169, 155, 164, 158, 220};



Byte kGenuineNockName[] = {15, 31, 16, 4, 128, 117, 130, 131, 127, 126, 111, 126, 117, 135, 111, 132, 137, 128, 117, 111, 124, 121, 131, 132, 111, 131, 125, 113, 124, 124, 111, 121, 115, 127, 126, 11};



Byte k_rareRemoveData[] = {75, 3, 35, 12, 231, 219, 52, 245, 217, 84, 60, 247, 152, 140, 135, 232};



Byte k_restQuitName[] = {41, 6, 53, 14, 168, 192, 230, 123, 30, 120, 128, 60, 119, 133, 158, 168, 136, 154, 163, 153, 232};



Byte k_nockName[] = {95, 8, 52, 14, 240, 231, 209, 151, 252, 237, 70, 48, 95, 129, 162, 157, 151, 159, 162, 149, 161, 153, 29};



Byte kVideoSeniorValue[] = {88, 3, 95, 11, 169, 190, 63, 245, 219, 157, 174, 152, 152, 138, 132};



Byte kTotName[] = {33, 4, 35, 13, 177, 123, 70, 206, 100, 27, 239, 137, 138, 138, 140, 137, 151, 45};



Byte kHutValue[] = {7, 12, 74, 4, 174, 188, 171, 176, 190, 141, 185, 184, 190, 175, 184, 190, 191};



Byte kAdminName[] = {95, 9, 35, 5, 157, 140, 144, 132, 138, 136, 103, 132, 151, 132, 9};



Byte k_biologicData[] = {45, 5, 45, 4, 154, 142, 161, 144, 149, 164};



Byte kSilkAreaCycleValue[] = {27, 4, 10, 9, 116, 173, 35, 177, 180, 126, 131, 122, 111, 40};



Byte kSternData[] = {52, 12, 69, 10, 35, 127, 108, 243, 123, 210, 171, 183, 180, 178, 147, 174, 168, 176, 179, 166, 178, 170, 37};



Byte kAttributeLeyDustContent[] = {49, 14, 59, 4, 171, 170, 174, 175, 129, 167, 170, 170, 173, 141, 160, 171, 167, 180, 226};




















#import "MoveViewCell.h"
#import "ColorBbbb.h"
#import "NSDictionary+Info.h"
#import "NSDate+TimeWriting.h"
#import "ClimaxBbbb.h"
#import "PicJsonModel.h"
#import "ReplacementBaseBbbb.h"

@interface MoveViewCell ()


@property (nonatomic,strong) UIImageView *family;

@property (nonatomic,strong) UIImageView *bbbb;

@property (nonatomic,strong) UILabel *getRolling;

@property (nonatomic,strong) UILabel *to;

@property (nonatomic,strong) UILabel *modifyShow;

@property (nonatomic,strong) UILabel *exit;

@property (nonatomic,strong) UIView *cherryRed;

@property (nonatomic,strong) UIImageView *colorBlock; 



@property (nonatomic,strong) UIImageView *treat;



@property (nonatomic, strong) TreasureBbbb *with;


@property (nonatomic,strong) UIImageView *task;

@property (nonatomic,strong) UILabel *medal;

@property (nonatomic,strong) UIImageView *momentOfTruth;



@property (nonatomic, assign) BOOL sightIdentity;



@end


@implementation MoveViewCell


-(instancetype)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier{
    
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    
    if (self) {
        
        self.selectionStyle = UITableViewCellSelectionStyleNone;
        
        self.clipsToBounds = YES;

        
        for (UIGestureRecognizer* ges in self.gestureRecognizers) {
            
            [self removeGestureRecognizer:ges];
        }


        
        UILongPressGestureRecognizer *longGes = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(canFrame:)];
        
        [self.contentView addGestureRecognizer:longGes];


    }
    
    return self;
}


- (void)quickBbbb{

}


- (void)rec:(RecModel *)userInfo {

    
    NSString * headPic = userInfo.headPic;
    
    UIImage* plImage = [UserTextImage level:userInfo.sex];
    
    [self.family sd_setImageWithURL:[NSURL URLWithString:headPic]
                          
                          placeholderImage:plImage];

    
    NSString * nickname = userInfo.nickname;

    
    if (FZUtils.isEmptyString(userInfo.remark) == NO) {
        
        nickname = userInfo.remark;
    }
    
    if (nickname) {
        
        self.getRolling.text = nickname;
    
    }else{
        
        self.getRolling.text = self.with.userID;
    }

    
    self.bbbb.hidden = !userInfo.isAttentionTogether;
    
    [self.bbbb mas_updateConstraints:^(MASConstraintMaker *make) {
        
        make.width.mas_equalTo(self.bbbb.hidden?0:34);
    
    }];


    
    BOOL isHidden = YES;
    
    if (self.with.conversationType == TXConversation_Private && userInfo.sex == 1 && userInfo.rt > 0) {
        
        NSTimeInterval timeCurrent = [[NSDate date] timeIntervalSince1970];
        
        if (timeCurrent-userInfo.rt < 24*60*60) {
            
            isHidden = NO;
        }
    }
    
    self.colorBlock.hidden = isHidden;

    
    
    if (userInfo.head == 0) {
        
        self.task.hidden = YES;
        
        self.medal.hidden = YES;
    
    }else {
        
        if (userInfo.intimacy > 0 && [PlayColorBbbb size].file.sex == Gender_Male) {
            
            self.task.hidden = self.with.gj_userInfo.sex == [PlayColorBbbb size].file.sex;
            
            self.medal.hidden = self.with.gj_userInfo.sex == [PlayColorBbbb size].file.sex;

            
            NSString *intimacyNum = userInfo.intimacy > 9999 ? StringFromSmoothenData(kRakeTitle) : [NSString stringWithFormat:@"%ld",userInfo.intimacy];
            
            self.medal.text = intimacyNum;

            
            NSString *imgName = [NSString stringWithFormat:StringFromSmoothenData(k_skilledContent),[self.with doorShow]];
            
            self.task.image = [UserTextImage imageNamed:imgName];

        
        }else {
            
            self.task.hidden = YES;
            
            self.medal.hidden = YES;

        }
    }

    
    CGSize fitSize = [self.medal sizeThatFits:CGSizeMake(0x1.fffffep+127f, 22)];
    
    CGFloat rightMargin = self.medal.hidden ? -15 : -(15+fitSize.width+2+15+5);

    
    [self.to mas_updateConstraints:^(MASConstraintMaker *make) {
        
        make.right.equalTo(self.contentView).offset(rightMargin);
    
    }];
}


- (void)receive:(TreasureBbbb *)model{
    
    if (model == nil) {
        
        return;
    }
    
    _with = model;
    
    if (model.type == V2TIM_GROUP) {
        
        [self uncommonGlobe:model];
        
        self.bbbb.hidden = YES;
        
        self.colorBlock.hidden = YES;
        
        self.task.hidden = YES;
        
        self.medal.hidden = YES;
    
    }else{
        
        NSString *uidStr = nil;
        
        if (model.gj_userInfo != nil) {
            
            [self rec:model.gj_userInfo];
            
            uidStr = @(model.gj_userInfo.uid).stringValue;
        
        }else{
            
            self.getRolling.text = model.userID;
            
            uidStr = model.userID;
            
            [self.family sd_setImageWithURL:[NSURL URLWithString:model.faceUrl] placeholderImage:[UserTextImage item]];
        }

        
        [self list:model];
    }

    
    [self inscription:model.unreadCount];

    
    self.treat.hidden = model.type != V2TIM_GROUP;

    
    NSInteger intervalInSec = [model.timestamp timeIntervalSince1970];
    
    if (intervalInSec > 978307200.0) {
        
        self.modifyShow.text = [model.timestamp historyArray];
    
    } else {
        
        self.modifyShow.text = nil;
    }

    
    
    if (model.type == V2TIM_C2C && model.gj_userInfo.digitiser == 1 && [PlayColorBbbb size].file.sex == Gender_Female ) {
        
        self.momentOfTruth.hidden = model.gj_userInfo.userStatus == 3;
    
    }else {
        
        self.momentOfTruth.hidden = YES;
    }

    
    self.contentView.backgroundColor = model.isTop?[UIColor colorWithHexString:((__bridge NSString *)CFSTR("#EEEEEE"))]:[UIColor whiteColor];
    
    self.backgroundColor = model.isTop?[UIColor colorWithHexString:((__bridge NSString *)CFSTR("#EEEEEE"))]:[UIColor whiteColor];

}



- (void)uncommonGlobe:(TreasureBbbb *)model {

    
    NSMutableAttributedString* attrText = nil;
    
    BOOL isEmptyDraft = FZUtils.isEmptyString(model.draftText);

    
    if (isEmptyDraft) {


        
        attrText = [[NSMutableAttributedString alloc] init];

        
        UIColor* unreadColor = [PlayColorBbbb size].familyDescriptionAddtion.msgRed ? [ShowColor umBbbb] : [ShowColor input];
        
        UIColor* textColor = model.unreadCount ? unreadColor : [ShowColor input];

        
        NSDictionary *attributes = @{ NSFontAttributeName : [UIFont underbelly:(PFSCTypeRegular) substance:15],
                                      
                                      NSForegroundColorAttributeName : textColor};

        
        NSString *extra = [[NSString alloc]initWithData:model.listShowMessage.customElem.data encoding:NSUTF8StringEncoding];
        
        NSDictionary *dic = [NSDictionary center:extra];

        
        VanguardJsonModel *msgModel = [VanguardJsonModel modelWithDictionary:dic[StringFromSmoothenData(k_stateHotelTitle)]];

        
        MaxModel *msgInfo = msgModel.msgInfo;
        
        WineBucketModel *user = msgModel.user;
        
        CollectionJsonModel *redPackage = msgModel.redPackage;
        
        ServerTitleJsonModel *gift = msgModel.gift;


        
        NSInteger uid = [PlayColorBbbb size].file.id;
        
        NSString* key = [NSString stringWithFormat:StringFromSmoothenData(kVariationValue),uid];;
        
        NSArray* diskArr = [TaskBbbb live:key];
        
        if ([diskArr isKindOfClass:[NSArray class]] && diskArr.count) {
            
            NSString *atString = TrailReceive.commentBbbb;
            
            NSAttributedString* mentionStr = [[NSAttributedString alloc] initWithString:atString attributes:@{NSForegroundColorAttributeName:[ShowColor umBbbb],NSFontAttributeName:[UIFont underbelly:(PFSCTypeRegular) substance:15]}];
            
            [attrText appendAttributedString:mentionStr];
        }

        
        if ((user != nil && user.uid.integerValue != [PlayColorBbbb size].file.id)
            
            || ((user.uid.integerValue == [PlayColorBbbb size].societal && redPackage))) {
            
            NSString* senderStr = [NSString stringWithFormat:@"%@%@",user.nickname,redPackage?@"":@":"];
            
            NSAttributedString* sendAttr = [[NSAttributedString alloc] initWithString:senderStr attributes:@{ NSFontAttributeName:[UIFont underbelly:(PFSCTypeRegular) substance:15],NSForegroundColorAttributeName:textColor}];
            
            [attrText appendAttributedString:sendAttr];
        }

        
        NSMutableString* contentStr = [NSMutableString string];
        
        if (msgModel.msgInfo.messageType == GroupMessageTypeGift) {
            
            
            if ([PlayColorBbbb size].itemImage) {
                
                contentStr = [NSMutableString stringWithString:@" "];
            
            }else{

                
                [contentStr appendString:[NSString stringWithFormat:TrailReceive.hr,gift.name]];
            }
        
        }else if (msgModel.redPackage != nil){
            
            NSMutableString *rpContentStr = [NSMutableString stringWithString:TrailReceive.error];

            
            NSAttributedString *contentAttr = [[NSAttributedString alloc] initWithString:rpContentStr attributes:attributes];

            
            [attrText appendAttributedString:contentAttr];

            
            NSString *specString = [NSString stringWithFormat:TrailReceive.compartmentHide,redPackage.coin];

            
            NSAttributedString *rpAttr = [[NSAttributedString alloc] initWithString:specString attributes:@{NSForegroundColorAttributeName:[ShowColor umBbbb],NSFontAttributeName:[UIFont underbelly:(PFSCTypeRegular) substance:15]}];
            
            [attrText appendAttributedString:rpAttr];

        
        }else if ([msgModel.msgInfo.contentType isEqualToString:StringFromSmoothenData(k_recordTitle)] ||
                  
                  [msgModel.msgInfo.contentType isEqualToString:StringFromSmoothenData(k_boringText)]){

            
            NSString* content = TrailReceive.lacuna;
            
            [contentStr appendString:content];

        
        }else if ([msgModel.msgInfo.contentType isEqualToString:StringFromSmoothenData(k_steadilyEmpireContent)]
                  
                  || [msgInfo.contentType isEqualToString:StringFromSmoothenData(k_elevenText)]){

            
            NSString* content = msgInfo.content;
            
            content = [content stringByReplacingOccurrencesOfString:StringFromSmoothenData(kPartyData) withString:@""];
            
            content = [content stringByReplacingOccurrencesOfString:StringFromSmoothenData(k_listenText) withString:@""];
            
            content = [content outsideApp];

            
            [contentStr appendString:content];

        
        }else{
            
            NSString* content = msgInfo.content;
            
            content = [content?:@"" outsideApp];
            
            [contentStr appendString:content];
        }

        
        NSAttributedString* contentAttr = [[NSAttributedString alloc] initWithString:contentStr attributes:attributes];

        
        [attrText appendAttributedString:contentAttr];

    }

    
    [self packetModel:attrText towardAssemblage:model];
}


- (void)packetModel:(NSMutableAttributedString*)str
                            
                            towardAssemblage:(TreasureBbbb *)model{

    
    
    if (!FZUtils.isEmptyString(model.draftText)) {
        
        str = [self from:model.draftText];
        
    }

    
    [self setRequestAttention:model];
    
    [str setAttribute:NSFontAttributeName value:[UIFont underbelly:PFSCTypeRegular substance:15]];
    
    self.to.attributedText = str;

}



- (void)setRequestAttention:(TreasureBbbb *)model {

    
    if ([ColorBbbb info].attentionRespBbbb.family.familyId == model.groupID) {

        
        AppMoment* familyM = [ColorBbbb info].attentionRespBbbb.family;
        
        [self.family sd_setImageWithURL:[NSURL URLWithString:familyM.icon]
                              
                              placeholderImage:[UserTextImage item]];
        
        self.getRolling.text = familyM.name;
        
        self.treat.image = [UserTextImage imageNamed:StringFromSmoothenData(k_unemploymentName)];
    
    }else if ([ColorBbbb info].attentionRespBbbb.guestFamily.familyId == model.groupID){

        
        AppMoment* familyM = [ColorBbbb info].attentionRespBbbb.guestFamily;
        
        [self.family sd_setImageWithURL:[NSURL URLWithString:familyM.icon]
                              
                              placeholderImage:[UserTextImage item]];
        
        self.getRolling.text = familyM.name;
        
        self.treat.image = [UserTextImage imageNamed:StringFromSmoothenData(k_matedText)];
    
    }else{
        
        [[ColorBbbb info] mediumToBbbb:^(ViewModelBbbb * _Nullable resp) {
            
            [self.family sd_setImageWithURL:[NSURL URLWithString:resp.family.icon]
                                  
                                  placeholderImage:[UserTextImage item]];
            
            self.getRolling.text = resp.family.name;
        
        }];

    }

}

#pragma mark - 私聊

- (void)list:(TreasureBbbb *)model {
    
    if ([model.listShowMessage isKindOfClass:[V2TIMMessage class]]) {
        
        [self min:model];
    
    }else{
        
        NSMutableAttributedString *detailAttrString;
        
        if (!FZUtils.isEmptyString(model.draftText)) { 
            
            detailAttrString = [self from:model.draftText];
            
        }

        
        [detailAttrString setAttribute:NSFontAttributeName value:[UIFont underbelly:PFSCTypeRegular substance:15]];
        
        self.to.attributedText = detailAttrString;
    }
}


- (void)min:(TreasureBbbb *)model{

    
    NSMutableAttributedString *detailAttrString;
    
    BOOL change = NO;
    
    NSMutableDictionary* speColor = [NSMutableDictionary dictionary];

    
    UIColor* unreadColor = [PlayColorBbbb size].familyDescriptionAddtion.msgRed ? [ShowColor umBbbb] : [ShowColor input];
    
    BOOL showUnread = model.isShowMessageUnread && model.unreadCount > 0;
    
    UIColor *textColor = showUnread ? unreadColor : [ShowColor input];
    
    [detailAttrString setAttribute:NSForegroundColorAttributeName value:textColor];

    
    NSDictionary *voice_msgInfo = nil;

    
    if (!FZUtils.isEmptyString(model.draftText)) { 
        
        
        detailAttrString = [self from:model.draftText];
        
        [detailAttrString setAttribute:NSFontAttributeName value:[UIFont underbelly:PFSCTypeRegular substance:15]];
        
        self.to.attributedText = detailAttrString;
        
        return;
    
    }else{
        
        NSString *extra = [[NSString alloc]initWithData:model.listShowMessage.customElem.data encoding:NSUTF8StringEncoding];
        
        NSDictionary *Dic = [NSDictionary center:extra];
        
        NSDictionary *extraDic = [Dic objectForKey:StringFromSmoothenData(k_stateHotelTitle)];
        
        NSDictionary *msgInfo = [extraDic objectForKey:StringFromSmoothenData(k_agentCowText)];

        
        NSString *content = [msgInfo objectForKey:StringFromSmoothenData(k_videoFileValue)];
        
        content = [content wealth];
        
        NSString *messageType = msgInfo[StringFromSmoothenData(k_sparText)];
        
        NSString *formatTypeStr = [extraDic[StringFromSmoothenData(kMuseumDeriveQuitValue)] description];

        
        if ([model.userID isEqualToString:StringFromSmoothenData(kFileSwitchdName)] && model.gj_userInfo.userStatus == 0) {
            
        }

        
        if ([model.userID isEqualToString:[ExamineColorBbbb clearBbbb]]) { 
            
            NSString *content = msgInfo[StringFromSmoothenData(k_videoFileValue)];
            
            NSDictionary *detail = [extraDic objectForKey:StringFromSmoothenData(k_biologicContent)];

            
            if ([formatTypeStr isEqualToString:StringFromSmoothenData(k_bureauName)] && detail != nil ){ 
                
                NSInteger type = [extraDic[StringFromSmoothenData(kSilkAreaCycleValue)] integerValue];
                
                NSString* typeStr = TrailReceive.picDoingBbbb;
                
                if (type == 2) {
                    
                    typeStr = TrailReceive.day;
                }
                
                NSString* nickName = detail[StringFromSmoothenData(k_nockName)];
                
                content = [NSString stringWithFormat:@"%@ %@",nickName,typeStr];
            }
            
            if (FZUtils.isEmptyString(content)) {
                
                content = [Dic objectForKey:StringFromSmoothenData(k_videoFileValue)];
            }
            
            detailAttrString = [[NSMutableAttributedString alloc] initWithString:content.wealth.outsideApp];
        
        }else if (model.type == V2TIM_C2C && model.gj_userInfo.userStatus ==3) { 
            
            content = TrailReceive.suspended;
            
            detailAttrString = [[NSMutableAttributedString alloc] initWithString:content];
            
            NSValue* rangeV = [NSValue valueWithRange:NSMakeRange(0, content.length)];
            
            [speColor setObject:[UIColor colorWithRed:(255)/255.0f green:(52)/255.0f blue:(52)/255.0f alpha:1] forKey:rangeV];
        
        }else if (model.type == V2TIM_C2C && model.gj_userInfo.userStatus ==2) { 
            
            content = TrailReceive.think;
            
            detailAttrString = [[NSMutableAttributedString alloc] initWithString:content];
            
            NSValue* rangeV = [NSValue valueWithRange:NSMakeRange(0, content.length)];
            
            [speColor setObject:[UIColor colorWithRed:(255)/255.0f green:(52)/255.0f blue:(52)/255.0f alpha:1] forKey:rangeV];
        
        }else if ([FlagBbbb remove:msgInfo]) {
            
            voice_msgInfo = msgInfo;
            
            content = TrailReceive.sinceShow;
            
            detailAttrString = [[NSMutableAttributedString alloc] initWithString:content.outsideApp];
        
        }else if(messageType.integerValue == 101){ 
            
            NSString * time = [msgInfo objectForKey:StringFromSmoothenData(k_aggressionName)];
            
            if (time.length) {
                
                content = [NSString stringWithFormat:TrailReceive.compound,time];
            
            }else if(FZUtils.isEmptyString(content)){
                
                content = TrailReceive.button;
            
            }else{
                
                content = [NSString stringWithFormat:@"[%@]",content];
            }
            
            detailAttrString = [[NSMutableAttributedString alloc] initWithString:[content outsideApp]];
        
        }else if(messageType.integerValue == 102){ 
            
            NSString * time = [msgInfo objectForKey:StringFromSmoothenData(k_aggressionName)];
            
            if (time.length) {
                
                content = [NSString stringWithFormat:TrailReceive.manager,time];
            
            }else if(FZUtils.isEmptyString(content)){
                
                content = TrailReceive.dominant;
            
            }else{
                
                content = [NSString stringWithFormat:@"[%@]",content];
            }
            
            detailAttrString = [[NSMutableAttributedString alloc] initWithString:[content outsideApp]];
        
        }else if (messageType.integerValue == 11) {
            //: if ([AppManager sharedAppManager].skinStyle == skinStyle_Normal) {
            if ([PlayColorBbbb size].itemImage == skinStyle_Normal) {
                NSString * isSend = msgInfo[StringFromSmoothenData(k_restQuitName)]; 
                
                NSString * string1;
                
                if (isSend) {
                    
                    string1 = [isSend boolValue]? TrailReceive.noticeThumb:TrailReceive.target;
                
                }else{
                    
                    NSString * uid = msgInfo[StringFromSmoothenData(k_rareRemoveData)];
                    
                    string1 = (uid.integerValue == [PlayColorBbbb size].file.id)? TrailReceive.noticeThumb:TrailReceive.target;
                }
                
                NSDictionary * gift = extraDic[StringFromSmoothenData(kTotName)];
                
                NSString * name = gift[StringFromSmoothenData(kMagnitudeText)];
                
                content = [NSString stringWithFormat:@"%@[%@]",string1,name];
            
            } else {
                
                content = TrailReceive.theoreticalAccountSearched;
            }
            
            detailAttrString = [[NSMutableAttributedString alloc] initWithString:[content outsideApp]];
        
        }else if (messageType.integerValue == 4){
            
            NSString * uid = msgInfo[StringFromSmoothenData(k_rareRemoveData)];
            
            NSString * toUid = msgInfo[StringFromSmoothenData(k_consumeValue)];
            
            if (toUid.integerValue == PlayColorBbbb.size.file.id) { 
                
                
                NSString * msgId = msgInfo[StringFromSmoothenData(k_shelfName)];
                
                NSString * toUid = msgInfo[StringFromSmoothenData(k_consumeValue)];
                
                NSString * targetId = (uid.integerValue == PlayColorBbbb.size.file.id)?toUid:uid;

                
                
                NSDictionary * info = [[ClimaxBbbb saveApp] financial:targetId fieldAttention:msgId];
                
                
                if (info) {
                    
                    
                    NSString * status = info[StringFromSmoothenData(k_cooperativeEdgeTitle)];
                    
                    
                    if (status.integerValue < 0) {
                        
                        detailAttrString = [[NSMutableAttributedString alloc] initWithString:[content outsideApp]];
                    
                    }else{
                        
                        change = YES;
                        
                        detailAttrString = [self aggregationWith];
                    }
                    
                }
                
                
                else{
                    
                    change = YES;
                    
                    detailAttrString = [self aggregationWith];
                }
            
            }else{
                
                detailAttrString = [[NSMutableAttributedString alloc] initWithString:[content outsideApp]];
            }
        
        }else if (messageType.integerValue == 22){
            
            content = [content wealth];
            
            detailAttrString = [[NSMutableAttributedString alloc] initWithString:[content outsideApp]];
        
        }else if (messageType.integerValue == 3){ 

            
            NSString * imageUri = msgInfo[StringFromSmoothenData(kElevenText)];
            
            NSString * imageData = msgInfo[StringFromSmoothenData(kAdminName)];

            
            if ([FlagBbbb remove:msgInfo]) {
                
                content = TrailReceive.sinceShow;
            
            }else if (imageUri.length || imageData.length) {
                
                content = TrailReceive.lacuna;
            
            } else {
                
                NSInteger match = [msgInfo[StringFromSmoothenData(k_biologicData)] integerValue];
                
                if (match == 1){
                    
                    NSString* str = msgInfo[StringFromSmoothenData(k_videoFileValue)];
                    
                    NSRange range = [str rangeOfString:TrailReceive.collectionCycle];
                    
                    if (range.location == NSNotFound && range.length == 0){
                        
                        range = [str rangeOfString:TrailReceive.size];
                    }
                    
                    NSValue* rangeV = [NSValue valueWithRange:range];
                    
                    [speColor setObject:[UIColor colorWithRed:(113)/255.0f green:(102)/255.0f blue:(249)/255.0f alpha:1] forKey:rangeV];
                }
            }
            
            detailAttrString = [[NSMutableAttributedString alloc] initWithString:[content outsideApp]];
        
        }else if ([formatTypeStr isEqualToString:StringFromSmoothenData(k_totName)] ||
                  
                  [formatTypeStr isEqualToString:StringFromSmoothenData(kBooGrayValue)]) {
            
            detailAttrString = [[NSMutableAttributedString alloc] initWithString:[NSString stringWithFormat:@"[%@]",detailAttrString.string]];
        
        }else if ([formatTypeStr isEqualToString:StringFromSmoothenData(kSparTotName)]) { 
            
            detailAttrString = [[NSMutableAttributedString alloc] initWithString:[NSString stringWithFormat:TrailReceive.inputPage,extraDic[StringFromSmoothenData(kSternData)]]];
        
        }else if ([formatTypeStr isEqualToString:StringFromSmoothenData(kAttributeLeyDustContent)] ||
               
               [formatTypeStr isEqualToString:StringFromSmoothenData(kSmokeName)]){ 
            
            detailAttrString = [[NSMutableAttributedString alloc] initWithString:[NSString stringWithFormat:TrailReceive.environment,extraDic[StringFromSmoothenData(kSternData)]]];
        
        }else if ([formatTypeStr isEqualToString:StringFromSmoothenData(kBehavioralVoiceAlienValue)]) {
            
            detailAttrString = [[NSMutableAttributedString alloc] initWithString:[NSString stringWithFormat:TrailReceive.text,extraDic[StringFromSmoothenData(kSternData)]]];
        
        }else if ([formatTypeStr isEqualToString:StringFromSmoothenData(kEquivalentMeetingContent)]){
            
            NSString* content = msgInfo[StringFromSmoothenData(k_videoFileValue)];
            
            NSString *imageUrl = extraDic[StringFromSmoothenData(kElevenText)];
            
            NSString *imageData = extraDic[StringFromSmoothenData(kAdminName)];
            
            if (!imageUrl || imageUrl.length == 0 || imageData.length){
                
                if ([content hasPrefix:StringFromSmoothenData(kOmitValue)] && [content hasSuffix:StringFromSmoothenData(kResidencyText)]){
                    
                    NSString* str = [NSString stringWithString:content];
                    
                    str = [str stringByReplacingOccurrencesOfString:StringFromSmoothenData(kOmitValue) withString:@""];
                    
                    str = [str stringByReplacingOccurrencesOfString:StringFromSmoothenData(kResidencyText) withString:@""];
                    
                    imageUrl = str;
                }
            }
            
            if (imageUrl.length || imageData.length) {
                
                content = TrailReceive.lacuna;
            
            }else{
                
                content = [content wealth];
            }
            
            detailAttrString = [[NSMutableAttributedString alloc] initWithString:content?:@""];
        
        }else{
            
            
            NSString * imageUri = msgInfo[StringFromSmoothenData(kElevenText)];
            
            NSString * imageData = msgInfo[StringFromSmoothenData(kAdminName)];
            
            if (imageUri.length || imageData.length) {
                
                content = TrailReceive.lacuna;
            }
            
            
            if ([FlagBbbb remove:msgInfo]) {
                
                content = TrailReceive.sinceShow;
            }
            
            
            BOOL match = [extraDic[StringFromSmoothenData(kValueClinicData)] boolValue];
            
            if (match) {
                
                content = StringFromSmoothenData(kNonethelessData);
            }
            
            detailAttrString = [[NSMutableAttributedString alloc] initWithString:[content outsideApp]];
        }
    }
    
    if (!change) {
        
        if ([detailAttrString.string isEqualToString:TrailReceive.sinceShow] ) {

            
            NSString *sendUid = model.sender;
            
            NSString *mId = @(PlayColorBbbb.size.societal).description;

            
            BOOL isRedColor;
            
            if ([sendUid isEqualToString:mId]) {
                
                
                isRedColor = NO;
            
            }else {
                
                NSString *downurl = @"";
                
                if (FZUtils.isEmptyString(voice_msgInfo[StringFromSmoothenData(k_propertyText)]) == NO) {
                    
                    downurl = voice_msgInfo[StringFromSmoothenData(k_propertyText)];
                
                }else if (FZUtils.isEmptyString(voice_msgInfo[StringFromSmoothenData(k_lightningUtterData)]) == NO) {
                    
                    downurl = voice_msgInfo[StringFromSmoothenData(k_lightningUtterData)];
                }

                
                PicJsonModel *cacheWrap = [[ReplacementBaseBbbb titleWith] of:downurl];
                
                isRedColor = cacheWrap.birthdayBbbb == NO;
            }

            
            UIColor* unreadColor;
            
            if ([PlayColorBbbb size].familyDescriptionAddtion.msgRed && model.isShowMessageUnread) {
                
                unreadColor = [ShowColor umBbbb];
            
            }else {
                
                unreadColor = isRedColor ? [ShowColor umBbbb] : [ShowColor input];
            }
            
            [detailAttrString setAttribute:NSForegroundColorAttributeName value:unreadColor];

        
        }else {
            
            UIColor* unreadColor = [PlayColorBbbb size].familyDescriptionAddtion.msgRed ? [ShowColor umBbbb] : [ShowColor input];

            
            UIColor* textColor = showUnread ? unreadColor : [ShowColor input];
            
            [detailAttrString setAttribute:NSForegroundColorAttributeName value:textColor];

        }
    }
    
    if (speColor.allKeys.count){
        
        [speColor enumerateKeysAndObjectsUsingBlock:^(id _Nonnull key, id _Nonnull obj, BOOL * _Nonnull stop) {
            
            NSValue* value = (NSValue*)key;
            
            [detailAttrString addAttribute:NSForegroundColorAttributeName value:obj range:value.rangeValue];
        
        }];
    }

    
    [detailAttrString setAttribute:NSFontAttributeName value:[UIFont underbelly:PFSCTypeRegular substance:15]];
    
    self.to.attributedText = detailAttrString;
}




- (NSMutableAttributedString *)aggregationWith {

    
    NSTextAttachment *attachment = [[NSTextAttachment alloc] initWithData:nil ofType:nil];
    
    attachment.bounds = CGRectMake(0, -3, 16, 16);
    
    attachment.image = [UserTextImage imageNamed:StringFromSmoothenData(k_skilledPrivacyData)];
    
    NSMutableAttributedString *attachString = [[NSAttributedString attributedStringWithAttachment:attachment] mutableCopy];

    
    NSAttributedString *attrString = [[NSAttributedString alloc] initWithString:TrailReceive.push
                                                                     
                                                                     attributes:@{NSFontAttributeName : [UIFont underbelly:PFSCTypeRegular substance:15],
                                                                                  
                                                                                  NSForegroundColorAttributeName :[PlayColorBbbb size].familyDescriptionAddtion.msgRed? [ShowColor umBbbb]:[ShowColor input]}];


    
    NSMutableAttributedString *mAttrString = [[NSMutableAttributedString alloc] initWithString:@"\u202A"];
    
    [mAttrString appendAttributedString:attachString];
    
    [mAttrString appendAttributedString:attrString];
    
    return mAttrString;
}

#pragma mark 获取拼接草稿

- (NSMutableAttributedString*)from:(NSString *)draft{

    
    if ([draft containsString:StringFromSmoothenData(kHutValue)]) {
        
        NSDictionary* dic = [NSDictionary center:draft];
        
        draft = dic[StringFromSmoothenData(kHutValue)];
    }
    
    draft = [draft outsideApp];
    
    NSMutableAttributedString *draftString = [[NSMutableAttributedString alloc] initWithString:[NSString stringWithFormat:StringFromSmoothenData(k_bucketEticValue),draft]];
    
    [draftString addAttribute:NSForegroundColorAttributeName value:[UIColor colorWithRed:(240)/255.0f green:(94)/255.0f blue:(94)/255.0f alpha:1] range:NSMakeRange(0, 4)];
    
    return draftString;
}


- (void)inscription:(NSInteger)unreadMessageCount{
    
    [self.contentView bringSubviewToFront:self.exit];

    
    if (unreadMessageCount == 0) {

        
        self.exit.hidden = YES;
        
        self.cherryRed.hidden = YES;
        
        self.exit.text = @"0";
    
    }else if (unreadMessageCount>99){

        
        self.exit.hidden = NO;
        
        NSString *maxUnreadCountStr = StringFromSmoothenData(kVideoSeniorValue);
        
        CGFloat w = [self statusTogether:maxUnreadCountStr];
        
        [self.exit mas_updateConstraints:^(MASConstraintMaker *make) {
            
            make.width.greaterThanOrEqualTo(@(12+w));
        
        }];
        
        self.exit.text = StringFromSmoothenData(kVideoSeniorValue);
    
    }else {
        
        self.exit.hidden = NO;
        
        CGFloat w = [self statusTogether:[NSString stringWithFormat:@"%ld",(long)unreadMessageCount]];
        
        if (w+12>20) {
            
            [self.exit mas_updateConstraints:^(MASConstraintMaker *make) {
                
                make.width.greaterThanOrEqualTo(@(12+w));
            
            }];
        
        }else{
            
            [self.exit mas_updateConstraints:^(MASConstraintMaker *make) {
                
                make.width.greaterThanOrEqualTo(@20);
            
            }];
        }

        
        self.exit.text = [NSString stringWithFormat:@"%ld",(long)unreadMessageCount];

    }
    
    if (unreadMessageCount > 0 ) {
        
        if (_sightIdentity && self.with.conversationType == TXConversation_Group) {
            
            self.exit.hidden = YES;
            
            self.cherryRed.hidden = NO;
        
        }else{
            
            self.exit.hidden = NO;
            
            self.cherryRed.hidden = YES;
        }

    }
}


- (void)bringHome:(BOOL)noDisturb{
    
    _sightIdentity = noDisturb;
}




- (NSString *)afterDoing {
    
    return @(_with.gj_userInfo.uid).stringValue;
}


- (CGFloat)statusTogether:(NSString *)unreadStr{
    
    return [unreadStr sizeWithAttributes:@{NSFontAttributeName :self.exit.font}].width;
}


- (void)canFrame:(UIGestureRecognizer *)sender {

    
    if (sender.state == UIGestureRecognizerStateBegan) {
        
        if (self.handle) {
            
            self.handle(self.with);
        }
    }

}


#pragma mark - lazy

- (UIImageView *)family{

    
    if (!_family) {
        
        _family = [[UIImageView alloc] init];
        
        _family.backgroundColor = UIColor.whiteColor;
        
        _family.layer.cornerRadius = 5;
        
        _family.layer.masksToBounds = YES;
        
        _family.contentMode = UIViewContentModeScaleAspectFill;

        
        [self.contentView addSubview:_family];
        
        [_family mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.width.and.height.mas_equalTo(60);
            
            make.left.equalTo(self.contentView.mas_left).offset(15);
            
            make.centerY.equalTo(self.contentView);
        
        }];

        
        [self.contentView addSubview:self.treat];
        
        [self.treat mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.edges.mas_equalTo(_family);
        
        }];

    }
    
    return _family;
}

- (UIImageView *)bbbb{
    
    if (!_bbbb) {
        
        _bbbb = [UIImageView new];
        
        _bbbb.image = [UserTextImage imageNamed:StringFromSmoothenData(k_askShelfData)];
        
        _bbbb.hidden = YES;
        
        _bbbb.contentMode = UIViewContentModeScaleAspectFill;
        
        [self.contentView addSubview:_bbbb];
        
        [_bbbb mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.centerY.equalTo(self.getRolling);
            
            make.left.mas_equalTo(self.getRolling.mas_right).offset(4);
            
            make.size.mas_equalTo(CGSizeMake(34, 18));
            
            make.right.mas_lessThanOrEqualTo(self.modifyShow.mas_left).offset(-5);
        
        }];

    }
    
    [self.contentView bringSubviewToFront:_bbbb];
    
    return _bbbb;
}


- (UILabel *)getRolling{
    
    if (!_getRolling) {
        
        _getRolling = [[UILabel alloc]init];
        
        _getRolling.textColor = [ShowColor current];
        
        _getRolling.font = [UIFont underbelly:PFSCTypeRegular substance:18];
        
        [self.contentView addSubview:_getRolling];
        
        [_getRolling mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.top.offset(14);
            
            make.left.equalTo(self.family.mas_right).offset(10);
            
            make.right.lessThanOrEqualTo(self.bbbb.mas_left).offset(-4);
        
        }];
    }
    
    return _getRolling;
}

- (UILabel *)modifyShow{
    
    if (!_modifyShow) {
        
        _modifyShow = [[UILabel alloc] init];
        
        _modifyShow.textColor = [ShowColor input];
        
        _modifyShow.font = [UIFont underbelly:PFSCTypeMedium substance:12];
        
        [self.contentView addSubview:_modifyShow];
        
        [_modifyShow mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.centerY.equalTo(self.getRolling).offset(1);
            
            make.right.equalTo(self.contentView).offset(0-15);
        
        }];
    }
    
    return _modifyShow;
}


- (UILabel *)to {
    
    if (!_to) {
        
        _to = [[UILabel alloc] init];
        
        _to.textColor=[ShowColor input];
        
        _to.font = [UIFont underbelly:PFSCTypeRegular substance:15];
        
        [self.contentView addSubview:_to];
        
        [_to mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.top.equalTo(self.getRolling.mas_bottom).offset(4);
            
            make.left.equalTo(self.getRolling.mas_left);
            
            make.right.equalTo(self.contentView).offset(0-15);
            
            make.height.mas_equalTo(22);
        
        }];
    }
    
    return _to;
}

- (UILabel*)exit{
    
    if (!_exit) {

        
        _exit=[[UILabel alloc] init];
        
        _exit.backgroundColor = [ShowColor show];
        
        _exit.textColor=[UIColor whiteColor];
        
        _exit.layer.cornerRadius= 20/2.f;
        
        _exit.layer.borderWidth = 1.0f;
        
        _exit.layer.borderColor = [UIColor whiteColor].CGColor;
        
        _exit.clipsToBounds=YES;
        
        _exit.font=[UIFont underbelly:(PFSCTypeMedium) substance:13];
        
        _exit.textAlignment=NSTextAlignmentCenter;
        
        [self.contentView addSubview:_exit];
        
        [_exit mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.top.equalTo(self.family).offset(-5);
            
            make.right.equalTo(self.family).offset(6);
            
            make.height.mas_equalTo(20);
            
            make.width.greaterThanOrEqualTo(@20);
        
        }];
    }
    
    return _exit;
}

-(UIView *)cherryRed{
    
    if (!_cherryRed) {
        
        _cherryRed = [[UIView alloc]init];
        
        _cherryRed.backgroundColor = UIColor.redColor;
        
        _cherryRed.layer.cornerRadius = 4;
        
        [self.contentView addSubview:_cherryRed];
        
        [_cherryRed mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.top.equalTo(self.family).offset(-3);
            
            make.right.equalTo(self.family).offset(3);
            
            make.size.mas_equalTo(CGSizeMake(8, 8));
        
        }];
    }
    
    return _cherryRed;
}


- (UIImageView *)colorBlock{
    
    if (!_colorBlock) {
        
        _colorBlock = [[UIImageView alloc] init];
        
        _colorBlock.hidden = YES;
        
        _colorBlock.image = [UserTextImage imageNamed:StringFromSmoothenData(kGenuineNockName)];
        
        [self.contentView addSubview:_colorBlock];
        
        [_colorBlock mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.bottom.mas_equalTo(self.family.mas_bottom);
            
            make.right.mas_equalTo(self.family.mas_right);
            
            make.size.mas_equalTo(CGSizeMake(28, 18));
        
        }];
    }
    
    return _colorBlock;
}


- (UILabel *)medal {
    
    if (!_medal) {
        
        _medal = [[UILabel alloc] init];
        
        _medal.font = [UIFont underbelly:PFSCTypeMedium substance:14];
        
        _medal.textColor = [UIColor colorWithHexString:((__bridge NSString *)CFSTR("#B0B9D2"))];
        
        _medal.hidden = YES;
        
        _medal.textAlignment = NSTextAlignmentCenter;
        
        [self.contentView addSubview:_medal];

        
        [_medal mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.top.mas_equalTo(self.getRolling.mas_bottom).offset(4);
            
            make.right.equalTo(self.contentView).offset(-15);
            
            make.height.mas_equalTo(22);
            
            make.width.mas_greaterThanOrEqualTo(0);
        
        }];
    }
    
    return _medal;
}



- (UIImageView *)task {
    
    if (!_task) {
        
        _task = [[UIImageView alloc] initWithImage:[UserTextImage imageNamed:StringFromSmoothenData(k_loveData)]];
        
        _task.hidden = YES;
        
        [self.contentView addSubview:_task];

        
        [_task mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.right.mas_equalTo(self.medal.mas_left).offset(-2);
            
            make.centerY.mas_equalTo(self.medal.mas_centerY);
            
            make.size.mas_equalTo(CGSizeMake(22, 20));
        
        }];
    }
    
    return _task;
}


- (UIImageView *)momentOfTruth {
    
    if (!_momentOfTruth) {
        
        _momentOfTruth = [[UIImageView alloc] initWithImage:[UserTextImage imageNamed:StringFromSmoothenData(kConsumeScaleContent)]];
        
        _momentOfTruth.hidden = YES;
        
        [self.contentView addSubview:_momentOfTruth];
        
        [_momentOfTruth mas_makeConstraints:^(MASConstraintMaker *make) {
            
            make.centerX.mas_equalTo(self.family.mas_right);
            
            make.centerY.mas_equalTo(self.family.mas_bottom).offset(-2);
            
            make.size.mas_equalTo(CGSizeMake(12, 12));
        
        }];
    }
    
    return _momentOfTruth;
}


- (UIImageView *)treat {
    
    if (!_treat) {
        
        _treat = [[UIImageView alloc]initWithImage:[UserTextImage imageNamed:StringFromSmoothenData(k_unemploymentName)]];
        
        _treat.hidden = YES;
    }
    
    return _treat;
}




+ (CGFloat)request{
    
    return 76;
}


@end


Byte * SmoothenDataToCache(Byte *data) {
    int philosophy = data[0];
    int pathGrandfather = data[1];
    Byte capital = data[2];
    int eticEmpire = data[3];
    if (!philosophy) return data + eticEmpire;
    for (int i = eticEmpire; i < eticEmpire + pathGrandfather; i++) {
        int value = data[i] - capital;
        if (value < 0) {
            value += 256;
        }
        data[i] = value;
    }
    data[0] = 0;
    data[eticEmpire + pathGrandfather] = 0;
    return data + eticEmpire;
}

NSString *StringFromSmoothenData(Byte *data) {
    return [NSString stringWithUTF8String:(char *)SmoothenDataToCache(data)];
}
