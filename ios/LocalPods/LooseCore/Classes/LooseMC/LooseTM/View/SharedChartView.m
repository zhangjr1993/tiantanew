
#import <Foundation/Foundation.h>

NSString *StringFromSurprisingData(Byte *data);



Byte k_cowMethText[] = {42, 5, 43, 10, 190, 170, 203, 65, 221, 91, 144, 163, 159, 157, 140, 255};



Byte k_accomplishmentTitle[] = {81, 3, 74, 13, 140, 219, 95, 24, 61, 221, 132, 77, 144, 191, 179, 174, 168};



Byte kPlacementMaximData[] = {74, 12, 4, 5, 209, 116, 115, 119, 120, 80, 126, 112, 86, 105, 116, 112, 125, 148};



Byte kElevenData[] = {60, 11, 4, 7, 133, 9, 132, 113, 105, 119, 119, 101, 107, 105, 88, 125, 116, 105, 1};



Byte k_emissionContent[] = {16, 10, 97, 12, 61, 236, 223, 157, 15, 152, 160, 202, 209, 211, 202, 215, 194, 213, 198, 166, 207, 197, 110};



Byte kFestivalFlagTitle[] = {21, 19, 9, 9, 50, 179, 248, 121, 100, 107, 112, 104, 118, 110, 124, 124, 106, 112, 110, 104, 113, 111, 104, 125, 120, 106, 124, 125, 255};



Byte kPerceivedName[] = {93, 4, 54, 9, 197, 118, 231, 181, 120, 171, 169, 155, 168, 67};



Byte k_peakDeriveData[] = {24, 4, 74, 12, 221, 34, 45, 193, 95, 91, 58, 221, 177, 179, 176, 190, 118};



Byte k_narrowValue[] = {83, 12, 4, 10, 216, 200, 242, 222, 52, 65, 113, 106, 71, 115, 109, 114, 87, 120, 101, 120, 121, 119, 104};



Byte kTeeValue[] = {51, 6, 82, 10, 118, 9, 46, 216, 9, 129, 196, 183, 191, 179, 196, 189, 29};



Byte k_effortSparContent[] = {92, 10, 36, 14, 167, 78, 214, 7, 123, 252, 191, 62, 17, 156, 154, 141, 136, 137, 147, 113, 133, 152, 135, 140, 160};



Byte kLampData[] = {35, 11, 75, 7, 96, 138, 172, 187, 186, 190, 191, 158, 192, 187, 187, 186, 189, 191, 36};



Byte k_vocalGalleryData[] = {66, 5, 14, 9, 124, 115, 30, 229, 53, 74, 119, 123, 117, 76, 89};



Byte kTimeOuterTitle[] = {11, 6, 64, 9, 192, 123, 7, 14, 107, 124, 111, 169, 173, 167, 126, 34};



Byte kEmissionName[] = {83, 8, 49, 14, 9, 116, 7, 112, 145, 116, 218, 229, 182, 56, 154, 158, 146, 152, 150, 134, 163, 154, 49};



Byte kRakeUnemploymentName[] = {8, 5, 40, 8, 68, 138, 21, 27, 156, 151, 125, 145, 140, 112};



Byte kSkyData[] = {12, 6, 87, 9, 18, 243, 85, 217, 55, 192, 202, 170, 188, 197, 187, 181};



Byte k_worldValue[] = {4, 9, 22, 7, 234, 181, 60, 127, 131, 119, 125, 123, 90, 119, 138, 119, 195};



Byte kSoapLoveText[] = {2, 7, 44, 5, 233, 143, 155, 154, 160, 145, 154, 160, 34};



Byte k_impossibleFromName[] = {3, 4, 64, 6, 73, 240, 174, 161, 173, 165, 226};



Byte kConventValue[] = {53, 4, 1, 5, 231, 106, 100, 112, 111, 189};



Byte kSettingData[] = {3, 5, 7, 10, 165, 247, 21, 29, 253, 134, 119, 115, 104, 112, 117, 11};



Byte kBravePokeValue[] = {65, 10, 49, 11, 45, 12, 54, 236, 137, 251, 119, 151, 160, 163, 158, 146, 165, 133, 170, 161, 150, 14};



Byte kMatedPartyValue[] = {8, 13, 32, 5, 252, 144, 146, 137, 150, 129, 148, 133, 105, 142, 150, 137, 148, 133, 206};



Byte kMethContent[] = {42, 12, 26, 13, 209, 7, 7, 238, 72, 242, 221, 140, 206, 128, 140, 137, 135, 104, 131, 125, 133, 136, 123, 135, 127, 165};



Byte k_levelText[] = {3, 17, 81, 11, 106, 143, 218, 66, 6, 144, 184, 186, 180, 192, 191, 137, 154, 170, 167, 170, 147, 176, 184, 196, 190, 176, 185, 179, 247};



Byte kHotelPeakTotalelTitle[] = {28, 14, 55, 13, 150, 110, 153, 150, 189, 34, 105, 220, 29, 146, 31, 222, 189, 32, 217, 200, 32, 183, 214, 32, 188, 196, 148, 73};



Byte k_sourceText[] = {84, 9, 40, 5, 30, 137, 156, 156, 141, 150, 156, 145, 151, 150, 254};



Byte k_giftTheoryData[] = {53, 26, 52, 9, 13, 245, 253, 179, 151, 150, 168, 162, 147, 161, 153, 167, 167, 149, 155, 153, 147, 156, 154, 147, 168, 163, 149, 167, 168, 147, 166, 153, 164, 160, 173, 83};



Byte kLopeWithContent[] = {10, 7, 24, 11, 139, 201, 151, 207, 239, 161, 223, 133, 139, 127, 97, 134, 126, 135, 185};



Byte k_bucketToleTitle[] = {85, 14, 64, 7, 63, 122, 135, 176, 175, 179, 180, 134, 172, 175, 175, 178, 146, 165, 176, 172, 185, 179};



Byte kDivideText[] = {1, 5, 55, 9, 81, 147, 141, 220, 48, 164, 170, 158, 128, 155, 92};
















#import "SharedChartView.h"
#import "NSDictionary+Info.h"
#import "ClimaxBbbb.h"

@interface SharedChartView()


@property (nonatomic, strong) UIImageView *ptolemaicSystem;

@property (nonatomic, strong) UIImageView *absolute;

@property (nonatomic, strong) UILabel *push;

@property (nonatomic, strong) UILabel *place;

@property (nonatomic, strong) UIButton *video;


@property (nonatomic, assign) NSString *sum;


@property (nonatomic, assign) BOOL phone;


@property (nonatomic, strong) V2TIMMessage *item;


@end


@implementation SharedChartView




- (instancetype)init{
    
    self = [super init];
    
    if(self){
        
        [self quickBbbb];
    }
    
    return self;
}


- (void)quickBbbb{
    
    self.frame = CGRectMake(6, -76, screenWidth()-12, 76);
    
    self.backgroundColor = [UIColor clearColor];
    
    [self addSubview:self.ptolemaicSystem];
    
    [self addSubview:self.absolute];
    
    [self addSubview:self.push];
    
    [self addSubview:self.place];
    
    [self addSubview:self.video];


    
    [self.ptolemaicSystem mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.edges.mas_equalTo(0);
    
    }];
    
    [self.absolute mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.left.mas_equalTo(16);
        
        make.width.height.mas_equalTo(44);
        
        make.centerY.mas_equalTo(self);
    
    }];
    
    [self.push mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.left.mas_equalTo(self.absolute.mas_right).offset(6);
        
        make.top.mas_equalTo(self.absolute);
        
        make.height.mas_equalTo(22);
        
        make.right.mas_equalTo(self.video.mas_left).offset(-8);
    
    }];
    
    [self.place mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.left.right.mas_equalTo(self.push);
        
        make.top.mas_equalTo(self.push.mas_bottom).offset(2);
        
        make.height.mas_equalTo(22);
    
    }];
    
    [self.video mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.right.mas_equalTo(self).offset(-18);
        
        make.size.mas_equalTo(CGSizeMake(46, 24));
        
        make.centerY.mas_equalTo(self);
    
    }];

    
    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(bbbbing:)];
    
    [self addGestureRecognizer:tap];

    
    UISwipeGestureRecognizer *recognizer = [[UISwipeGestureRecognizer alloc]initWithTarget:self action:@selector(sinceRecommendation:)];
    
    [recognizer setDirection:(UISwipeGestureRecognizerDirectionUp)];
    
    [self addGestureRecognizer:recognizer];

}


- (void)bbbbing:(UITapGestureRecognizer *)recognizer{
    
    [[PlayColorBbbb size] place:self.sum.integerValue];
    
    [self computerSimulation:NO];
    
    [[SharedMoment show] queue:YES];
    
    self.userInteractionEnabled = NO;
}


- (void)sinceRecommendation:(UISwipeGestureRecognizer *)recognizer{
    
    if(recognizer.direction == UISwipeGestureRecognizerDirectionUp) {
        
        [self computerSimulation:NO];
        
        [[SharedMoment show] queue:YES];
    }
}


- (void)nag:(V2TIMMessage *)msg{
    
    self.item = msg;
    
    [self setStreetSmart:msg];
    
    UIWindow *window = [[[UIApplication sharedApplication] delegate] window];
    
    [window addSubview:self];
    
    [window bringSubviewToFront:self];
    
    [UIView animateWithDuration:0.5 delay:0 options:UIViewAnimationOptionCurveEaseOut animations:^{
        
        self.top = statusBarHeight() + 4 ;
    
    } completion:^(BOOL finished) {
        
        dispatch_after(dispatch_time((0ull), (int64_t)(5 * 1000000000ull)), dispatch_get_main_queue(), ^{
            
            if (!self.phone) {
                
                [self computerSimulation:NO];
            }
        
        });
    
    }];
}

- (void)computerSimulation:(BOOL)alpha{
    
    if (self.phone) { 
        
        return;
    }
    
    self.phone = YES;
    
    if (self.view) {
        
        self.view(self.item);
    }
    
    dispatch_async(dispatch_get_main_queue(), ^{
        
        [UIView animateWithDuration:0.5 delay:0 options:UIViewAnimationOptionCurveEaseOut animations:^{
            
            if (alpha) {
                
                self.alpha = 0;
            
            }else{
                
                self.top = -76;
            }
        
        } completion:^(BOOL finished) {
            
            [self removeFromSuperview];
            
            if (self.array) {
                
                self.array(self);
            }
        
        }];
    
    });
}




- (void)setStreetSmart:(V2TIMMessage *)msg{

    
    NSMutableAttributedString *detailAttrString;

    
    NSString *extra = [[NSString alloc]initWithData:msg.customElem.data encoding:NSUTF8StringEncoding];
    
    NSDictionary *Dic = [NSDictionary center:extra];
    
    
    self.sum = msg.userID;
    
    NSDictionary *userInfo = [Dic objectForKey:StringFromSurprisingData(kPerceivedName)];


    
    NSString *nameStr;
    
    if ([userInfo objectForKey:StringFromSurprisingData(kTeeValue)]) {
        
        nameStr = [NSString stringWithFormat:@"%@",[userInfo objectForKey:StringFromSurprisingData(kTeeValue)]];
    }
    
    if (FZUtils.isEmptyString(nameStr) && [userInfo objectForKey:StringFromSurprisingData(k_impossibleFromName)]) {
        
        nameStr = [NSString stringWithFormat:@"%@",[userInfo objectForKey:StringFromSurprisingData(k_impossibleFromName)]];
    }
    
    if (FZUtils.isEmptyString(nameStr)) {
        
        nameStr = msg.userID;
    }
    
    self.push.text = nameStr;

    
    [self.absolute sd_setImageWithURL:[NSURL URLWithString:[userInfo objectForKey:StringFromSurprisingData(kConventValue)]] placeholderImage:[UserTextImage item]];


    
    NSDictionary *extraDic = [Dic objectForKey:StringFromSurprisingData(k_cowMethText)];
    
    NSDictionary *msgInfo = [extraDic objectForKey:StringFromSurprisingData(kLopeWithContent)];
    
    NSString *messageType = msgInfo[StringFromSurprisingData(kElevenData)];
    
    NSString *formatTypeStr = [extraDic[StringFromSurprisingData(kBravePokeValue)] description];
    
    NSString *content = [msgInfo objectForKey:StringFromSurprisingData(kSoapLoveText)];
    
    content = [content wealth];
    
    UIColor* unreadColor = [PlayColorBbbb size].familyDescriptionAddtion.msgRed ? [ShowColor umBbbb] : [ShowColor current];

    
    if ([FlagBbbb remove:msgInfo]) {

        
        unreadColor = [ShowColor umBbbb];
        
        content = TrailReceive.sinceShow;
    
    }else if (messageType.integerValue == 11) {
        //: if ([AppManager sharedAppManager].skinStyle == skinStyle_Normal) {
        if ([PlayColorBbbb size].itemImage == skinStyle_Normal) {
            NSString * isSend = msgInfo[StringFromSurprisingData(kSkyData)]; 
            
            NSString * string1;
            
            if (isSend) {
                
                string1 = [isSend boolValue]? TrailReceive.noticeThumb:TrailReceive.target;
            
            }else{
                
                NSString * uid = msgInfo[StringFromSurprisingData(k_accomplishmentTitle)];
                
                string1 = (uid.integerValue == [PlayColorBbbb size].file.id)? TrailReceive.noticeThumb:TrailReceive.target;
            }
            
            NSDictionary * gift = extraDic[StringFromSurprisingData(k_peakDeriveData)];
            
            NSString * name = gift[StringFromSurprisingData(k_impossibleFromName)];
            
            content = [NSString stringWithFormat:@"%@[%@]",string1,name];
        
        } else {
            
            content = TrailReceive.theoreticalAccountSearched;
        }
        
        content = [content outsideApp];
    
    }else if (messageType.integerValue == 4){
        
        NSString * uid = msgInfo[StringFromSurprisingData(k_accomplishmentTitle)];
        
        NSString * toUid = msgInfo[StringFromSurprisingData(kRakeUnemploymentName)];
        
        if (toUid.integerValue == PlayColorBbbb.size.file.id) { 
            
            
            NSString * msgId = msgInfo[StringFromSurprisingData(kDivideText)];
            
            NSString * toUid = msgInfo[StringFromSurprisingData(kRakeUnemploymentName)];
            
            NSString * targetId = (uid.integerValue == PlayColorBbbb.size.file.id)?toUid:uid;

            
            
            NSDictionary * info = [[ClimaxBbbb saveApp] financial:targetId fieldAttention:msgId];
            
            
            if (info) {
                
                
                NSString * status = info[StringFromSurprisingData(k_narrowValue)];
                
                
                if (status.integerValue < 0) {
                    
                    content = [content outsideApp];
                
                }else{
                    
                    detailAttrString = [self make];
                }
            }
            
            
            else{
                
                detailAttrString = [self make];
            }
        
        }else{

            
            detailAttrString = [[NSMutableAttributedString alloc] initWithString:[content outsideApp]];
        }
    
    }else if (messageType.integerValue == 3){ 
        
        NSString * imageUri = msgInfo[StringFromSurprisingData(kEmissionName)];
        
        NSString * imageData = msgInfo[StringFromSurprisingData(k_worldValue)];
        
        if ([FlagBbbb remove:msgInfo]) {
            
            unreadColor = [ShowColor umBbbb];
            
            content = TrailReceive.sinceShow;

        
        }else if (imageUri.length || imageData.length) {
            
            content = TrailReceive.lacuna;
        }
    
    }else if ([formatTypeStr isEqualToString:StringFromSurprisingData(kMatedPartyValue)] ||
              
              [formatTypeStr isEqualToString:StringFromSurprisingData(k_emissionContent)]) {
        
        detailAttrString = [[NSMutableAttributedString alloc] initWithString:[NSString stringWithFormat:@"[%@]",detailAttrString.string]];
        
        [detailAttrString setAttribute:NSForegroundColorAttributeName value:unreadColor];
    
    }else if ([formatTypeStr isEqualToString:StringFromSurprisingData(kLampData)]) { 
        
        detailAttrString = [[NSMutableAttributedString alloc] initWithString:[NSString stringWithFormat:TrailReceive.inputPage,extraDic[StringFromSurprisingData(kMethContent)]]];
        
        [detailAttrString setAttribute:NSForegroundColorAttributeName value:unreadColor];
    
    }else if ([formatTypeStr isEqualToString:StringFromSurprisingData(k_bucketToleTitle)] ||
           
           [formatTypeStr isEqualToString:StringFromSurprisingData(kPlacementMaximData)]){ 
        
        detailAttrString = [[NSMutableAttributedString alloc] initWithString:[NSString stringWithFormat:TrailReceive.environment,extraDic[StringFromSurprisingData(kMethContent)]]];
        
        [detailAttrString setAttribute:NSForegroundColorAttributeName value:unreadColor];
    
    }else if ([formatTypeStr isEqualToString:StringFromSurprisingData(k_sourceText)]) {
        
        detailAttrString = [[NSMutableAttributedString alloc] initWithString:[NSString stringWithFormat:TrailReceive.text,extraDic[StringFromSurprisingData(kMethContent)]]];
        
        [detailAttrString setAttribute:NSForegroundColorAttributeName value:unreadColor];
    
    }else if ([formatTypeStr isEqualToString:StringFromSurprisingData(kSettingData)]){
        
        NSString* content = msgInfo[StringFromSurprisingData(kSoapLoveText)];
        
        NSString *imageUrl = extraDic[StringFromSurprisingData(kEmissionName)];
        
        NSString *imageData = extraDic[StringFromSurprisingData(k_worldValue)];
        
        if (!imageUrl || imageUrl.length == 0 || imageData.length){
            
            if ([content hasPrefix:StringFromSurprisingData(k_vocalGalleryData)] && [content hasSuffix:StringFromSurprisingData(kTimeOuterTitle)]){
                
                NSString* str = [NSString stringWithString:content];
                
                str = [str stringByReplacingOccurrencesOfString:StringFromSurprisingData(k_vocalGalleryData) withString:@""];
                
                str = [str stringByReplacingOccurrencesOfString:StringFromSurprisingData(kTimeOuterTitle) withString:@""];
                
                imageUrl = str;
            }
        }
        
        if (imageUrl.length || imageData.length) {
            
            content = TrailReceive.lacuna;
        }
    
    }else{
        
        
        NSString * imageUri = msgInfo[StringFromSurprisingData(kEmissionName)];
        
        NSString * imageData = msgInfo[StringFromSurprisingData(k_worldValue)];
        
        if (imageUri.length || imageData.length) {
            
            content = TrailReceive.lacuna;
        }
        
        
        if ([FlagBbbb remove:msgInfo]) {
            
            unreadColor = [ShowColor umBbbb];
            
            content = TrailReceive.sinceShow;

        }
        
        
        BOOL match = [extraDic[StringFromSurprisingData(k_effortSparContent)] boolValue];
        
        if (match) {
            
            content = StringFromSurprisingData(kHotelPeakTotalelTitle);
        }
    }

    
    if (detailAttrString == nil) {
        
        detailAttrString = [[NSMutableAttributedString alloc] initWithString:content];
        
        [detailAttrString setAttribute:NSForegroundColorAttributeName value:unreadColor];
    }
    
    self.place.attributedText = detailAttrString;
}

- (NSMutableAttributedString *)make {

    
    NSTextAttachment *attachment = [[NSTextAttachment alloc] initWithData:nil ofType:nil];
    
    attachment.bounds = CGRectMake(0, -3, 16, 16);
    
    attachment.image = [UserTextImage imageNamed:StringFromSurprisingData(k_levelText)];

    
    NSMutableAttributedString *attachString = [[NSAttributedString attributedStringWithAttachment:attachment] mutableCopy];

    
    NSAttributedString *attrString = [[NSAttributedString alloc] initWithString:TrailReceive.push
                                                                     
                                                                     attributes:@{NSFontAttributeName : [UIFont underbelly:PFSCTypeRegular substance:15],
                                                                                  
                                                                                  NSForegroundColorAttributeName :[PlayColorBbbb size].familyDescriptionAddtion.msgRed? [ShowColor umBbbb]:[ShowColor current]}];

    
    NSMutableAttributedString *mAttrString = [[NSMutableAttributedString alloc] initWithString:@"\u202A"];
    
    [mAttrString appendAttributedString:attachString];
    
    [mAttrString appendAttributedString:attrString];
    
    return mAttrString;
}

#pragma mark - lazy


- (UIImageView *)ptolemaicSystem{
    
    if (!_ptolemaicSystem) {
        
        _ptolemaicSystem = [[UIImageView alloc] init];
        
        _ptolemaicSystem.image = [UserTextImage imageNamed:StringFromSurprisingData(kFestivalFlagTitle)];
    }
    
    return _ptolemaicSystem;
}


- (UIImageView *)absolute{
    
    if (!_absolute) {
        
        _absolute = [[UIImageView alloc] init];
        
        _absolute.layer.cornerRadius = 5;
        
        _absolute.clipsToBounds = YES;
    }
    
    return _absolute;
}

- (UILabel *)push{
    
    if (!_push) {
        
        _push = [[UILabel alloc] init];
        
        _push.textColor = [ShowColor current];
        
        _push.font = [UIFont underbelly:PFSCTypeRegular substance:14];
    }
    
    return _push;
}

- (UILabel *)place{
    
    if (!_place) {
        
        _place = [[UILabel alloc] init];
        
        _place.textColor = [ShowColor current];
        
        _place.font = [UIFont underbelly:PFSCTypeRegular substance:15];
    }
    
    return _place;
}

- (UIButton *)video{
    
    if (!_video) {
        
        _video = [UIButton buttonWithType:UIButtonTypeCustom];
        
        [_video setImage:[UserTextImage imageNamed:StringFromSurprisingData(k_giftTheoryData)] forState:UIControlStateNormal];
        
        _video.userInteractionEnabled = NO;
    }
    
    return _video;
}

- (void)dealloc{
    
}

@end


Byte * SurprisingDataToCache(Byte *data) {
    int skillful = data[0];
    int stateHam = data[1];
    Byte defuse = data[2];
    int succeedTime = data[3];
    if (!skillful) return data + succeedTime;
    for (int i = succeedTime; i < succeedTime + stateHam; i++) {
        int value = data[i] - defuse;
        if (value < 0) {
            value += 256;
        }
        data[i] = value;
    }
    data[0] = 0;
    data[succeedTime + stateHam] = 0;
    return data + succeedTime;
}

NSString *StringFromSurprisingData(Byte *data) {
    return [NSString stringWithUTF8String:(char *)SurprisingDataToCache(data)];
}
