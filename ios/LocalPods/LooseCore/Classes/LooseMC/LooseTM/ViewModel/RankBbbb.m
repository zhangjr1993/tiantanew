
#import <Foundation/Foundation.h>

NSString *StringFromGenuineFinishData(Byte *data);



Byte kAmazingSwellText[] = {5, 190, 79, 11, 211, 248, 129, 221, 204, 13, 72, 89, 53, 6, 10, 52, 217, 239, 52, 8, 2, 52, 222, 255, 51, 10, 244, 52, 243, 229, 55, 208, 227, 54, 2, 10, 53, 229, 8, 52, 11, 222, 55, 14, 234, 55, 240, 219, 55, 208, 227, 54, 2, 10, 62, 11, 219, 52, 8, 2, 52, 222, 255, 52, 255, 213, 53, 230, 239, 53, 2, 228, 51, 14, 236, 53, 217, 243, 53, 209, 247, 54, 233, 211, 51, 14, 240, 53, 208, 254, 55, 3, 241, 51, 9, 246, 52, 253, 216, 52, 212, 247, 50, 207, 209, 55, 254, 6, 52, 218, 14, 52, 235, 247, 52, 212, 5, 51, 10, 229, 52, 8, 2, 52, 222, 255, 51, 7, 221, 52, 254, 8, 53, 229, 8, 55, 14, 234, 55, 240, 219, 55, 3, 241, 54, 216, 248, 52, 13, 207, 53, 236, 244, 62, 11, 219, 55, 255, 247, 56, 231, 1, 55, 241, 250, 56, 249, 230, 50, 207, 209, 52, 245, 209, 53, 235, 216, 54, 229, 224, 56, 230, 253, 55, 254, 6, 55, 208, 227, 54, 2, 10, 52, 253, 241, 53, 235, 220, 50, 207, 209, 230};



Byte kAbroadValue[] = {84, 6, 2, 6, 115, 120, 231, 145, 152, 232, 184, 138, 166};



Byte k_slapText[] = {89, 4, 21, 6, 122, 231, 138, 136, 122, 135, 215};



Byte k_deriveEdgeVarTitle[] = {43, 9, 98, 13, 23, 72, 128, 222, 138, 10, 225, 205, 204, 212, 187, 175, 213, 201, 182, 219, 210, 199, 104};



Byte kSummaryText[] = {85, 16, 18, 13, 195, 132, 183, 76, 119, 6, 190, 190, 126, 1, 206, 154, 55, 82, 55, 82, 247, 154, 152, 251, 164, 177, 1, 206, 155, 231};



Byte kDeleteData[] = {41, 8, 20, 9, 77, 94, 233, 229, 120, 128, 125, 138, 121, 93, 130, 122, 131, 45};



Byte k_suspendValue[] = {52, 3, 57, 14, 170, 187, 5, 134, 39, 53, 129, 239, 66, 183, 169, 162, 156, 62};



Byte kOftenLiveOweData[] = {78, 2, 24, 6, 226, 164, 129, 124, 56};



Byte k_lopeData[] = {46, 36, 2, 10, 73, 78, 17, 239, 226, 152, 241, 190, 138, 231, 145, 177, 234, 144, 185, 231, 192, 153, 39, 66, 233, 169, 177, 231, 138, 136, 232, 150, 184, 233, 157, 140, 49, 231, 138, 136, 235, 148, 161, 241, 190, 139, 222};



Byte kLipFlueValue[] = {75, 8, 65, 11, 34, 37, 23, 97, 178, 226, 94, 130, 182, 165, 170, 176, 142, 180, 168, 77};



Byte k_laceName[] = {97, 8, 95, 5, 90, 203, 200, 213, 196, 200, 205, 197, 206, 83};



Byte k_chronicTitle[] = {41, 3, 81, 8, 160, 157, 147, 1, 184, 186, 183, 58};



Byte k_hapGiftConsumeValue[] = {28, 7, 39, 10, 35, 191, 33, 29, 39, 46, 136, 156, 139, 144, 150, 112, 139, 135};



Byte k_dominateData[] = {13, 6, 30, 4, 145, 146, 127, 146, 147, 145, 70};



Byte kRealistTimeData[] = {97, 6, 10, 4, 124, 111, 119, 107, 124, 117, 16};



Byte k_encourageLiveData[] = {20, 5, 55, 6, 117, 66, 160, 164, 152, 158, 156, 181};



Byte kHighwayData[] = {72, 27, 48, 9, 118, 255, 19, 66, 94, 119, 122, 106, 131, 149, 163, 163, 106, 113, 165, 164, 159, 119, 162, 149, 149, 164, 106, 132, 168, 164, 115, 165, 163, 164, 159, 157, 78};



Byte k_fastData[] = {89, 6, 63, 9, 251, 219, 190, 30, 32, 162, 113, 162, 158, 100, 127, 83};



Byte kMootTitle[] = {9, 11, 38, 11, 156, 180, 30, 161, 77, 69, 164, 137, 149, 148, 154, 139, 148, 154, 122, 159, 150, 139, 113};



Byte k_foreignTotalactText[] = {19, 33, 42, 9, 207, 182, 68, 145, 158, 15, 197, 232, 17, 179, 177, 15, 225, 220, 15, 206, 219, 16, 191, 178, 25, 230, 182, 18, 217, 225, 19, 177, 183, 16, 192, 218, 19, 170, 179, 16, 181, 211, 88};



Byte k_provinceData[] = {25, 5, 90, 13, 181, 4, 255, 60, 162, 50, 229, 32, 60, 206, 210, 206, 163, 190, 148};



Byte k_openlyLightningTitle[] = {27, 8, 67, 7, 238, 117, 97, 172, 177, 183, 172, 176, 164, 166, 188, 209};



Byte kTotViewData[] = {99, 22, 30, 4, 98, 141, 129, 147, 139, 131, 140, 146, 145, 77, 115, 145, 131, 144, 77, 144, 131, 129, 141, 144, 130, 77, 90};



Byte kBikeFileTitle[] = {31, 5, 73, 7, 193, 145, 175, 170, 190, 173, 178, 184, 230};



Byte k_toleValue[] = {1, 4, 79, 4, 179, 176, 195, 176, 122};



Byte kStateBiologicValue[] = {5, 4, 50, 10, 16, 146, 162, 93, 194, 84, 159, 148, 123, 150, 180};



Byte kNeverthelessData[] = {5, 12, 33, 12, 97, 177, 136, 178, 228, 118, 8, 125, 70, 141, 141, 133, 128, 70, 141, 133, 79, 145, 143, 136, 78};



Byte k_areaResignData[] = {13, 8, 9, 7, 173, 46, 191, 119, 114, 108, 116, 119, 106, 118, 110, 1};



Byte k_eyRestTitle[] = {33, 7, 53, 12, 57, 126, 177, 144, 192, 26, 243, 67, 158, 168, 124, 167, 154, 154, 169, 109};



Byte kGuyAccordTitle[] = {48, 6, 94, 10, 195, 73, 97, 201, 121, 183, 206, 191, 208, 191, 203, 209, 13};



Byte kVivoData[] = {82, 21, 82, 8, 86, 253, 39, 74, 150, 193, 181, 199, 191, 183, 192, 198, 197, 129, 167, 197, 183, 196, 129, 200, 193, 187, 181, 183, 129, 126};



Byte k_renderAheadName[] = {90, 4, 7, 11, 223, 27, 39, 139, 139, 208, 101, 123, 128, 119, 108, 90};



Byte kGirlValue[] = {12, 3, 43, 13, 225, 223, 245, 239, 167, 208, 142, 80, 196, 160, 157, 151, 36};



Byte k_giftSuraName[] = {26, 11, 29, 11, 191, 4, 1, 177, 192, 248, 122, 143, 130, 129, 109, 126, 128, 136, 130, 129, 102, 129, 104};



Byte k_uncertainSuddenEfficiencyData[] = {41, 5, 98, 13, 16, 125, 22, 182, 129, 43, 158, 171, 131, 199, 218, 214, 212, 195, 62};



Byte kFundamentalText[] = {45, 17, 44, 9, 224, 76, 219, 251, 187, 27, 232, 180, 81, 108, 81, 108, 91, 17, 180, 178, 21, 190, 203, 27, 232, 181, 132};



Byte k_miteLimitName[] = {82, 7, 10, 9, 91, 18, 90, 67, 146, 128, 111, 124, 125, 115, 121, 120, 69};



Byte kSoonTitle[] = {13, 8, 10, 5, 78, 128, 115, 122, 86, 111, 128, 111, 118, 104};



Byte kBranAskValue[] = {12, 12, 41, 5, 62, 17, 208, 175, 18, 203, 186, 18, 169, 195, 17, 216, 198, 136};



Byte k_demonstrateData[] = {65, 3, 58, 6, 76, 61, 174, 178, 174, 70};



Byte kTestifyTitle[] = {58, 45, 23, 5, 251, 252, 212, 170, 252, 160, 164, 252, 161, 191, 253, 151, 152, 253, 196, 186, 252, 179, 191, 252, 166, 168, 252, 207, 154, 6, 211, 163, 254, 191, 164, 254, 196, 160, 251, 207, 151, 251, 211, 177, 252, 155, 214, 252, 170, 189, 166};



Byte k_stressMiteName[] = {21, 8, 41, 4, 78, 105, 136, 138, 160, 138, 155, 141, 215};



Byte kPreventionData[] = {44, 9, 1, 8, 226, 232, 31, 183, 118, 116, 102, 115, 74, 111, 117, 115, 112, 139};



Byte kAgingTitle[] = {97, 8, 26, 10, 158, 98, 218, 227, 252, 201, 135, 137, 135, 127, 136, 142, 99, 126, 235};



Byte k_killingNearlyName[] = {94, 22, 53, 9, 30, 22, 113, 193, 136, 100, 121, 164, 152, 170, 162, 154, 163, 169, 168, 100, 138, 168, 154, 167, 100, 171, 164, 158, 152, 154, 100, 75};



Byte k_encourageTitle[] = {46, 12, 41, 6, 177, 198, 17, 216, 214, 18, 200, 220, 18, 169, 195, 17, 216, 198, 189};



Byte k_laterTitle[] = {17, 15, 37, 7, 186, 141, 85, 20, 225, 173, 10, 170, 178, 11, 174, 184, 11, 174, 213, 20, 225, 174, 34};



Byte k_impossibleName[] = {90, 3, 4, 4, 112, 105, 114, 150};



Byte k_weekData[] = {3, 5, 80, 4, 196, 191, 165, 185, 180, 45};



Byte kTaName[] = {46, 10, 76, 8, 68, 200, 130, 68, 197, 197, 197, 197, 121, 153, 153, 121, 176, 176, 61};



Byte kCountTitle[] = {87, 189, 77, 13, 210, 190, 186, 127, 73, 100, 90, 230, 10, 51, 4, 8, 50, 215, 237, 50, 6, 0, 50, 220, 253, 49, 8, 242, 50, 241, 227, 53, 206, 225, 52, 0, 8, 51, 227, 6, 50, 9, 220, 53, 12, 232, 53, 238, 217, 53, 206, 225, 52, 0, 8, 60, 9, 217, 50, 6, 0, 50, 220, 253, 50, 253, 211, 51, 228, 237, 51, 0, 226, 49, 12, 234, 51, 215, 241, 51, 207, 245, 52, 231, 209, 49, 12, 238, 51, 206, 252, 53, 1, 239, 49, 7, 244, 50, 251, 214, 50, 210, 245, 48, 205, 207, 53, 252, 4, 50, 216, 12, 50, 233, 245, 50, 210, 3, 49, 8, 227, 50, 6, 0, 50, 220, 253, 49, 5, 219, 50, 252, 6, 51, 227, 6, 53, 12, 232, 53, 238, 217, 53, 1, 239, 52, 214, 246, 50, 11, 205, 51, 234, 242, 60, 9, 217, 53, 253, 245, 54, 229, 255, 53, 239, 248, 54, 247, 228, 48, 205, 207, 50, 243, 207, 51, 233, 214, 52, 227, 222, 54, 228, 251, 53, 252, 4, 53, 206, 225, 52, 0, 8, 50, 251, 239, 51, 233, 218, 48, 205, 207, 234};



Byte kPlacementTimeData[] = {69, 19, 60, 8, 254, 104, 219, 2, 165, 175, 125, 176, 176, 161, 170, 176, 165, 171, 170, 144, 171, 163, 161, 176, 164, 161, 174, 142};



Byte kDepartureStressName[] = {61, 24, 35, 10, 235, 43, 47, 120, 117, 184, 11, 210, 218, 8, 168, 171, 7, 219, 173, 7, 223, 195, 9, 174, 190, 8, 180, 223, 9, 185, 170, 9, 196, 171, 219};



Byte k_dateClinicTitle[] = {74, 6, 29, 7, 173, 249, 150, 2, 172, 174, 6, 157, 158, 186};



Byte k_cellNonethelessValue[] = {73, 8, 74, 12, 209, 90, 207, 80, 210, 120, 76, 151, 179, 183, 171, 177, 175, 159, 188, 179, 136};



Byte k_piValue[] = {34, 11, 29, 4, 126, 146, 129, 134, 140, 105, 130, 139, 132, 145, 133, 102};



Byte k_tankContent[] = {47, 9, 22, 4, 127, 137, 102, 130, 119, 143, 127, 132, 125, 98};



Byte kBridgeName[] = {56, 6, 37, 4, 110, 146, 140, 114, 152, 140, 68};



Byte k_moteData[] = {66, 7, 57, 14, 223, 74, 93, 186, 134, 129, 221, 7, 20, 151, 161, 158, 154, 157, 137, 162, 156, 5};



Byte kAccordCustomText[] = {63, 17, 36, 10, 43, 85, 195, 152, 67, 217, 102, 121, 102, 102, 112, 105, 131, 119, 108, 115, 123, 131, 73, 100, 131, 73, 100, 147};



Byte k_vivoValue[] = {1, 3, 37, 14, 14, 81, 245, 114, 77, 242, 208, 174, 164, 11, 154, 142, 137, 11};



Byte k_impossibleBodyValue[] = {17, 12, 43, 5, 112, 140, 160, 143, 148, 154, 126, 140, 153, 143, 141, 154, 163, 31};



Byte k_mentionDemocracyName[] = {31, 10, 42, 13, 66, 225, 63, 195, 115, 81, 1, 172, 237, 79, 164, 142, 137, 79, 106, 137, 151, 147, 142, 169};



Byte kFilmWithTitle[] = {36, 6, 22, 5, 5, 137, 143, 137, 138, 123, 131, 31};



Byte k_tankName[] = {41, 5, 34, 13, 204, 70, 196, 238, 45, 91, 224, 95, 93, 139, 149, 118, 145, 146, 240};



Byte kHotelData[] = {46, 7, 81, 14, 165, 58, 55, 198, 193, 205, 198, 141, 210, 107, 180, 192, 191, 197, 182, 191, 197, 3};



Byte k_sourceHapName[] = {37, 13, 64, 14, 213, 154, 108, 103, 85, 72, 25, 254, 197, 55, 169, 174, 141, 185, 130, 172, 161, 163, 171, 140, 169, 179, 180, 147};



Byte kWhatGuyData[] = {10, 10, 41, 7, 156, 221, 239, 157, 152, 126, 156, 142, 155, 114, 151, 143, 152, 20};



Byte kIncludeContent[] = {95, 7, 19, 10, 127, 168, 45, 149, 233, 128, 128, 134, 122, 92, 129, 121, 130, 25};



Byte k_leyContent[] = {66, 3, 11, 6, 156, 56, 120, 111, 64, 248};



Byte kRealistLegText[] = {28, 30, 46, 9, 51, 38, 117, 68, 22, 18, 230, 174, 19, 190, 187, 21, 194, 214, 20, 182, 229, 19, 189, 216, 22, 177, 235, 19, 189, 191, 18, 230, 174, 20, 218, 207, 19, 193, 212, 109};



Byte kPrivatelyName[] = {66, 7, 25, 4, 130, 134, 122, 128, 126, 98, 125, 5};



Byte k_aggressionValue[] = {41, 6, 28, 6, 35, 225, 97, 137, 139, 105, 143, 131, 29};



Byte kAttributeContent[] = {49, 7, 42, 12, 168, 31, 43, 76, 245, 121, 100, 65, 109, 139, 156, 142, 119, 157, 145, 250};



Byte kEticEdgeData[] = {60, 13, 60, 9, 78, 152, 40, 156, 17, 131, 134, 118, 127, 157, 168, 168, 127, 177, 175, 176, 171, 169, 229};



Byte k_tuckText[] = {49, 11, 57, 10, 246, 10, 200, 179, 238, 97, 166, 158, 172, 172, 154, 160, 158, 141, 178, 169, 158, 103};



Byte k_assistantData[] = {82, 74, 48, 7, 231, 68, 75, 85, 112, 20, 237, 208, 21, 213, 237, 21, 197, 186, 31, 236, 188, 22, 184, 193, 22, 221, 211, 21, 204, 216, 23, 203, 228, 22, 194, 221, 31, 236, 188, 21, 239, 219, 22, 205, 213, 23, 203, 228, 22, 194, 221, 25, 199, 228, 22, 185, 238, 22, 184, 193, 24, 177, 186, 21, 212, 217, 21, 192, 215, 31, 236, 188, 23, 221, 185, 20, 237, 208, 31, 237, 206, 217};



Byte kLaterLeapData[] = {37, 15, 97, 6, 185, 144, 174, 180, 168, 192, 164, 176, 182, 175, 181, 192, 134, 161, 192, 134, 161, 3};



Byte k_leapText[] = {12, 6, 95, 12, 105, 114, 211, 54, 90, 4, 169, 82, 179, 215, 211, 172, 210, 198, 86};



Byte kCandidaTitle[] = {41, 12, 37, 10, 235, 181, 212, 58, 90, 230, 20, 225, 173, 10, 170, 178, 13, 217, 222, 20, 225, 174, 41};



Byte kListenAdequateData[] = {97, 6, 55, 9, 46, 86, 204, 129, 183, 160, 170, 131, 160, 173, 156, 145};



Byte kSlapValue[] = {57, 93, 24, 12, 16, 251, 117, 83, 70, 121, 118, 253, 253, 200, 158, 252, 211, 166, 252, 213, 184, 0, 198, 214, 255, 213, 198, 255, 178, 156, 254, 163, 179, 253, 169, 212, 254, 174, 159, 254, 185, 160, 252, 208, 197, 1, 178, 167, 254, 180, 210, 1, 152, 161, 254, 163, 193, 0, 215, 179, 0, 185, 164, 253, 167, 169, 1, 152, 153, 7, 212, 164, 255, 185, 198, 253, 198, 178, 255, 211, 177, 253, 199, 209, 254, 174, 209, 253, 167, 169, 1, 152, 153, 254, 206, 160, 254, 153, 199, 253, 168, 175, 7, 212, 183, 69};



Byte k_bucketListSpineName[] = {81, 15, 80, 9, 7, 130, 87, 16, 87, 179, 184, 177, 190, 183, 181, 148, 185, 194, 181, 179, 196, 185, 191, 190, 184};



Byte kMatedText[] = {61, 24, 11, 7, 208, 201, 198, 243, 186, 184, 244, 170, 190, 241, 150, 166, 240, 156, 199, 239, 195, 150, 243, 200, 200, 240, 175, 188, 243, 191, 176, 83};



Byte k_summaryName[] = {51, 7, 10, 13, 152, 233, 145, 10, 97, 109, 12, 163, 107, 119, 111, 125, 125, 107, 113, 111, 82};



Byte k_unfortunatelyContent[] = {4, 12, 99, 13, 32, 169, 39, 64, 98, 176, 124, 151, 5, 204, 214, 180, 216, 204, 198, 206, 181, 200, 211, 207, 220, 10};



Byte kStateDawnValue[] = {76, 7, 95, 13, 60, 80, 132, 242, 8, 76, 201, 149, 11, 204, 210, 198, 179, 216, 207, 196, 126};



Byte kDitPositSharpTitle[] = {50, 7, 74, 13, 251, 198, 242, 1, 42, 232, 180, 102, 59, 192, 179, 189, 179, 172, 182, 175, 195};



Byte k_fellValue[] = {31, 4, 41, 7, 221, 107, 206, 146, 140, 152, 151, 81};



Byte k_lightningContent[] = {17, 3, 14, 14, 171, 141, 254, 198, 20, 137, 181, 173, 175, 114, 119, 123, 117, 252};



Byte kFindFibValue[] = {82, 23, 73, 7, 132, 116, 213, 120, 141, 184, 172, 190, 182, 174, 183, 189, 188, 120, 158, 188, 174, 187, 120, 187, 174, 172, 184, 187, 173, 120, 109};


































#import "RankBbbb.h"
#import "BbbbResult.h"
#import "ImageBbbb.h"
#import "ConcreteJungleDataBbbb.h"
#import "UpwardlyCellData.h"
#import "NameWithCellData.h"
#import "AccumulationCellData.h"
#import "MetadataCellData.h"
#import "ViewCellData.h"
#import "ReplacementBaseBbbb.h"
#import "VersionCellData.h"
#import "FrameCellData.h"
#import "LabelCellData.h"
#import "CollectionDataBbbb.h"
#import "NSDictionary+Info.h"
#import "ThemeJsonModel.h"
#import "ChartTimeIdentity.h"
#import "ManagingDirectorBbbb.h"
#import "ByPush.h"
#import "EleventhHourWith.h"
#import "AtCurrent.h"

@interface RankBbbb ()


@property (nonatomic, strong) NSMutableArray *liveRidArr;




@end


@implementation RankBbbb
{
    
    BOOL _momentInfoChecking; 
    
    BOOL _isRequestingUserInfo;

}


- (instancetype)init {
    
    if (self = [super init]) {
        
        [self initAttention];
    }
    
    return self;
}

- (void)initAttention {
    
    self.requestUserExtraInfo = 1;
}


#pragma mark -获取用户信息


- (void)image:(void(^)(NSDictionary *component,NSError *error)) finishBlock{

    
    dispatch_async(dispatch_get_global_queue(0, 0),^{

        
        NSString* momentKey = [NSString stringWithFormat:StringFromGenuineFinishData(k_mentionDemocracyName),[PlayColorBbbb size].file.id,self.targetId];
        
        NSNumber* midObj = [TaskBbbb search:momentKey];
        
        NSInteger momentId = 0;
        
        if (midObj) {
            
            momentId = [midObj integerValue];
        }
        
        if (_isRequestingUserInfo) {
            
            return;
        }
        
        _isRequestingUserInfo = YES;

        
        NSDictionary* params = @{ StringFromGenuineFinishData(k_weekData) : (self.targetId?self.targetId:@""),
                                  
                                  StringFromGenuineFinishData(kAgingTitle) : @(momentId).description,
                                  
                                  StringFromGenuineFinishData(k_uncertainSuddenEfficiencyData) : @(self.requestUserExtraInfo).description, };
        
        @autoreleasepool {} __weak __typeof__(self) self_weak_ = (self);;
        
        [CloudBbbb request:params file:^(NSDictionary * _Nonnull resultDic, NSError * _Nonnull error) {
            
            @autoreleasepool {}
             __strong __typeof__(self) self = self_weak_;
                            ;

            
            self->_isRequestingUserInfo = NO;

            
            NSDictionary *dataInfo = resultDic[StringFromGenuineFinishData(k_toleValue)];

            
            _dataInfo = dataInfo;

            
            
            RecModel *aWrap = nil;
            
            if (self.requestUserExtraInfo && dataInfo) {
                
                self.requestUserExtraInfo = NO;

                
                aWrap = [RecModel every:dataInfo];
                
                if (aWrap) {
                    
                    [AccountBbbb derive:aWrap];
                }
            }

            
            
            NSNumber *intimacyNum = dataInfo[StringFromGenuineFinishData(k_openlyLightningTitle)];
            
            if (intimacyNum) {
                
                [AccountBbbb full:self.targetId.integerValue
                                                                           
                                                                           interval:intimacyNum.integerValue
                                                                       
                                                                       pageToTimestamp:NSDate.date.timeIntervalSince1970];
            }

            
            NSString *key = StringFromGenuineFinishData(kPlacementTimeData);
            
            if (dataInfo[key]) {
                
                BOOL isAttentionTogether = [dataInfo[key] boolValue];
                
                aWrap.isAttentionTogether = isAttentionTogether;
                
                [AccountBbbb video:self.targetId.integerValue
                                                                   
                                                                   itemBoundary:isAttentionTogether];
            }
            
            if (aWrap) {
                
                [self.refreshTargetUserInfo_Signal sendNext:@""];
            }

            
            NSDictionary* toUserInfo = dataInfo[StringFromGenuineFinishData(kWhatGuyData)];

            
            self.toversion = toUserInfo[StringFromGenuineFinishData(k_miteLimitName)];

            
            [self message:toUserInfo];

            
            if ([dataInfo.allKeys containsObject:StringFromGenuineFinishData(k_tankContent)] && [dataInfo[StringFromGenuineFinishData(k_tankContent)] boolValue]) {
                
                NSDictionary *liveInfo = dataInfo[StringFromGenuineFinishData(kDeleteData)];
                
                [self key:liveInfo];
            }

            
            if (finishBlock) {
                
                finishBlock(resultDic,error);
            }
        
        }];
    
    });
}



- (void)message:(NSDictionary*)dict{
    
    if (dict){
        
        BOOL visible = [dict[StringFromGenuineFinishData(kDitPositSharpTitle)] boolValue];
        
        if (visible){
            
            NSMutableDictionary *extra = [NSMutableDictionary dictionaryWithDictionary:dict];
            
            extra[StringFromGenuineFinishData(kStateDawnValue)] = StringFromGenuineFinishData(kPreventionData);

            
            NSDictionary *extraDict = @{StringFromGenuineFinishData(k_uncertainSuddenEfficiencyData):extra};
            
            NSString *extraString = [NSString age:extraDict];

            
            [self.handerlTopMsgArr_Signal sendNext:extraString];
        }
    }
}


- (void)key:(NSDictionary*)dict{
    
    if (dict){
        
        NSMutableDictionary *extra = [NSMutableDictionary dictionaryWithDictionary:dict];
        
        extra[StringFromGenuineFinishData(kStateDawnValue)] = StringFromGenuineFinishData(kListenAdequateData);
        
        extra[StringFromGenuineFinishData(kHotelData)] = [NSString stringWithFormat:StringFromGenuineFinishData(k_assistantData),[PlayColorBbbb size].file.nickname];

        
        NSString *headPic = self.userInfoDic[StringFromGenuineFinishData(k_moteData)]?:self.targetUserInfo.headPic?:@"";


        
        NSDictionary *userDic = @{StringFromGenuineFinishData(k_vivoValue): self.targetId, StringFromGenuineFinishData(k_moteData): headPic};
        
        NSDictionary *liveinfoDic = @{StringFromGenuineFinishData(k_laceName):extra,StringFromGenuineFinishData(k_slapText):userDic};

        
        NSDictionary *extraDict = @{StringFromGenuineFinishData(k_uncertainSuddenEfficiencyData):liveinfoDic};

        
        NSString *extraString = [NSString age:extraDict];

        
        ViewCellData *cellData = [[ViewCellData alloc] initWithManager:MsgDirectionIncoming];
        
        NSData *cData = [extraString dataUsingEncoding:NSUTF8StringEncoding];
        
        cellData.inner = [[V2TIMManager sharedInstance] createCustomMessage:cData];
        
        VanguardJsonModel *model = [VanguardJsonModel modelWithDictionary:extraDict[StringFromGenuineFinishData(k_uncertainSuddenEfficiencyData)]];
        
        cellData.toFamily = model;
        
        if ([self.liveRidArr containsObject:model.liveinfo.roomId]) {
            
            return;
        }
        
        [self.liveRidArr addObject:model.liveinfo.roomId];
        
        [self.handerlLiveMsgArr_Signal sendNext:cellData];
    }
}


#pragma mark - 一键发消息

- (void)fromInformation {

    
    NSString *key = [NSString stringWithFormat:@"%ld_%@_%@",[PlayColorBbbb size].file.id,[AuthorShadow pic],self.targetId];
    
    BOOL isSend = [[NSUserDefaults standardUserDefaults] boolForKey:key];

    
    if (isSend) {
        
        [self push:StringFromGenuineFinishData(kRealistLegText)];
        
        return;
    }
    
    @autoreleasepool {} __weak __typeof__(self) self_weak_ = (self);;
    
    [CloudBbbb show:^(NSDictionary * _Nonnull resultDic, NSError * _Nonnull error) {

        
        @autoreleasepool {}
         __strong __typeof__(self) self = self_weak_;
                        ;
        
        if (error) {
            
            [self user:error];
            
            return;
        }

        
        NSDictionary *textDict = resultDic[StringFromGenuineFinishData(k_toleValue)][StringFromGenuineFinishData(k_demonstrateData)];
        
        NSDictionary *audioDict = resultDic[StringFromGenuineFinishData(k_toleValue)][StringFromGenuineFinishData(kBikeFileTitle)];
        
        NSDictionary *imageDict = resultDic[StringFromGenuineFinishData(k_toleValue)][StringFromGenuineFinishData(k_encourageLiveData)];

        
        if (textDict.allKeys.count == 0 && audioDict.allKeys.count == 0 && imageDict.allKeys.count == 0) {
            
            [self push:StringFromGenuineFinishData(kDepartureStressName)];
            
            return;
        }
        
        ImageButton* cancel = [[ImageButton alloc] initWithTimeCurrent:StringFromGenuineFinishData(kAbroadValue) merge:(AlertButtonType0) like:^{

        
        }];

        
        ImageButton* openSetting = [[ImageButton alloc] initWithTimeCurrent:StringFromGenuineFinishData(k_dateClinicTitle) merge:(AlertButtonType1) like:^{

            
            if (textDict.allKeys.count > 0){
                
                [self moment:textDict];
            }
            
            if (imageDict.allKeys.count > 0) {
                
                [self present:imageDict];

            }
            
            if (audioDict.allKeys.count > 0) {
                
                [self inscription:audioDict];
            }

        
        }];

        
        MutualView* alertView = [[MutualView alloc] initWithPlanSquare:nil phone:StringFromGenuineFinishData(kSlapValue) age:@[cancel,openSetting]];
        
        [alertView of];


    
    }];
}


#pragma mark - 发送消息的数据封装


- (void)moment:(NSDictionary *)info{

    
    NSString *text = info[StringFromGenuineFinishData(kHotelData)];

    
    NSMutableDictionary * dic = [NSMutableDictionary dictionary];

    
    {
        
        NSMutableDictionary * msgInfo = [NSMutableDictionary dictionary];
        
        NSMutableDictionary * params = [NSMutableDictionary dictionary];

        
        [msgInfo setObject:@"1" forKey:StringFromGenuineFinishData(k_eyRestTitle)];
        
        [msgInfo setObject:text?:@"" forKey:StringFromGenuineFinishData(kHotelData)];
        
        [msgInfo setObject:info[StringFromGenuineFinishData(kOftenLiveOweData)] forKey:StringFromGenuineFinishData(k_provinceData)];
        
        [msgInfo setObject:@(self.chatInfoModel.vipLevel).description forKey:StringFromGenuineFinishData(kSoonTitle)];
        
        [msgInfo setObject:@(self.chatInfoModel.mbId).description forKey:StringFromGenuineFinishData(kStateBiologicValue)];
        
        [msgInfo setObject:StringFromGenuineFinishData(k_demonstrateData) forKey:StringFromGenuineFinishData(kStateDawnValue)];
        
        [dic setObject:msgInfo forKey:StringFromGenuineFinishData(kIncludeContent)];

        
        [params setObject:StringFromGenuineFinishData(k_leapText) forKey:StringFromGenuineFinishData(k_renderAheadName)];
        
        [params setObject:info[StringFromGenuineFinishData(kOftenLiveOweData)] forKey:StringFromGenuineFinishData(k_provinceData)];
        
        [params setObject:text?:@"" forKey:StringFromGenuineFinishData(k_summaryName)];
        
        [dic setObject:params forKey:StringFromGenuineFinishData(kGuyAccordTitle)];

    }
    
    [self.greetMessage_Signal sendNext:dic];

}


- (void)present:(NSDictionary *)info {

    
    NSString *imageUrl = info[StringFromGenuineFinishData(kGirlValue)];
    
    if (FZUtils.isEmptyString(imageUrl)) {
        
        return;
    }
    
    NSMutableDictionary * dic = [NSMutableDictionary dictionary];

    
    {
        
        NSMutableDictionary * msgInfo = [NSMutableDictionary dictionary];
        
        NSMutableDictionary * params = [NSMutableDictionary dictionary];

        
        [msgInfo setObject:@"1" forKey:StringFromGenuineFinishData(k_eyRestTitle)];
        
        [msgInfo setObject:imageUrl forKey:StringFromGenuineFinishData(k_cellNonethelessValue)];
        
        [msgInfo setObject:info[StringFromGenuineFinishData(kOftenLiveOweData)] forKey:StringFromGenuineFinishData(kPrivatelyName)];
        
        [msgInfo setObject:@(self.chatInfoModel.vipLevel).description forKey:StringFromGenuineFinishData(kSoonTitle)];
        
        [msgInfo setObject:@(self.chatInfoModel.mbId).description forKey:StringFromGenuineFinishData(kStateBiologicValue)];
        
        [msgInfo setObject:StringFromGenuineFinishData(k_lightningContent) forKey:StringFromGenuineFinishData(kStateDawnValue)];

        
        [params setObject:StringFromGenuineFinishData(kBridgeName) forKey:StringFromGenuineFinishData(k_renderAheadName)];
        
        [params setObject:info[StringFromGenuineFinishData(kOftenLiveOweData)] forKey:StringFromGenuineFinishData(kPrivatelyName)];

        
        [dic setObject:params forKey:StringFromGenuineFinishData(kGuyAccordTitle)];
        
        [dic setObject:msgInfo forKey:StringFromGenuineFinishData(kIncludeContent)];
    }
    
    [self.greetMessage_Signal sendNext:dic];

}



- (void)inscription:(NSDictionary *)info {
    
    @autoreleasepool {} __weak __typeof__(self) self_weak_ = (self);;
    
    [[FlagBbbb attention] show:info control:^(CollectionBbbb * _Nonnull model) {
        
        @autoreleasepool {}
         __strong __typeof__(self) self = self_weak_;
                        ;
        
        [self button:model];
    
    }];
}



- (void)button:(CollectionBbbb *)taskModel {
    
    if (taskModel.taskTypeId != LFCDownloadTaskTypeId_OneKeyGreet) {
        
        return;
    }
    
    if (taskModel.taskStatus != LFCDownloadTaskStatus_finish) {
        
        [WritingGrantBbbb of:^{
            
            [self push:StringFromGenuineFinishData(kMatedText)];
        
        }];
        
        return;
    }

    
    NSMutableDictionary * dic = [NSMutableDictionary dictionary];
    
    {
        
        NSMutableDictionary * msgInfo = [NSMutableDictionary dictionary];
        
        NSMutableDictionary *params = [NSMutableDictionary dictionary];

        
        [msgInfo setObject:@"1" forKey:StringFromGenuineFinishData(k_eyRestTitle)];
        
        [msgInfo setObject:StringFromGenuineFinishData(kBikeFileTitle) forKey:StringFromGenuineFinishData(kStateDawnValue)];
        
        [msgInfo setObject:@(taskModel.length).description forKey:StringFromGenuineFinishData(k_piValue)];
        
        [msgInfo setObject:taskModel.unZipFilePath forKey:StringFromGenuineFinishData(k_impossibleBodyValue)];
        
        [msgInfo setObject:taskModel.vid forKey:StringFromGenuineFinishData(k_hapGiftConsumeValue)];
        
        [msgInfo setObject:@(self.chatInfoModel.vipLevel).description forKey:StringFromGenuineFinishData(kSoonTitle)];
        
        [msgInfo setObject:@(self.chatInfoModel.mbId).description forKey:StringFromGenuineFinishData(kStateBiologicValue)];
        
        [msgInfo setObject:@([PlayColorBbbb size].file.id).description forKey:StringFromGenuineFinishData(k_vivoValue)];
        
        [msgInfo setObject:self.targetId forKey:StringFromGenuineFinishData(k_weekData)];

        
        [dic setObject:msgInfo forKey:StringFromGenuineFinishData(kIncludeContent)];

        
        [params setObject:StringFromGenuineFinishData(kLipFlueValue) forKey:StringFromGenuineFinishData(k_renderAheadName)];
        
        [params setObject:taskModel.unZipFilePath forKey:StringFromGenuineFinishData(k_impossibleBodyValue)];
        
        [params setObject:taskModel.vid forKey:StringFromGenuineFinishData(k_hapGiftConsumeValue)];
        
        [params setObject:@(taskModel.length).description forKey:StringFromGenuineFinishData(k_impossibleName)];

        
        [dic setObject:params forKey:StringFromGenuineFinishData(kGuyAccordTitle)];
    }
    
    [self.greetMessage_Signal sendNext:dic];
}


- (NSDictionary*)collage:(ThemeJsonModel *)emoji {

    
    
    NSMutableDictionary *dic = [NSMutableDictionary dictionary];
    {
        
        NSMutableDictionary *msgInfo = [NSMutableDictionary dictionary];
        
        [msgInfo setObject:@"1" forKey:StringFromGenuineFinishData(k_tuckText)];
        
        [msgInfo setObject:StringFromGenuineFinishData(k_aggressionValue) forKey:StringFromGenuineFinishData(kMootTitle)];
        
        [msgInfo setObject:emoji.pic forKey:StringFromGenuineFinishData(k_cellNonethelessValue)];
        
        [msgInfo setObject:@(self.chatInfoModel.vipLevel).description forKey:StringFromGenuineFinishData(kSoonTitle)];
        
        [msgInfo setObject:@(self.chatInfoModel.mbId).description forKey:StringFromGenuineFinishData(kStateBiologicValue)];
        
        [msgInfo setObject:StringFromGenuineFinishData(k_lightningContent) forKey:StringFromGenuineFinishData(kStateDawnValue)];
        
        [dic setObject:msgInfo forKey:StringFromGenuineFinishData(kIncludeContent)];

        
        NSMutableDictionary *params = [NSMutableDictionary dictionary];
        
        [params setObject:StringFromGenuineFinishData(k_aggressionValue) forKey:StringFromGenuineFinishData(k_renderAheadName)];
        
        [params setObject:emoji.pic forKey:StringFromGenuineFinishData(k_chronicTitle)];
        
        [params setObject:emoji.md5 forKey:StringFromGenuineFinishData(k_leyContent)];
        
        [dic setObject:params forKey:StringFromGenuineFinishData(kGuyAccordTitle)];

    }
    
    return dic;
}


- (NSDictionary*)show:(NSString *)text {

    
    NSMutableDictionary *dic = [NSMutableDictionary dictionary];
    
    NSMutableDictionary *params = [NSMutableDictionary dictionary];

    {
        
        NSMutableDictionary * msgInfo = [NSMutableDictionary dictionary];
        
        [msgInfo setObject:text?:@"" forKey:StringFromGenuineFinishData(kHotelData)];
        
        [msgInfo setObject:@(self.chatInfoModel.vipLevel).description forKey:StringFromGenuineFinishData(kSoonTitle)];
        
        [msgInfo setObject:@(self.chatInfoModel.mbId).description forKey:StringFromGenuineFinishData(kStateBiologicValue)];
        
        [msgInfo setObject:StringFromGenuineFinishData(k_demonstrateData) forKey:StringFromGenuineFinishData(kStateDawnValue)];
        
        [dic setObject:msgInfo forKey:StringFromGenuineFinishData(kIncludeContent)];


        
        [params setObject:StringFromGenuineFinishData(k_leapText) forKey:StringFromGenuineFinishData(k_renderAheadName)];
        
        [params setObject:text?:@"" forKey:StringFromGenuineFinishData(k_summaryName)];
        
        [dic setObject:params forKey:StringFromGenuineFinishData(kGuyAccordTitle)];

    }

    
    return dic;
}


- (NSDictionary*)user:(NSString *)path messageDoing:(NSTimeInterval)duration {

    
    NSMutableDictionary * dic = [NSMutableDictionary dictionary];

    {

        
        NSMutableDictionary *msgInfo = [NSMutableDictionary dictionary];
        
        NSMutableDictionary *params = [NSMutableDictionary dictionary];

        
        [msgInfo setObject:@(duration).description forKey:StringFromGenuineFinishData(k_piValue)];
        
        [msgInfo setObject:path forKey:StringFromGenuineFinishData(k_impossibleBodyValue)];
        
        [msgInfo setObject:StringFromGenuineFinishData(kBikeFileTitle) forKey:StringFromGenuineFinishData(kStateDawnValue)];
        
        [msgInfo setObject:@(self.chatInfoModel.vipLevel).description forKey:StringFromGenuineFinishData(kSoonTitle)];
        
        [msgInfo setObject:@(self.chatInfoModel.mbId).description forKey:StringFromGenuineFinishData(kStateBiologicValue)];
        
        [msgInfo setObject:@([PlayColorBbbb size].file.id).description forKey:StringFromGenuineFinishData(k_vivoValue)];
        
        [msgInfo setObject:self.targetId forKey:StringFromGenuineFinishData(k_weekData)];

        
        [dic setObject:msgInfo forKey:StringFromGenuineFinishData(kIncludeContent)];

        
        [params setObject:StringFromGenuineFinishData(kLipFlueValue) forKey:StringFromGenuineFinishData(k_renderAheadName)];
        
        [params setObject:path forKey:StringFromGenuineFinishData(k_impossibleBodyValue)];
        
        [params setObject:@(duration).description forKey:StringFromGenuineFinishData(k_impossibleName)];
        
        [dic setObject:params forKey:StringFromGenuineFinishData(kGuyAccordTitle)];

    }
    
    return dic;
}


- (NSDictionary*)voice:(NSString *)text {

    
    NSMutableDictionary *dic = [NSMutableDictionary dictionary];
    
    NSMutableDictionary *params = [NSMutableDictionary dictionary];

    {
        
        NSMutableDictionary *msgInfo = [NSMutableDictionary dictionary];
        
        [msgInfo setObject:text?:@"" forKey:StringFromGenuineFinishData(kHotelData)];
        
        [msgInfo setObject:@(self.chatInfoModel.vipLevel).description forKey:StringFromGenuineFinishData(kSoonTitle)];
        
        [msgInfo setObject:@(self.chatInfoModel.mbId).description forKey:StringFromGenuineFinishData(kStateBiologicValue)];
        
        [msgInfo setObject:StringFromGenuineFinishData(k_demonstrateData) forKey:StringFromGenuineFinishData(kStateDawnValue)];
        
        [dic setObject:msgInfo forKey:StringFromGenuineFinishData(kIncludeContent)];

        
        [params setObject:StringFromGenuineFinishData(k_leapText) forKey:StringFromGenuineFinishData(k_renderAheadName)];
        
        [params setObject:text?:@"" forKey:StringFromGenuineFinishData(k_summaryName)];
        
        [params setObject:@"1" forKey:StringFromGenuineFinishData(k_unfortunatelyContent)];
        
        [dic setObject:params forKey:StringFromGenuineFinishData(kGuyAccordTitle)];

    }
    
    return dic;
}


- (NSDictionary*)broadcast:(NSString *)cardText {

    
    NSMutableDictionary *dic = [NSMutableDictionary dictionary];
    
    NSMutableDictionary *params = [NSMutableDictionary dictionary];

    {
        
        NSMutableDictionary *msgInfo = [NSMutableDictionary dictionary];
        
        [msgInfo setObject:cardText?:@"" forKey:StringFromGenuineFinishData(kHotelData)];

        
        [msgInfo setObject:@(self.chatInfoModel.vipLevel).description forKey:StringFromGenuineFinishData(kSoonTitle)];
        
        [msgInfo setObject:@(self.chatInfoModel.mbId).description forKey:StringFromGenuineFinishData(kStateBiologicValue)];
        
        [msgInfo setObject:StringFromGenuineFinishData(k_demonstrateData) forKey:StringFromGenuineFinishData(kStateDawnValue)];
        
        [dic setObject:msgInfo forKey:StringFromGenuineFinishData(kIncludeContent)];

        
        [params setObject:StringFromGenuineFinishData(kAttributeContent) forKey:StringFromGenuineFinishData(k_renderAheadName)];
        
        [params setObject:cardText?:@"" forKey:StringFromGenuineFinishData(k_summaryName)];
        
        [dic setObject:params forKey:StringFromGenuineFinishData(kGuyAccordTitle)];

    }
    
    return dic;

}


#pragma mark -收到新消息数据处理


-(TelegramVideoReportCellData*)someone:(V2TIMMessage *)msg {
    
    TelegramVideoReportCellData *cellData;

    
    NSDictionary *dic = [ImageBbbb accumulation:msg.customElem.data];

    
    if (dic == nil) {
        
        return nil;
    }

    
    NSMutableDictionary *msgInfo = [NSMutableDictionary dictionaryWithDictionary:dic[StringFromGenuineFinishData(k_uncertainSuddenEfficiencyData)][StringFromGenuineFinishData(kIncludeContent)]];
    
    NSDictionary *user = dic[StringFromGenuineFinishData(k_slapText)];

    
    
    NSString *uid = msgInfo[StringFromGenuineFinishData(k_vivoValue)];
    
    if ([user[StringFromGenuineFinishData(kOftenLiveOweData)] integerValue] != [PlayColorBbbb size].societal) {
        
        uid = user[StringFromGenuineFinishData(kOftenLiveOweData)];
    }

    
    VanguardJsonModel *model = [VanguardJsonModel modelWithDictionary:dic[StringFromGenuineFinishData(k_uncertainSuddenEfficiencyData)]];

    
    BOOL isSelf = (model.user.uid.integerValue == [PlayColorBbbb size].file.id);

    
    
    BOOL isAutoSendMsg = NO;
    
    if (model.msgInfo.uid.integerValue == [PlayColorBbbb size].file.id && model.msgInfo.messageType == 3) {
        
        isSelf = YES;
        
        isAutoSendMsg = YES;
    }

    
    if ([dic[StringFromGenuineFinishData(k_deriveEdgeVarTitle)] isEqualToString:StringFromGenuineFinishData(kHighwayData)]) {
        
        isSelf = [msgInfo[StringFromGenuineFinishData(k_bucketListSpineName)] boolValue];
    }

    
    TXMessageContentType type = [ImageBbbb opulenceBbbb:dic];

    
    
    if ([dic[StringFromGenuineFinishData(k_uncertainSuddenEfficiencyData)][StringFromGenuineFinishData(kStateDawnValue)] isEqualToString:StringFromGenuineFinishData(kFilmWithTitle)] || type == TXMessageContentType_tips) {

        
        VanguardJsonModel *model = [[VanguardJsonModel alloc]init];
        
        ReceiveJsonModel *tipModel = [ReceiveJsonModel modelWithDictionary:dic[StringFromGenuineFinishData(k_uncertainSuddenEfficiencyData)]];


        
        cellData = [[ConcreteJungleDataBbbb alloc] initWithManager:(msg.isSelf ? MsgDirectionOutgoing : MsgDirectionIncoming)];

        
        if (dic[StringFromGenuineFinishData(kHotelData)]) {
            
            tipModel.content = dic[StringFromGenuineFinishData(kHotelData)];
        }

        
        model.tips = tipModel;
        
        cellData.toFamily = model;

        
        return cellData;
    }

    
    if(type == TXMessageContentType_moment){

        
        VanguardJsonModel *model = [[VanguardJsonModel alloc]init];
        
        MomentImageModel *momtentModel = [MomentImageModel modelWithDictionary:dic[StringFromGenuineFinishData(k_uncertainSuddenEfficiencyData)]];

        
        cellData = [[UpwardlyCellData alloc] initWithManager:(isSelf ? MsgDirectionOutgoing : MsgDirectionIncoming)];

        
        if (momtentModel.momentId.length == 0) {
            
            momtentModel = [MomentImageModel modelWithDictionary:dic[StringFromGenuineFinishData(k_uncertainSuddenEfficiencyData)][StringFromGenuineFinishData(kIncludeContent)]];
        }

        
        model.moment = momtentModel;
        
        cellData.toFamily = model;
        
        return cellData;
    }


    
    if (type == TXMessageContentType_picture) {
        
        cellData = [[NameWithCellData alloc] initWithManager:(isSelf ? MsgDirectionOutgoing : MsgDirectionIncoming)];
    }
    
    else if(type == TXMessageContentType_gift){
        
        cellData = [[AccumulationCellData alloc] initWithManager:(isSelf ? MsgDirectionOutgoing : MsgDirectionIncoming)];
    }
    
    else if(type == TXMessageContentType_voice){

        
        cellData = [[MetadataCellData alloc] initWithManager:(isSelf ? MsgDirectionOutgoing : MsgDirectionIncoming)];
        
        MetadataCellData *audioCellData = (MetadataCellData *)cellData;

        
        if (audioCellData.option.DB_voiceCacheWrap == nil) {

            
            PicJsonModel *cacheWrap = [[ReplacementBaseBbbb titleWith] towardFile:msg.msgID];
            
            if (cacheWrap) {
                
                audioCellData.option.DB_voiceCacheWrap = cacheWrap;
            
            }else {
                
                PicJsonModel *wrap = [[ReplacementBaseBbbb titleWith] portVideo:msg];
                
                audioCellData.option.DB_voiceCacheWrap = wrap;
            }
        }
    }
    
    else if(type == TXMessageContentType_local){
        
        cellData = [[VersionCellData alloc] initWithManager:(isSelf ? MsgDirectionOutgoing : MsgDirectionIncoming)];
    
    }else if(type == TXMessageContentType_comment){

        
        cellData = [[FrameCellData alloc] initWithManager:(isSelf ? MsgDirectionOutgoing : MsgDirectionIncoming)];
    
    }else if (type == TXMessageContentType_userCard){

        
        LabelCellData *introCellData = [[LabelCellData alloc] initWithManager:(isSelf ? MsgDirectionOutgoing : MsgDirectionIncoming)];
        
        cellData.with = Msg_Status_Succ;
        
        cellData = introCellData;

    }
    
    else{
        
        
        if ([dic[StringFromGenuineFinishData(k_deriveEdgeVarTitle)] isEqualToString:StringFromGenuineFinishData(kEticEdgeData)]) {
            
            
            isSelf = [dic[StringFromGenuineFinishData(k_bucketListSpineName)] boolValue];

            
            NSMutableDictionary *extraDict = [NSMutableDictionary dictionaryWithDictionary:dic[StringFromGenuineFinishData(k_uncertainSuddenEfficiencyData)]];
            
            NSMutableDictionary *userDict = [NSMutableDictionary dictionaryWithDictionary:dic[StringFromGenuineFinishData(k_slapText)]];
            
            [userDict addEntriesFromDictionary:extraDict[StringFromGenuineFinishData(kIncludeContent)]];
            
            if (isSelf == YES) {
                
                [userDict setObject:userDict[StringFromGenuineFinishData(k_weekData)] forKey:StringFromGenuineFinishData(k_vivoValue)];
            }
            
            WineBucketModel *user = [WineBucketModel modelWithDic:userDict];
            
            model.user = user;
        }

        
        cellData = [[CollectionDataBbbb alloc] initWithManager:(isSelf ? MsgDirectionOutgoing : MsgDirectionIncoming)];

        
        if (![self greet]) {
            
            [self flagRemove:cellData];
        }
    }


    
    if (model.user == nil) {

        
        NSMutableDictionary *extraDict = [NSMutableDictionary dictionaryWithDictionary:dic[StringFromGenuineFinishData(k_uncertainSuddenEfficiencyData)]];
        
        NSMutableDictionary *userDict = [NSMutableDictionary dictionaryWithDictionary:dic[StringFromGenuineFinishData(k_slapText)]];
        
        [userDict addEntriesFromDictionary:extraDict[StringFromGenuineFinishData(kIncludeContent)]];

        
        WineBucketModel *user = [WineBucketModel modelWithDic:userDict];


        
        if (user.uid.length == 0) {
            
            user.uid = userDict[StringFromGenuineFinishData(kOftenLiveOweData)];
        }
        
        if (user.headPic.length == 0) {
            
            user.headPic = userDict[StringFromGenuineFinishData(k_fellValue)];
        }

        
        if (isAutoSendMsg) {
            
            user.uid = model.msgInfo.toUid;
            
            user.headPic = [PlayColorBbbb size].file.headPic;
        }

        
        model.user = user;

    }

    
    if (self.conversationType == TXConversation_System) {

        
        if (model.msgInfo == nil) {

            
            NSMutableDictionary *extraDict = [NSMutableDictionary dictionaryWithDictionary:dic[StringFromGenuineFinishData(k_uncertainSuddenEfficiencyData)]];
            
            MaxModel *msgInfo = [[MaxModel alloc]init];
            
            msgInfo.content = dic[StringFromGenuineFinishData(kHotelData)];
            
            msgInfo.jumps = extraDict[StringFromGenuineFinishData(k_uncertainSuddenEfficiencyData)];
            
            model.msgInfo = msgInfo;

        }

    }

    
    cellData.toFamily = model;

    
    cellData.list = self.conversationType;

    
    
    NSString *customStr = [[NSString alloc]initWithData:msg.localCustomData encoding:NSUTF8StringEncoding];
    
    NSDictionary *customDic = [NSDictionary center:customStr];
    
    TMsgStatus status = [customDic[StringFromGenuineFinishData(k_dominateData)] integerValue];
    
    cellData.with = status;

    
    return cellData;

}




- (BOOL)greet {
    
    NSString *keyValue = [[NSUserDefaults standardUserDefaults] objectForKey:[AuthorShadow communication]];
    
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    
    [dateFormatter setDateFormat:StringFromGenuineFinishData(kTaName)];
    
    [dateFormatter setLocale:[NSLocale currentLocale]];
    
    NSString *todayDateStr = [dateFormatter stringFromDate:[NSDate date]];
    
    if (keyValue && [keyValue isEqualToString:todayDateStr]) {
        
        return YES;
    }
    
    return NO;
}


- (BOOL)flagRemove:(TelegramVideoReportCellData *)cellModel{
    
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    
    [dateFormatter setDateFormat:StringFromGenuineFinishData(kTaName)];
    
    [dateFormatter setLocale:[NSLocale currentLocale]];
    
    NSString *todayDateStr = [dateFormatter stringFromDate:[NSDate date]];
    
    NSDate *msgDate = cellModel.inner.timestamp;
    
    NSString *msgDateStr = [dateFormatter stringFromDate:msgDate];
    
    if (!cellModel.inner.isSelf && [cellModel isKindOfClass:[CollectionDataBbbb class]] && self.conversationType == TXConversation_Private && [msgDateStr isEqualToString:todayDateStr]) {
        
        CollectionDataBbbb *model =(CollectionDataBbbb *)cellModel;
        
        if (!FZUtils.isEmptyString(model.sunProtectionFactor) && [CopernicanSystemBbbb like:model.sunProtectionFactor]) {
            
            [self.insertNumberTips_Signal sendNext:nil];
            
            [[NSUserDefaults standardUserDefaults] setValue:todayDateStr forKey:[AuthorShadow communication]];
            
            [[NSUserDefaults standardUserDefaults] synchronize];
            
            return YES;
        }
    }
    
    return NO;

}




#pragma mark -重发消息的数据封装


- (NSDictionary*)pieceOfLand:(NameWithCellData *)cellData {

    
    NSArray *path = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    
    NSString *filePath = [path objectAtIndex:0];
    
    filePath = [filePath stringByAppendingPathComponent:imageFileName];
    
    filePath = [filePath stringByAppendingPathComponent:[cellData.door lastPathComponent]];


    
    if (FZUtils.isEmptyString(cellData.toFamily.msgInfo.imageId) && [[NSFileManager defaultManager] fileExistsAtPath:filePath] == NO) {
        
        [self push:StringFromGenuineFinishData(k_foreignTotalactText)];
        
        return nil;
    }

    
    NSMutableDictionary * dic = [NSMutableDictionary dictionary];
    
    NSMutableDictionary * msgInfo = [NSMutableDictionary dictionary];

    
    [msgInfo setObject:@(self.chatInfoModel.vipLevel).description forKey:StringFromGenuineFinishData(kSoonTitle)];
    
    [msgInfo setObject:@(self.chatInfoModel.mbId).description forKey:StringFromGenuineFinishData(kStateBiologicValue)];
    
    [msgInfo setObject:StringFromGenuineFinishData(kBridgeName) forKey:StringFromGenuineFinishData(kMootTitle)];
    
    [msgInfo setObject:StringFromGenuineFinishData(k_lightningContent) forKey:StringFromGenuineFinishData(kStateDawnValue)];

    
    NSMutableDictionary *params = [NSMutableDictionary dictionary];
    
    [params setObject:StringFromGenuineFinishData(kBridgeName) forKey:StringFromGenuineFinishData(k_renderAheadName)];
    
    if (FZUtils.isEmptyString(cellData.toFamily.msgInfo.imageId)) {
        
        [params setObject:filePath forKey:StringFromGenuineFinishData(k_suspendValue)];
        
        [msgInfo setObject:filePath forKey:StringFromGenuineFinishData(k_cellNonethelessValue)];
    
    }else{ 
        
        [params setObject:cellData.toFamily.msgInfo.imageId forKey:StringFromGenuineFinishData(kPrivatelyName)];
        
        [msgInfo setObject:cellData.toFamily.msgInfo.imageId forKey:StringFromGenuineFinishData(kPrivatelyName)];
        
        [msgInfo setObject:cellData.toFamily.msgInfo.imageUri forKey:StringFromGenuineFinishData(k_cellNonethelessValue)];
    }
    
    [dic setObject:msgInfo forKey:StringFromGenuineFinishData(kIncludeContent)];
    
    [dic setObject:params forKey:StringFromGenuineFinishData(kGuyAccordTitle)];

    
    return dic;
}


- (NSDictionary*)start:(MetadataCellData *)cellData {


    
    NSMutableDictionary * dic = [NSMutableDictionary dictionary];


    
    NSMutableDictionary *msgInfo = [NSMutableDictionary dictionary];

    
    NSString *audioLength;
    
    NSString *filePath;

    
    if (cellData.option.DB_voiceCacheWrap != nil) {
        
        audioLength = [NSString stringWithFormat:@"%ld",cellData.option.DB_voiceCacheWrap.shortness];
        
        filePath = cellData.option.DB_voiceCacheWrap.device;
    
    }else{
        
        audioLength = cellData.toFamily.params[StringFromGenuineFinishData(k_impossibleName)];
        
        filePath = cellData.toFamily.params[StringFromGenuineFinishData(k_impossibleBodyValue)];
    }

    
    [msgInfo setObject:audioLength forKey:StringFromGenuineFinishData(k_piValue)];
    
    [msgInfo setObject:filePath forKey:StringFromGenuineFinishData(k_impossibleBodyValue)];
    
    [msgInfo setObject:StringFromGenuineFinishData(kBikeFileTitle) forKey:StringFromGenuineFinishData(kStateDawnValue)];
    
    [msgInfo setObject:@(self.chatInfoModel.vipLevel).description forKey:StringFromGenuineFinishData(kSoonTitle)];
    
    [msgInfo setObject:@(self.chatInfoModel.mbId).description forKey:StringFromGenuineFinishData(kStateBiologicValue)];
    
    [msgInfo setObject:@([PlayColorBbbb size].file.id).description forKey:StringFromGenuineFinishData(k_vivoValue)];
    
    [msgInfo setObject:self.targetId forKey:StringFromGenuineFinishData(k_weekData)];

    
    NSMutableDictionary *params = [NSMutableDictionary dictionary];
    
    [params setObject:StringFromGenuineFinishData(kLipFlueValue) forKey:StringFromGenuineFinishData(k_renderAheadName)];
    
    if (!FZUtils.isEmptyString(cellData.toFamily.msgInfo.audioId)) { 
        
        [params setObject:cellData.toFamily.msgInfo.audioId forKey:StringFromGenuineFinishData(k_hapGiftConsumeValue)];
        
        [msgInfo setObject:cellData.toFamily.msgInfo.audioId forKey:StringFromGenuineFinishData(k_hapGiftConsumeValue)];
    }
    
    [params setObject:filePath forKey:StringFromGenuineFinishData(k_impossibleBodyValue)];
    
    [params setObject:audioLength forKey:StringFromGenuineFinishData(k_impossibleName)];

    
    [dic setObject:msgInfo forKey:StringFromGenuineFinishData(kIncludeContent)];
    
    [dic setObject:params forKey:StringFromGenuineFinishData(kGuyAccordTitle)];

    
    return dic;
}


- (NSDictionary*)content:(NSString*)content {

    
    NSMutableDictionary *dic = [NSMutableDictionary dictionary];
    
    NSMutableDictionary *params = [NSMutableDictionary dictionary];

    {
        
        NSMutableDictionary * msgInfo = [NSMutableDictionary dictionary];
        
        [msgInfo setObject:content?:@"" forKey:StringFromGenuineFinishData(kHotelData)];
        
        [msgInfo setObject:@(self.chatInfoModel.vipLevel).description forKey:StringFromGenuineFinishData(kSoonTitle)];
        
        [msgInfo setObject:@(self.chatInfoModel.mbId).description forKey:StringFromGenuineFinishData(kStateBiologicValue)];
        
        [msgInfo setObject:StringFromGenuineFinishData(k_demonstrateData) forKey:StringFromGenuineFinishData(kStateDawnValue)];
        
        [dic setObject:msgInfo forKey:StringFromGenuineFinishData(kIncludeContent)];

        
        [params setObject:StringFromGenuineFinishData(k_leapText) forKey:StringFromGenuineFinishData(k_renderAheadName)];
        
        [params setObject:content?:@"" forKey:StringFromGenuineFinishData(k_summaryName)];
        
        [dic setObject:params forKey:StringFromGenuineFinishData(kGuyAccordTitle)];

    }
    
    return dic;
}


- (void)position:(NSDictionary*)dict analysis:(void(^)(NSDictionary *component,NSError *error)) finishBlock {
    
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithDictionary:dict];
    
    params[StringFromGenuineFinishData(k_weekData)] = self.targetId;

    
    if ([params[StringFromGenuineFinishData(k_renderAheadName)] isEqualToString:StringFromGenuineFinishData(kBridgeName)]) {
        
        if ([params.allKeys containsObject:StringFromGenuineFinishData(k_suspendValue)]) { 
            
            NSString *imageStr = params[StringFromGenuineFinishData(k_suspendValue)];
            
            NSData *data = [NSData dataWithContentsOfFile:imageStr];
            
            [params setObject:data forKey:StringFromGenuineFinishData(k_suspendValue)];
        }
    
    }else if ([params[StringFromGenuineFinishData(k_renderAheadName)] isEqualToString:StringFromGenuineFinishData(kLipFlueValue)]) {
        
        NSString *path = params[StringFromGenuineFinishData(k_impossibleBodyValue)];
        
        [params removeObjectForKey:StringFromGenuineFinishData(k_impossibleBodyValue)];
        
        if (![params.allKeys containsObject:StringFromGenuineFinishData(k_hapGiftConsumeValue)]) {
            
            
            if ([path containsString:StringFromGenuineFinishData(kVivoData)]) {
                
                path = [NSString stringWithFormat:@"%@%@",[NSHomeDirectory() stringByAppendingString:StringFromGenuineFinishData(k_killingNearlyName)],[path lastPathComponent]];
            
            }else if ([path containsString:StringFromGenuineFinishData(kTotViewData)]) {
                
                path = [NSString stringWithFormat:@"%@%@",[NSHomeDirectory() stringByAppendingString:StringFromGenuineFinishData(kFindFibValue)],[path lastPathComponent]];
            }
            
            NSData *voiceData = [NSData dataWithContentsOfFile:path];
            
            params[StringFromGenuineFinishData(kBikeFileTitle)] = voiceData;
        }
    }

    
    HologramHead *setup = [CopernicanSystemBbbb look:UserIMBiz_Social];
    
    setup.pushTimeId = params;

    
    [[PlayColorBbbb size].admin key:setup withFrom:YES cellBlock:^(HologramHead *requestModel, NSDictionary *component, NSError *error) {
        
        if (finishBlock) {
            
            finishBlock(component,error);
        }
    
    }];

}


#pragma mark -音视频通话选择框内容


- (NSString *)mutual {
    
    NSMutableString *voiceText = [[NSMutableString alloc] initWithString:StringFromGenuineFinishData(k_encourageTitle)];

    
    NSInteger voiceAuth = [self.chatInfoModel.voiceAuth integerValue];
    
    if (voiceAuth == -1){
        
        [voiceText appendString:StringFromGenuineFinishData(k_laterTitle)];
    
    }else{
        
        if ([PlayColorBbbb size].file.sex == Gender_Female) {
            
            NSInteger voiceBean = [self.chatInfoModel.voiceBean integerValue];
            
            if (voiceBean > 0) {
                
                [voiceText appendFormat:StringFromGenuineFinishData(k_lopeData),self.chatInfoModel.voiceBean];
            
            }else if(voiceBean == 0){
                
                [voiceText appendString:StringFromGenuineFinishData(kCandidaTitle)];
            }
        
        }else{
            
            NSInteger voicePrice = [self.chatInfoModel.voicePrice integerValue];
            
            if (voicePrice > 0) {
                
                [voiceText appendFormat:StringFromGenuineFinishData(kSummaryText),self.chatInfoModel.voicePrice,[ExamineColorBbbb controlUser]];

            
            }else if(voicePrice == 0){
                
                [voiceText appendString:StringFromGenuineFinishData(kCandidaTitle)];
            }
        }
    }
    
    return voiceText;
}

- (NSString *)disoblige{
    
    NSInteger videoAuth = [self.chatInfoModel.videoAuth integerValue];
    
    NSMutableString *videoText = [[NSMutableString alloc] initWithString:StringFromGenuineFinishData(kBranAskValue)];
    
    if (videoAuth == -1) {
        
        [videoText appendString:StringFromGenuineFinishData(k_laterTitle)];
    
    }else{
        
        if ([PlayColorBbbb size].file.sex == Gender_Female) {
            
            NSInteger videoBean = [self.chatInfoModel.videoBean integerValue];
            
            if (videoBean > 0) {
                
                [videoText appendString:[NSString stringWithFormat:StringFromGenuineFinishData(k_lopeData),self.chatInfoModel.videoBean]];
            
            }else if(videoBean == 0){
                
                [videoText appendString:StringFromGenuineFinishData(kCandidaTitle)];
            }
        
        }else{
            
            NSInteger videoPrice = [self.chatInfoModel.videoPrice integerValue];
            
            if (videoPrice > 0) {
                
                [videoText appendString:[NSString stringWithFormat:@"（%@%@/分钟）",self.chatInfoModel.videoPrice,[ExamineColorBbbb controlUser]]];
            
            }else if(videoPrice == 0){
                
                [videoText appendString:StringFromGenuineFinishData(kCandidaTitle)];
            }
        }
    }
    
    return [videoText copy];
}


#pragma mark -插入名片消息


- (NSDictionary *)cypher:(BOOL)isRecive {
    
    NSString *content = [PlayColorBbbb size].familyDescriptionAddtion.connectNotice;
    
    if (content == nil || content.length == 0) {
        
        return nil;
    }

    
    NSMutableDictionary * extral = [NSMutableDictionary dictionary];

    
    if ([PlayColorBbbb size].file.sex == Gender_Male) {
        
        if (isRecive) {
            
            content = StringFromGenuineFinishData(kCountTitle);
        
        }else { 
            
            content = [content stringByAppendingString:StringFromGenuineFinishData(kAmazingSwellText)];
        }
    }

    
    [extral setObject:content forKey:StringFromGenuineFinishData(kHotelData)];
    
    return extral;
}



- (void)dataBbbb {

    
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    
    NSString *bubbleKey = [NSString stringWithFormat:StringFromGenuineFinishData(kAccordCustomText),self.targetId,@([PlayColorBbbb size].file.id).description];
    
    if ([userDefaults boolForKey:bubbleKey] || [PlayColorBbbb size].file.sex == Gender_Female) {
        
        return;
    }
    
    NSString *countKey = [NSString stringWithFormat:StringFromGenuineFinishData(kLaterLeapData),self.targetId,@([PlayColorBbbb size].file.id).description];
    
    NSInteger msgCount = [userDefaults integerForKey:countKey];
    
    [userDefaults setInteger:++msgCount forKey:countKey];
    
    if ([userDefaults boolForKey:bubbleKey]) {
        
        return;
    }

    
    if (msgCount == 5) {
        
        [userDefaults setBool:YES forKey:bubbleKey];
    }
}



- (void)place:(NSDictionary *)component {

    
    NSDictionary *data = component[StringFromGenuineFinishData(k_toleValue)];

    
    if ([data isKindOfClass:[NSDictionary class]] &&
        
        [data.allKeys containsObject:StringFromGenuineFinishData(k_giftSuraName)]) {
        
        NSString *redPackedId = [NSString stringWithFormat:StringFromGenuineFinishData(k_stressMiteName),component[StringFromGenuineFinishData(k_toleValue)][StringFromGenuineFinishData(k_giftSuraName)]];

        
        if (redPackedId.length) {
            
            
            [[ByPush instance] sizeArray:redPackedId?:@""];
        }
    }
}



- (void)utiliser {
    
    if ([EleventhHourWith remarkBy].view.unit == RELEASE_STATE_DONGING) {
        
        [self push:StringFromGenuineFinishData(kTestifyTitle)];
        
        return;
    }
    //: [LFCMomentHelper releaseMomentWithController:[AppManager sharedAppManager].activityViewController photosCount:9 competion:^(LFCMomentReleaseManagerWrap *wrap) {
    [AtCurrent bbbbCustom:[PlayColorBbbb size].attentionAcross cycleGiftBbbb:9 move:^(UserBbbb *wrap) {
        //: switch (wrap.resultCode) {
        switch (wrap.unit) {
            //: case RELEASE_STATE_OK:
            case RELEASE_STATE_OK:
                //: NSLog(@"-----发布成功------");
                
                break;
            
            case RELEASE_STATE_DONGING:
                //: NSLog(@"-----发布中------");
                
                break;
            
            case RELEASE_STATE_FAIL:
                //: NSLog(@"-----发布失败------");
                
                break;
            
            default:
                
                break;
        }

    
    }];
}


#pragma mark -草稿


- (RACCommand *)fillDraft_Signal {
    
    
    if (!_fillDraft_Signal) {
        
        @autoreleasepool {} __weak __typeof__(self) self_weak_ = (self);;
        
        _fillDraft_Signal = [[RACCommand alloc] initWithSignalBlock:^RACSignal * _Nonnull(id _Nullable input) {
            
            @autoreleasepool {}
             __strong __typeof__(self) self = self_weak_;
                            ;
            
            NSString* groupID = input;
            
            return [RACSignal createSignal:^RACDisposable *(id<RACSubscriber> subscriber) {
                
                NSString *userId = [NSString stringWithFormat:StringFromGenuineFinishData(k_fastData),self.targetId];

                
                [[V2TIMManager sharedInstance] getConversation:userId succ:^(V2TIMConversation *conv) {

                    
                    dispatch_after(dispatch_time((0ull), (int64_t)(1 * 1000000000ull)), dispatch_get_main_queue(), ^{
                        
                        
                        NSString* draft = conv.draftText;
                        
                        [subscriber sendNext:draft];
                        
                        [subscriber sendCompleted];
                    
                    });
                
                } fail:^(int code, NSString *desc) {
                    
                    [[V2TIMManager sharedInstance] setConversationDraft:groupID draftText:nil succ:nil fail:nil];
                
                }];
                
                return nil;
            
            }];


        
        }];
    }
    
    return _fillDraft_Signal;
}


#pragma mark -获取会话信息，以及用户最新的一条动态，插入列表


- (RACCommand *)getchatInfoAndCheckMomentInfo_Signal {
    
    if (!_getchatInfoAndCheckMomentInfo_Signal) {
        
        _getchatInfoAndCheckMomentInfo_Signal = [[RACCommand alloc] initWithSignalBlock:^RACSignal * _Nonnull(id _Nullable input) {

            
            return [RACSignal createSignal:^RACDisposable *(id<RACSubscriber> subscriber) {

                
                if (_momentInfoChecking) {
                    
                    [subscriber sendNext:@{}];
                    
                    [subscriber sendCompleted];
                }
                
                _momentInfoChecking = YES;

                
                
                @autoreleasepool {} __weak __typeof__(self) self_weak_ = (self);;
                
                [self image:^(NSDictionary *component, NSError *error) {
                    
                    @autoreleasepool {}
                     __strong __typeof__(self) self = self_weak_;
                                    ;

                    
                    self->_momentInfoChecking = NO;

                    
                    if (!error && component) {

                        
                        BbbbResult * model = [BbbbResult modelWithDictionary:component[StringFromGenuineFinishData(k_toleValue)]];

                        
                        self.chatInfoModel = model;
                        
                        self.contentIntimacy = model.intimacy;

                        
                        [subscriber sendNext:component];
                        
                        [subscriber sendCompleted];
                    }

                 
                 }];

                
                return nil;
            
            }];


        
        }];
    }
    
    return _getchatInfoAndCheckMomentInfo_Signal;
}


#pragma mark -点击用户详情更多


- (RACCommand *)moreBtnComm_Signal {
    
    if (!_moreBtnComm_Signal) {
        
        _moreBtnComm_Signal = [[RACCommand alloc] initWithSignalBlock:^RACSignal * _Nonnull(id _Nullable input) {
            
            @autoreleasepool {} __weak __typeof__(self) self_weak_ = (self);;
            
            return [RACSignal createSignal:^RACDisposable *(id<RACSubscriber> subscriber) {
                
                @autoreleasepool {}
                 __strong __typeof__(self) self = self_weak_;
                                ;
                
                
                NSMutableDictionary *tempDic = [[NSMutableDictionary alloc] init];
                
                NSString *headPic = self.userInfoDic[StringFromGenuineFinishData(k_moteData)]?:self.targetUserInfo.headPic?:@"";
                
                NSString *uid = [NSString stringWithFormat:@"%@", self.userInfoDic[StringFromGenuineFinishData(k_vivoValue)]?:[NSString stringWithFormat:@"%zd",self.targetUserInfo.uid]?:@""];

                
                NSString *userName;
                
                if (self.userInfoDic) {
                    
                    userName = self.userInfoDic[StringFromGenuineFinishData(k_areaResignData)];
                    
                    NSString *remark = self.userInfoDic[StringFromGenuineFinishData(kRealistTimeData)];
                    
                    if (FZUtils.isEmptyString(remark) == NO) {
                        
                        userName = remark;
                    }
                }
                
                if (userName == nil && userName.length == 0) {
                    
                    userName = self.targetUserInfo.nickname;
                    
                    NSString *remark = self.targetUserInfo.remark;
                    
                    if (FZUtils.isEmptyString(remark) == NO) {
                        
                        userName = remark;
                    }
                }

                
                BOOL isTop = self.conversation.isPinned;
                
                [tempDic setObject:userName forKey:StringFromGenuineFinishData(k_areaResignData)];
                
                [tempDic setObject:uid forKey:StringFromGenuineFinishData(k_vivoValue)];
                
                [tempDic setObject:headPic forKey:StringFromGenuineFinishData(k_moteData)];
                
                [tempDic setObject:[NSNumber numberWithBool:isTop] forKey:StringFromGenuineFinishData(k_tankName)];
                
                [tempDic setObject:@(self.chatInfoModel.inMyBlackList) forKey:StringFromGenuineFinishData(k_sourceHapName)];

                
                [subscriber sendNext:@[userName,tempDic]];
                
                [subscriber sendCompleted];

                
                return nil;
            
            }];


        
        }];
    }
    
    return _moreBtnComm_Signal;
}


#pragma mark -发送图片消息封装


- (RACCommand *)sendImgMsg_Signal {
    
    if (!_sendImgMsg_Signal) {
        
        _sendImgMsg_Signal = [[RACCommand alloc] initWithSignalBlock:^RACSignal * _Nonnull(id _Nullable input) {

            
            UIImage* image = input[0];
            
            NSString* imageFileName = input[1];
            
            @autoreleasepool {} __weak __typeof__(self) self_weak_ = (self);;
            
            return [RACSignal createSignal:^RACDisposable *(id<RACSubscriber> subscriber) {
                
                @autoreleasepool {}
                 __strong __typeof__(self) self = self_weak_;
                                ;
                
                NSMutableDictionary *dic = [NSMutableDictionary dictionary];
                
                NSMutableDictionary *params = [NSMutableDictionary dictionary];
                
                NSMutableDictionary *msgInfo = [NSMutableDictionary dictionary];

                
                [msgInfo setObject:@(self.chatInfoModel.vipLevel).description forKey:StringFromGenuineFinishData(kSoonTitle)];
                
                [msgInfo setObject:@(self.chatInfoModel.mbId).description forKey:StringFromGenuineFinishData(kStateBiologicValue)];
                
                [msgInfo setObject:StringFromGenuineFinishData(kBridgeName) forKey:StringFromGenuineFinishData(kMootTitle)];
                
                [msgInfo setObject:StringFromGenuineFinishData(k_lightningContent) forKey:StringFromGenuineFinishData(kStateDawnValue)];
                
                [dic setObject:msgInfo forKey:StringFromGenuineFinishData(kIncludeContent)];

                
                [WritingGrantBbbb cancel:image title:2048 present:^(NSData *resultData) {

                    
                    NSArray *path = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
                    
                    NSString *filePath = [path objectAtIndex:0];
                    
                    filePath = [filePath stringByAppendingPathComponent:imageFileName];

                    
                    if (![[NSFileManager defaultManager] fileExistsAtPath:filePath]) {
                        
                        [[NSFileManager defaultManager] createDirectoryAtPath:filePath withIntermediateDirectories:NO attributes:nil error:nil];
                    }

                    
                    NSString *nameString = [NSString stringWithFormat:StringFromGenuineFinishData(kNeverthelessData),[[NSDate date] timeIntervalSince1970] * 1000,[PlayColorBbbb size].file.id];

                    
                    NSString *imagePath = [filePath stringByAppendingPathComponent:nameString];

                    
                    NSData *imgData;
                    
                    if (resultData) {
                        
                        imgData = resultData;
                    
                    }else{
                        
                        imgData = image.status;
                    }

                    
                    [[NSFileManager defaultManager] createFileAtPath:imagePath contents:imgData attributes:nil];

                    
                    [msgInfo setObject:imagePath forKey:StringFromGenuineFinishData(k_cellNonethelessValue)];

                    
                    [params setObject:StringFromGenuineFinishData(kBridgeName) forKey:StringFromGenuineFinishData(k_renderAheadName)];
                    
                    [params setObject:imagePath forKey:StringFromGenuineFinishData(k_suspendValue)];
                    
                    [dic setObject:params forKey:StringFromGenuineFinishData(kGuyAccordTitle)];

                    
                    [subscriber sendNext:dic];
                    
                    [subscriber sendCompleted];

                
                }];

                
                return nil;
            
            }];


        
        }];
    }
    
    return _sendImgMsg_Signal;
}



- (RACCommand *)requestGreetMessageData_Signal {
    
    if (!_requestGreetMessageData_Signal) {
        
        @autoreleasepool {} __weak __typeof__(self) self_weak_ = (self);;
        
        _requestGreetMessageData_Signal = [[RACCommand alloc] initWithSignalBlock:^RACSignal * _Nonnull(id _Nullable input) {
            
            @autoreleasepool {}
             __strong __typeof__(self) self = self_weak_;
                            ;

            
            [self fromInformation];
            
            return [RACSignal empty];
        
        }];
    }
    
    return _requestGreetMessageData_Signal;
}






- (RACSubject *)refreshTargetUserInfo_Signal {
    
    if (!_refreshTargetUserInfo_Signal) {
        
        _refreshTargetUserInfo_Signal = [RACSubject subject];
    }
    
    return _refreshTargetUserInfo_Signal;
}



- (RACSubject *)handerlTopMsgArr_Signal {
    
    if (!_handerlTopMsgArr_Signal) {
        
        _handerlTopMsgArr_Signal = [RACSubject subject];
    }
    
    return _handerlTopMsgArr_Signal;
}


- (RACSubject *)greetMessage_Signal {
    
    if (!_greetMessage_Signal) {
        
        _greetMessage_Signal = [RACSubject subject];
    }
    
    return _greetMessage_Signal;
}



- (RACSubject *)insertNumberTips_Signal {
    
    if (!_insertNumberTips_Signal) {
        
        _insertNumberTips_Signal = [RACSubject subject];
    }
    
    return _insertNumberTips_Signal;
}


- (RACSubject *)handerlLiveMsgArr_Signal {
    
    if (!_handerlLiveMsgArr_Signal) {
        
        _handerlLiveMsgArr_Signal = [RACSubject subject];
    }
    
    return _handerlLiveMsgArr_Signal;
}


- (NSMutableArray *)liveRidArr{
    
    if (!_liveRidArr) {
        
        _liveRidArr = [[NSMutableArray alloc] init];
    }
    
    return _liveRidArr;

}



@end


Byte * GenuineFinishDataToCache(Byte *data) {
    int quantityImitation = data[0];
    int abdicate = data[1];
    Byte rhetoric = data[2];
    int willConventHam = data[3];
    if (!quantityImitation) return data + willConventHam;
    for (int i = willConventHam; i < willConventHam + abdicate; i++) {
        int value = data[i] - rhetoric;
        if (value < 0) {
            value += 256;
        }
        data[i] = value;
    }
    data[0] = 0;
    data[willConventHam + abdicate] = 0;
    return data + willConventHam;
}

NSString *StringFromGenuineFinishData(Byte *data) {
    return [NSString stringWithUTF8String:(char *)GenuineFinishDataToCache(data)];
}
