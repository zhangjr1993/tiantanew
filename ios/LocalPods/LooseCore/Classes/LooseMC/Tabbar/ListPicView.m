
#import <Foundation/Foundation.h>

NSString *StringFromGratedData(Byte *data);



Byte kNumberactValue[] = {80, 23, 24, 13, 25, 167, 235, 32, 124, 237, 241, 236, 96, 140, 121, 122, 122, 121, 138, 106, 105, 81, 134, 100, 146, 119, 132, 125, 139, 119, 133, 135, 133, 125, 134, 140, 70};



Byte k_smokeMountData[] = {20, 12, 84, 6, 144, 6, 171, 157, 168, 156, 152, 166, 149, 171, 179, 121, 192, 184, 134};



Byte kResidentResignName[] = {77, 20, 31, 7, 232, 157, 20, 147, 145, 128, 141, 146, 133, 142, 145, 140, 77, 145, 142, 147, 128, 147, 136, 142, 141, 77, 153, 111};



Byte k_natureData[] = {6, 6, 37, 9, 73, 255, 227, 216, 196, 13, 204, 171, 14, 199, 182, 63};



Byte kTalkTuckData[] = {31, 4, 68, 9, 138, 121, 250, 41, 165, 183, 172, 179, 187, 122};



Byte k_testifyLegThickTitle[] = {43, 6, 88, 11, 11, 93, 187, 237, 214, 162, 84, 61, 226, 0, 62, 216, 217, 189};



Byte kUtterMountChapterTitle[] = {44, 23, 19, 7, 93, 204, 46, 117, 135, 129, 70, 96, 126, 119, 89, 95, 114, 120, 135, 116, 119, 114, 120, 128, 130, 123, 114, 131, 133, 120, 174};



Byte kDeemTitle[] = {44, 21, 13, 8, 32, 210, 75, 2, 118, 112, 124, 123, 108, 122, 114, 108, 122, 114, 128, 128, 110, 116, 114, 108, 129, 124, 110, 128, 129, 46};



Byte k_quitVehicleTitle[] = {25, 15, 20, 12, 98, 208, 124, 145, 245, 227, 7, 203, 136, 134, 117, 130, 135, 122, 131, 134, 129, 66, 135, 119, 117, 128, 121, 65};



Byte k_fastContent[] = {59, 6, 22, 4, 252, 204, 158, 252, 151, 197, 35};



Byte k_fibContent[] = {9, 20, 72, 8, 91, 15, 100, 80, 188, 169, 170, 170, 169, 186, 186, 170, 142, 179, 143, 178, 167, 169, 171, 171, 183, 189, 182, 188, 192};



Byte k_residentMootText[] = {78, 6, 43, 11, 121, 18, 122, 86, 219, 42, 23, 19, 172, 181, 16, 207, 212, 105};



Byte kScalePiValue[] = {17, 14, 78, 8, 101, 188, 215, 187, 193, 182, 175, 185, 179, 143, 188, 183, 187, 175, 194, 183, 189, 188, 133};



Byte kModelSilkRenderData[] = {18, 19, 74, 11, 72, 205, 232, 135, 22, 69, 189, 190, 171, 172, 172, 171, 188, 142, 149, 154, 178, 193, 128, 169, 183, 185, 183, 175, 184, 190, 147};



Byte kBenefitSeniorSilkValue[] = {92, 23, 28, 6, 253, 38, 126, 144, 138, 127, 109, 95, 106, 100, 140, 123, 129, 144, 125, 128, 123, 129, 137, 139, 132, 123, 138, 139, 142, 70};



Byte k_conspiracyTitle[] = {28, 20, 98, 11, 40, 237, 187, 78, 162, 60, 180, 214, 195, 196, 196, 195, 212, 196, 151, 206, 198, 182, 219, 193, 206, 199, 213, 193, 207, 213, 201, 232};



Byte k_punishmentPeakData[] = {91, 19, 12, 9, 166, 121, 185, 88, 222, 128, 109, 110, 110, 109, 126, 113, 83, 128, 116, 92, 98, 107, 127, 123, 111, 117, 109, 120, 36};



Byte kDemocraticName[] = {10, 3, 78, 14, 49, 9, 206, 41, 5, 219, 234, 167, 212, 60, 135, 135, 121, 90};



Byte k_flueText[] = {15, 13, 27, 13, 85, 79, 169, 106, 131, 139, 148, 22, 80, 142, 131, 138, 146, 92, 137, 132, 136, 124, 143, 132, 138, 137, 189};



Byte k_twentiethText[] = {94, 6, 65, 12, 20, 171, 87, 191, 15, 126, 218, 5, 39, 201, 210, 40, 219, 197, 130};



Byte kPositText[] = {21, 19, 11, 5, 108, 109, 114, 108, 88, 92, 108, 94, 61, 106, 127, 126, 108, 122, 127, 106, 110, 108, 126, 115, 40};



Byte k_bucketOpenName[] = {85, 49, 26, 11, 91, 37, 24, 87, 19, 201, 134, 254, 215, 186, 255, 169, 201, 254, 213, 191, 0, 169, 170, 1, 168, 202, 255, 175, 192, 9, 214, 155, 0, 169, 170, 1, 168, 202, 255, 170, 168, 255, 169, 201, 255, 217, 197, 3, 154, 185, 255, 162, 202, 2, 206, 192, 255, 173, 192, 152, 205};



Byte k_insectSkyData[] = {59, 24, 42, 12, 27, 254, 255, 145, 39, 190, 115, 65, 158, 139, 140, 140, 139, 156, 160, 131, 110, 111, 141, 97, 137, 150, 143, 157, 137, 139, 141, 141, 153, 159, 152, 158, 124};



Byte k_conventData[] = {13, 23, 36, 12, 170, 161, 176, 119, 141, 248, 80, 186, 152, 133, 134, 134, 133, 150, 85, 101, 104, 153, 158, 149, 131, 144, 137, 151, 131, 151, 147, 135, 141, 133, 144, 246};



Byte kSmokeWithValue[] = {36, 16, 70, 9, 8, 254, 4, 52, 239, 186, 167, 168, 168, 167, 184, 174, 140, 159, 135, 190, 122, 165, 179, 185, 173, 135};



Byte kVivoName[] = {52, 7, 67, 6, 99, 27, 178, 179, 164, 166, 172, 183, 188, 250};















#import "ListPicView.h"
#import "FrameRecView.h"

@interface ListPicView()


@property (nonatomic, strong) FrameRecView *pushViewBbbb;

@property (nonatomic, assign) BOOL time;


@end


@implementation ListPicView


- (void)dealloc {
    
    [[NSNotificationCenter defaultCenter] removeObserver:self];
}


- (instancetype)init {

    
    self = [super init];
    
    if (self) {
        
        _currentTabType = 0;
        
        self.backgroundImage = [UIImage new];
        
        self.shadowImage = [UIImage new];

        
        
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 
                                                 selector:@selector(nuclearFamilyMessage)
                                                     
                                                     name:UIApplicationDidBecomeActiveNotification
                                                   
                                                   object:nil];
    }
    
    return self;
}


- (void)setKickAaaa:(NSArray <NSNumber *> *)itemTypes {

    
    if (itemTypes.count == 0) {
        
        return;
    }

    
    CGFloat sideMargin = 5;
    
    CGFloat width = (screenWidth()- sideMargin *2)/itemTypes.count;
    
    CGFloat height = (( (int)((screenHeight()*1.f/screenWidth())*100.f) == 216 ?YES:NO ) ? 34 + 49 - 20 : 49);

    
    for (int i = 0; i < itemTypes.count; i++) {

        
        TabBarItemType itemType = [itemTypes[i] integerValue];

        
        UIButton *btn = [self post:itemType];
        
        if (btn) {
            
            btn.tag = itemType + 100;
            
            btn.selected = (itemType == _currentTabType);
            
            btn.titleLabel.font = [UIFont underbelly:(itemType == _currentTabType ? PFSCTypeMedium:PFSCTypeRegular) substance:11] ;
            
            btn.frame = CGRectMake(width * i + sideMargin, 0, width, height);
            
            [btn manager:4];

            
            [self addSubview:btn];
        }
    }

    
    [self selectGroup];
}


- (void)commonBbbb:(NSString *)headPic{

    
    UIButton *btn = [self viewWithTag:100+TabBarItem_Message];
    
    if (btn) {
        
        UILabel *badgeLabel = [self shared:btn];
        
        badgeLabel.hidden = YES;
    }

    
    UIImageView *oldView = [self viewWithTag:10010];
    
    if (oldView) {
        
        [oldView sd_setImageWithURL:[NSURL URLWithString:headPic] placeholderImage:[UserTextImage item]];

        
        return;
    }
    
    UIImageView *view = [[UIImageView alloc]initWithFrame:CGRectMake(btn.centerX-30,safeAreaBottomHeight()?-8:-12, 60, 60)];
    
    [view sd_setImageWithURL:[NSURL URLWithString:headPic] placeholderImage:[UserTextImage item]];
    
    view.tag = 10010;
    
    view.contentMode = UIViewContentModeScaleAspectFill;
    
    view.layer.cornerRadius = 30;
    
    view.layer.masksToBounds = YES;
    
    view.layer.borderColor = ShowColor.send.CGColor;
    
    view.layer.borderWidth = 2;
    
    [self addSubview:view];

    
    UIImageView *tipView = [[UIImageView alloc]initWithFrame:CGRectMake(btn.centerX-98*0.5, -50, 98, 34)];
    
    tipView.tag = 10011;
    
    tipView.image = [UserTextImage imageNamed:StringFromGratedData(kDeemTitle)];
    
    [self addSubview:tipView];

}


- (void)exceptUnseeable{

    
    UIView *view = [self viewWithTag:10010];
    
    if (view) {
        
        [view removeFromSuperview];

        
        UIButton *btn = [self viewWithTag:100+TabBarItem_Message];
        
        if (btn) {
            
            UILabel *badgeLabel = [self shared:btn];
            
            if (badgeLabel.text.length > 0) {
                
                badgeLabel.hidden = NO;
            }
        }

    }

    
    UIView *view2 = [self viewWithTag:10011];
    
    if (view2) {
        
        [view2 removeFromSuperview];
    }

}



- (UIButton *)post:(TabBarItemType)itemType {

    
    switch (itemType) {
        
        case TabBarItem_Social:
        
        case TabBarItem_Live:
        
        case TabBarItem_Moment:
        
        case TabBarItem_Message:
        
        case TabBarItem_Account:
        {
            
            UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
            
            btn.backgroundColor = ShowColor.clearColor;
            
            [btn setTitle:[self tell:itemType] forState:UIControlStateNormal];
            
            [btn setTitleColor:[ShowColor table] forState:UIControlStateNormal];
            
            [btn setTitleColor:[self seat:itemType] forState:UIControlStateSelected];
            
            [btn setImage:[self forPush:itemType] forState:UIControlStateNormal];
            
            [btn setImage:[self like:itemType] forState:UIControlStateSelected];
            
            return btn;
        }
            
            break;

        
        default:
            
            break;
    }

    
    return nil;
}

- (NSString *)tell:(TabBarItemType)itemType {

    
    switch (itemType) {

        
        case TabBarItem_Account: return StringFromGratedData(k_twentiethText);
            
            break;
        
        case TabBarItem_Social: return StringFromGratedData(k_residentMootText);
            
            break;
        
        case TabBarItem_Message: return StringFromGratedData(k_fastContent);
            
            break;
        
        case TabBarItem_Moment: return StringFromGratedData(k_testifyLegThickTitle);
            
            break;
        
        case TabBarItem_Live: return StringFromGratedData(k_natureData);
            
            break;
        
        default:
            
            break;
    }

    
    return nil;
}

- (UIImage *)forPush:(TabBarItemType)itemType {

    
    switch (itemType) {
        
        case TabBarItem_Account: return[UserTextImage imageNamed:StringFromGratedData(k_fibContent)];
        
        case TabBarItem_Social: return[UserTextImage imageNamed:StringFromGratedData(k_punishmentPeakData)];
        
        case TabBarItem_Message: return[UserTextImage imageNamed:StringFromGratedData(kSmokeWithValue)];
        
        case TabBarItem_Moment: return[UserTextImage imageNamed:StringFromGratedData(kModelSilkRenderData)];
        
        case TabBarItem_Live: return [UserTextImage imageNamed:StringFromGratedData(kBenefitSeniorSilkValue)];

        
        default:
            
            return nil;
            
            break;
    }

    
    return nil;
}

- (UIImage *)like:(TabBarItemType)itemType {

    
    switch (itemType) {
        
        case TabBarItem_Account: return[UserTextImage imageNamed:StringFromGratedData(k_insectSkyData)];
        
        case TabBarItem_Social: return[UserTextImage imageNamed:StringFromGratedData(k_conventData)];
        
        case TabBarItem_Message: return[UserTextImage imageNamed:StringFromGratedData(k_conspiracyTitle)];
        
        case TabBarItem_Moment: return[UserTextImage imageNamed:StringFromGratedData(kNumberactValue)];
        
        case TabBarItem_Live: return[UserTextImage imageNamed:StringFromGratedData(kUtterMountChapterTitle)];
        
        default:
            
            return nil;
            
            break;
    }

    
    return nil;
}

- (UIColor *)seat:(TabBarItemType)itemType {
    
    return ShowColor.send;
}




- (void)setMortal:(TabBarItemType)itemType {

    
    UIButton *curBtn = [self viewWithTag:_currentTabType + 100];
    
    if (itemType != _currentTabType && curBtn.selected == YES) {
        
        curBtn.selected = NO;
        
        curBtn.titleLabel.font = [UIFont underbelly:(PFSCTypeRegular) substance:11];
    }

    
    UIButton *seletedBtn = [self viewWithTag:itemType + 100];
    
    seletedBtn.selected = YES;
    
    seletedBtn.titleLabel.font = [UIFont underbelly:(PFSCTypeMedium) substance:11];

    
    _currentTabType = itemType;


    
    [self moment];
}




- (void)norType:(NSInteger)value scaleValue:(TabBarItemType)itemType {

    
    value = ((0) > (value) ? (0) : (value));
    
    dispatch_async( dispatch_get_main_queue(), ^{

        
        UIButton *btn = [self viewWithTag:100+itemType];
        
        if (btn) {
            
            UILabel *badgeLabel = [self shared:btn];
            
            [self rueCagey:badgeLabel followAngel:value];
        }
    
    });
}


- (void)nonachievement:(BOOL)show phoneTip:(TabBarItemType)itemType {

    
    dispatch_async( dispatch_get_main_queue(), ^{

        
        UIButton *btn = [self viewWithTag:100+itemType];
        
        if (btn) {
            
            if (show) {
                
                [btn rangeTitle:ShowColor.show
                          
                          doorGuess:8
                        
                        messageTing:UIEdgeInsetsMake(( (int)((screenHeight()*1.f/screenWidth())*100.f) == 216 ?YES:NO )?10:4, 0, 0, 6-btn.width/2.f)];
            
            } else {
                
                [btn hidenBadgeBbbb];
            }
        }

    
    });

}


- (UILabel *)shared:(UIButton *)btn {

    
    UILabel * badgeLabel = [btn viewWithTag:100];
    
    if (badgeLabel == nil) {

        
        badgeLabel = [[UILabel alloc] init];
        
        badgeLabel.backgroundColor = [ShowColor show];
        
        badgeLabel.textColor = [UIColor whiteColor];
        
        badgeLabel.layer.cornerRadius = 18/2.f;
        
        badgeLabel.layer.borderColor = [UIColor whiteColor].CGColor;
        
        badgeLabel.layer.borderWidth = 1.f;
        
        badgeLabel.clipsToBounds = YES;
        
        badgeLabel.font = [UIFont underbelly:(PFSCTypeMedium) substance:13];
        
        badgeLabel.textAlignment = NSTextAlignmentCenter;
        
        badgeLabel.tag = 100;
        
        badgeLabel.hidden = YES;
        
        CGFloat delta = ( (int)((screenHeight()*1.f/screenWidth())*100.f) == 216 ?YES:NO )?5:2;
        
        badgeLabel.frame = CGRectMake(btn.width/2.f + 5, delta, 18, 18);
        
        [btn addSubview:badgeLabel];
    }

    
    return badgeLabel;

}


- (void)rueCagey:(UILabel *)badgeLb followAngel:(NSInteger)value {

    
    badgeLb.hidden = (value == 0);
    
    badgeLb.text = @"";

    
    if (badgeLb.hidden == NO) {

        
        NSString *countStr = (value > 99
                              
                              ? StringFromGratedData(kDemocraticName)
                              
                              : @(value).description);
        
        badgeLb.text = countStr;
        
        CGFloat width = [badgeLb.text
                         
                         sizeWithAttributes:@{NSFontAttributeName:badgeLb.font}].width + 10;
        
        width = ((18) > (width) ? (18) : (width));
        
        badgeLb.width = width;
    }

    
    UIImageView *userView = [self viewWithTag:10010];
    
    if (userView) {
        
        badgeLb.hidden = YES;
    }

}



- (void)streetSmartRecallInfo:(NSNotification *)notification{

    
    NSString *key = [NSString stringWithFormat:StringFromGratedData(k_smokeMountData),[PlayColorBbbb size].file.id];

    
    BOOL showed = [[NSUserDefaults standardUserDefaults] boolForKey:key];

    
    if (showed) {

        
        return;
    }

    
    dispatch_async( dispatch_get_main_queue(), ^{
        
        UIButton *btn = [self viewWithTag:100+TabBarItem_Account];

        
        UIImageView *bubbleView = [btn viewWithTag:110];

        
        NSDictionary *dict = notification.object;

        
        if (bubbleView) {

            
            if (![dict[StringFromGratedData(kTalkTuckData)] boolValue]) {
                
                bubbleView.hidden = YES;
                
                [[NSUserDefaults standardUserDefaults] setBool:YES forKey:key];
            }

            
            return;
        }

        
        if (btn && [dict[StringFromGratedData(kTalkTuckData)] boolValue]) {
            
            [self imageBbbb:btn];
        }
    
    });
}


- (void)imageBbbb:(UIButton *)btn{

    
    if ([PlayColorBbbb size].itemImage != skinStyle_Normal) {
        
        return;
    }

    
    UIImageView* bubbleView = [[UIImageView alloc] init];
    
    UIImage* image = [UserTextImage imageNamed:StringFromGratedData(kPositText)];
    
    bubbleView.image = image;
    
    bubbleView.tag = 110;
    
    UILabel* label = [[UILabel alloc] init];
    
    label.font = [UIFont underbelly:(PFSCTypeRegular) substance:13.0f];
    
    label.text = StringFromGratedData(k_bucketOpenName);
    
    label.textColor = [UIColor whiteColor];
    
    label.numberOfLines = 0;
    
    label.textAlignment = NSTextAlignmentLeft;
    
    label.lineBreakMode = NSLineBreakByWordWrapping;

    
    [bubbleView addSubview:label];
    
    [label mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.top.mas_equalTo(6);
        
        make.left.mas_equalTo(8);
        
        make.right.mas_equalTo(-8);
    
    }];

    
    [btn addSubview:bubbleView];
    
    [bubbleView mas_makeConstraints:^(MASConstraintMaker *make) {
        
        make.size.mas_equalTo(CGSizeMake(133, 52));
        
        make.right.mas_equalTo(btn.mas_right).mas_equalTo(-6);
        
        make.bottom.mas_equalTo(btn.mas_top).mas_equalTo(-2);
    
    }];

    
    dispatch_after(dispatch_time((0ull), (int64_t)(5. * 1000000000ull)), dispatch_get_main_queue(), ^{
        
        bubbleView.hidden = YES;
    
    });

    
    [self distance:bubbleView];
}


- (void)distance:(UIView*)view{
    
    CABasicAnimation* scaleAnim = [CABasicAnimation animationWithKeyPath:StringFromGratedData(k_quitVehicleTitle)];
    
    scaleAnim.fromValue = @(0.5);
    
    scaleAnim.toValue = @(1.0);

    
    CABasicAnimation* alpha = [CABasicAnimation animationWithKeyPath:StringFromGratedData(kVivoName)];
    
    alpha.fromValue = @(0.0);
    
    alpha.toValue = @(1.0);

    
    CAAnimationGroup* group = [CAAnimationGroup animation];
    
    group.duration = 0.5;
    
    group.fillMode = kCAFillModeForwards;
    
    group.removedOnCompletion = NO;
    
    group.repeatCount = 1;
    
    group.beginTime = CACurrentMediaTime();
    
    group.animations = @[scaleAnim,alpha];

    
    CAKeyframeAnimation* keyframe = [CAKeyframeAnimation animationWithKeyPath:StringFromGratedData(kResidentResignName)];
    
    keyframe.values = @[@(0),@(5.0 / 180.0 * 2),@(-5.0 / 180.0 * 2),@(2.0 / 180.0 * 2),@(-2.0 / 180.0 * 2),@(0)];
    
    keyframe.keyTimes = @[@(0),@(0.2),@(0.4),@(0.6),@(0.8),@(1)];
    
    keyframe.duration = 0.83;
    
    keyframe.beginTime = CACurrentMediaTime() + 0.5;
    
    keyframe.repeatCount = 1;
    
    keyframe.removedOnCompletion = NO;
    
    keyframe.fillMode = kCAFillModeForwards;

    
    [view.layer addAnimation:group forKey:StringFromGratedData(k_flueText)];
    
    [view.layer addAnimation:keyframe forKey:StringFromGratedData(kScalePiValue)];
}


#pragma mark - UIApplicationDidBecomeActiveNotification


- (void)nuclearFamilyMessage {
    
    [self.pushViewBbbb apposeForBbbb];
}


#pragma mark - 底部权限提醒

- (void)selectGroup{
    
    self.time = YES;
    
    [self addSubview:self.pushViewBbbb];
}

- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event{
    
    if (!self.hidden && CGRectContainsPoint(self.pushViewBbbb.frame, point)) {

        
        CGPoint tPoint = [self convertPoint:point toView:self.pushViewBbbb];
        
        UIView *ret = [self.pushViewBbbb hitTest:tPoint withEvent:event];
        
        return ret;
    }
    
    return [super hitTest:point withEvent:event];
}


- (void)moment{
    
    CGFloat bottmSpace = 0;
    
    if (_currentTabType == TabBarItem_Account && !self.time) { 
        
        bottmSpace = 63;
    }
    
    CGFloat streamerH = [self.pushViewBbbb association];
    
    if (_currentTabType == TabBarItem_Message) {
        
        self.pushViewBbbb.hidden = YES;
    
    }else{
        
        self.pushViewBbbb.hidden = NO;
        
        self.pushViewBbbb.frame = CGRectMake(8,-streamerH-6-bottmSpace, screenWidth()-16,streamerH);
    }

}



-(FrameRecView *)pushViewBbbb{
    
    if (!_pushViewBbbb) {
        
        _pushViewBbbb = [[FrameRecView alloc]init];
        
        _pushViewBbbb.frame = CGRectMake(8,-[_pushViewBbbb association]-6, screenWidth()-16, [_pushViewBbbb association]);
        
        @autoreleasepool {} __weak __typeof__(self) self_weak_ = (self);;
        
        [_pushViewBbbb setStreamerIconName:^{
            
            @autoreleasepool {}
             __strong __typeof__(self) self = self_weak_;
                            ;
            
            [self moment];
        
        }];
        
        [_pushViewBbbb setClick:^(LFCStreamerViewType type) {
            
            @autoreleasepool {}
             __strong __typeof__(self) self = self_weak_;
                            ;
            
            [self moment];
        
        }];
    }
    
    return _pushViewBbbb;
}




@end


Byte * GratedDataToCache(Byte *data) {
    int fastRate = data[0];
    int situation = data[1];
    Byte inFront = data[2];
    int closedUncertain = data[3];
    if (!fastRate) return data + closedUncertain;
    for (int i = closedUncertain; i < closedUncertain + situation; i++) {
        int value = data[i] - inFront;
        if (value < 0) {
            value += 256;
        }
        data[i] = value;
    }
    data[0] = 0;
    data[closedUncertain + situation] = 0;
    return data + closedUncertain;
}

NSString *StringFromGratedData(Byte *data) {
    return [NSString stringWithUTF8String:(char *)GratedDataToCache(data)];
}
